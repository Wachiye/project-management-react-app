(this.webpackJsonpprojectmanagement=this.webpackJsonpprojectmanagement||[]).push([[0],{11:function(e,t,n){"use strict";function s(e){return null===e?null:new Date(e)}function r(e){return s(e).toDateString()||"--"}function a(e){var t=s(e);return null===t?"--":t.getFullYear()+"-"+c(t.getMonth(),!0)+"-"+c(t.getDate())}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(e+=t?1:0)<=9?"0".concat(e):e}function i(e,t){var n=new Date(e),s=new Date(t),r=(n.getTime()-s.getTime())/1e3;return r/=3600,Math.abs(Math.round(r))}n.r(t),n.d(t,"dateToString",(function(){return r})),n.d(t,"shortDate",(function(){return a})),n.d(t,"dateDiffInHours",(function(){return i})),t.default=s},119:function(e,t,n){},121:function(e,t,n){},177:function(e,t){},178:function(e,t){},179:function(e,t){},180:function(e,t){},181:function(e,t){},190:function(e,t,n){"use strict";n.r(t);var s,r=n(2),a=n.n(r),c=n(26),i=n.n(c),l=(n(119),n(6)),o=n(16),d=(n(73),n(120),n(121),n(122),n(74),n(10)),u=n(17),j=n(0),b=function(){return Object(j.jsx)("nav",{className:"navbar navbar-expand-lg",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(l.b,{className:"navbar-brand",to:"/",children:Object(j.jsx)("img",{src:"logo192.png",alt:"",width:"35",height:"35"})}),Object(j.jsx)("button",{className:"navbar-toggler text-light",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbar","aria-controls":"navbar","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse",id:"navbar",children:Object(j.jsxs)("ul",{className:"navbar-nav ml-auto mb-2 mb-lg-0",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link active rounded-pill","aria-current":"page",to:"/",children:"Home"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/login",children:"Login"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link ",to:"/register",children:"Register"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/contact",children:"Contact Us"})})]})})]})})},h=function(){return Object(j.jsx)("header",{className:"header bg-success",children:Object(j.jsx)(b,{})})},m=function(){return Object(j.jsx)("footer",{className:"footer",children:Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-4 text-center",children:Object(j.jsx)("p",{children:"Copyright \xa9 2021"})}),Object(j.jsx)("div",{className:"col-md-8 text-center",children:Object(j.jsxs)("p",{children:["Designer By ",Object(j.jsx)("a",{href:"mailto:siranjofuw@gmail.com?Subject=APAMS%20CONTACT",children:"Wachiye Siranjofu"})]})})]})})})},v=n(18),p=n.n(v),O=function(){return Object(j.jsxs)("div",{className:"admin-header shadow",children:[Object(j.jsx)("div",{className:"py-2 d-lg-none",children:"APAMS"}),Object(j.jsx)("div",{className:"py-2 d-none d-lg-block",children:"Academic Project Approval and Management System"}),Object(j.jsx)("div",{style:{cursor:"pointer"},className:"d-lg-none admin-nav-toggler",onClick:function(){p()(".admin-nav").toggleClass("active")},children:Object(j.jsx)("i",{className:"fa fa-bars"})}),Object(j.jsx)("div",{className:"py-2 d-none d-lg-block small",children:Object(j.jsx)(l.b,{to:"/profile",children:Object(j.jsx)("i",{className:"fa fa-2x fa-user-circle text-success"})})})]})},x=n(1),f=n.n(x),g=n(3),N=n(8),y=n(9),w=n(104),k=n.n(w),A="apams.egerton@gmail.com",S="254790983123",P="P.O.Box 536, Egerton",D=null===(s=JSON.parse(localStorage.getItem("_apams")))||void 0===s?void 0:s.token,C=k.a.create({baseURL:"http://localhost:8080/api/v1/",headers:{"Content-type":"application/json",Authorization:D?"Bearer ".concat(D):null}});C.interceptors.response.use((function(e){return 204===e.status&&(e={data:{type:"danger",message:"Item deleted successfully"}}),e}),(function(e){return console.log({err:e}),e.response?{error:{message:e.response.data.message,status:e.response.data.status,type:"danger"}}:e.request?{error:{code:500,name:"connection_err",title:"SERVER_CONNECTION_ERROR",type:"danger",message:"Sorry, but could not connect to the server. Try again later."}}:void 0}));var E=C,T=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"doGet",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,E.get(t).then((function(e){n=e})).catch((function(e){console.log({err:e})}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"doPost",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null,e.next=3,E.post(t,n).then((function(e){s=e})).catch((function(e){console.log({err:e})}));case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"doPut",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null,e.next=3,E.put(t,n).then((function(e){s=e})).catch((function(e){console.log({err:e})}));case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"doDelete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,E.delete(t).then((function(e){n=e})).catch((function(e){console.log({err:e})}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),I=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"login",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/auth/login",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/auth/register",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"pwd",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/auth/pwd?email=".concat(t),{email:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/auth/changepwd",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"verifyAccount",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/auth/verify/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/auth/logout",null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setToken",value:function(e){localStorage.setItem("_apams",JSON.stringify(e))}},{key:"getTokenData",value:function(){var e=localStorage.getItem("_apams");return JSON.parse(e)}},{key:"getToken",value:function(){var e;return null===(e=this.getTokenData())||void 0===e?void 0:e.token}},{key:"getUserEmail",value:function(){var e;return null===(e=this.getTokenData())||void 0===e?void 0:e.email}},{key:"getUserRole",value:function(){var e;return null===(e=this.getTokenData())||void 0===e?void 0:e.role}}]),e}()),F=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/projects");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/projects/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllByCategory",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/projects/category/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllByStatus",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/projects/status/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/projects",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/projects/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setStatus",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/projects/".concat(t,"/status/").concat(n),null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setSupervisor",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/projects/".concat(t,"/supervisor/").concat(n),null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMilestones",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/projects/".concat(t,"/milestones"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFiles",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/projects/".concat(t,"/files"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getComments",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/projects/".concat(t,"/comments"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/projects/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/projects/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),R=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/projects",children:"Projects"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/new-project",children:"New Project"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/my-projects",children:"My Projects"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/guides",children:"Guides"})})]})},U=function(){var e,t=null;return F.getAllByStatus("WAITING_APPROVAL").then((function(e){var n;t=null===(n=e.data)||void 0===n?void 0:n.data})),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/staff",children:"Staff"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/students",children:"Students"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/projects",children:"Projects"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/my-projects",children:"My Projects"})}),t&&Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(l.b,{className:"nav-link",to:"/approve-projects",children:["Approve Projects",Object(j.jsx)("span",{className:"badge text-danger pull-right",children:(null===(e=t)||void 0===e?void 0:e.length)||0})]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/reports",children:"Reports"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/guides",children:"Guides"})}),Object(j.jsx)(G,{})]})},M=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/students",children:"My Students"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/my-projects",children:"My Projects"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/guides",children:"Guides"})})]})},_=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/users",children:"Users"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/messages",children:"Messages"})})]})},G=function(){return Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/settings",children:"Settings"})})},L=function(e){var t=e.role;return"STUDENT"===t?Object(j.jsx)(R,{}):"EVALUATOR"===t?Object(j.jsx)(U,{}):"SUPERVISOR"===t?Object(j.jsx)(M,{}):"ADMINISTRATOR"===t?Object(j.jsx)(_,{}):null},B=function(e){var t=function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.logout();case 2:(t=e.sent).error?alert(t.error.message):(localStorage.removeItem("_apams"),window.location="/login");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"admin-nav",children:[Object(j.jsx)("div",{className:"nav-header",children:Object(j.jsxs)("h5",{children:[e.role," Dashboard",Object(j.jsx)("span",{className:"pull-right d-lg-none",onClick:function(){p()(".admin-nav").toggleClass("active")},children:Object(j.jsx)("i",{className:"fa fa-close"})})]})}),Object(j.jsxs)("ul",{className:"nav flex-column",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/dashboard",children:"Dashboard"})}),e.role&&Object(j.jsx)(L,{role:e.role}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/notifications",children:"Notifications"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/profile",children:"Profile"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"/help",children:"Help"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link",to:"#",onClick:t,children:"Logout"})})]})]})},V=function(){return Object(j.jsxs)("footer",{className:"admin-footer",children:[Object(j.jsx)("hr",{}),Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-4",children:Object(j.jsx)("p",{children:"Copyright \xa9 2021"})}),Object(j.jsx)("div",{className:"col-md-8",children:Object(j.jsxs)("p",{children:["Designer By ",Object(j.jsx)("a",{href:"mailto:siranjofuw@gmail.com?Subject=APAMS%20CONTACT",children:"Wachiye Siranjofu"})]})})]})})]})},H=function(e){var t=e.children;return Object(j.jsxs)("div",{className:"wrapper",children:[Object(j.jsx)(h,{}),void p()(".navbar-collapse").removeClass("show"),t,Object(j.jsx)(m,{})]})},Y=function(e){var t=e.children,n=e.role;return Object(j.jsxs)("div",{className:"admin-wrapper",children:[Object(j.jsx)(O,{}),Object(j.jsx)(B,{role:n}),Object(j.jsxs)(j.Fragment,{children:[void p()(".admin-nav").removeClass("active"),t]}),Object(j.jsx)(V,{})]})},q=function(e){var t=e.component,n=Object(u.a)(e,["component"]);return Object(j.jsx)(o.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return Object(j.jsx)(H,{children:Object(j.jsx)(t,Object(d.a)({},e))})}}))},W=function(e){var t=e.component,n=Object(u.a)(e,["component"]),s=I.getToken(),r=I.getUserRole();return s?Object(j.jsx)(o.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return Object(j.jsx)(Y,{role:r,children:Object(j.jsx)(t,Object(d.a)({},e))})}})):Object(j.jsx)(o.a,{to:"/login"})},z=n(13),J=n(12),K=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("main",{className:"main",children:[Object(j.jsx)("div",{className:"container-fluid p-0",children:Object(j.jsxs)("div",{className:"jumbotron w-100 text-center",children:[Object(j.jsx)("h1",{className:"display-4 text-capitalize text-success",children:"Academic Project Approval and Management System"}),Object(j.jsx)("p",{className:"text-black-50",children:" Approvals, Management and Tracking of fourth year Academic Projects"}),Object(j.jsxs)("div",{className:"cta",children:[Object(j.jsx)(l.b,{to:"/register",className:"cta-btn primary shadow",children:"Get Started"}),Object(j.jsx)(l.b,{to:"/projects",className:"cta-btn ",children:"Projects"})]})]})}),Object(j.jsx)("div",{className:"container my-2",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"row my-2",children:[Object(j.jsx)("div",{className:"col-12 text-center mb-1",children:Object(j.jsx)("h5",{className:"text-success",children:"Features"})}),Object(j.jsx)("div",{className:"col-md-3 mb-2",children:Object(j.jsxs)("div",{className:"card bg-light border-success h-100",children:[Object(j.jsxs)("div",{className:"card-header bg-success text-light d-flex flex-row justify-content-between align-items-center",children:[Object(j.jsx)("i",{className:"fa fa-clock-o fa-2x"}),Object(j.jsx)("h6",{children:"Timely Approval"})]}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("p",{className:"lead card-text",children:"Quick Approval of student projects"})})]})}),Object(j.jsx)("div",{className:"col-md-3 mb-2",children:Object(j.jsxs)("div",{className:"card bg-light border-success h-100",children:[Object(j.jsxs)("div",{className:"card-header bg-success text-light d-flex flex-row justify-content-between align-items-center",children:[Object(j.jsx)("i",{className:"fa fa-cogs fa-2x"}),Object(j.jsx)("h6",{children:"Project Management"})]}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("p",{className:"lead card-text",children:"Automation of Common Project Management tasks"})})]})}),Object(j.jsx)("div",{className:"col-md-3 mb-2",children:Object(j.jsxs)("div",{className:"card bg-light border-success h-100",children:[Object(j.jsxs)("div",{className:"card-header bg-success text-light d-flex flex-row justify-content-between align-items-center",children:[Object(j.jsx)("i",{className:"fa fa-calendar-check-o fa-2x"}),Object(j.jsx)("h6",{children:"Progress Tracking"})]}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("p",{className:"lead card-text",children:"Faster Project tracking and progress monitoring"})})]})}),Object(j.jsx)("div",{className:"col-md-3 mb-2",children:Object(j.jsxs)("div",{className:"card bg-light border-success h-100",children:[Object(j.jsxs)("div",{className:"card-header bg-success text-light d-flex flex-row justify-content-between align-items-center",children:[Object(j.jsx)("i",{className:"fa fa-envelope fa-2x"}),Object(j.jsx)("h6",{children:"Progress Tracking"})]}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("p",{className:"lead card-text",children:"Notifications and Reliable Communication"})})]})})]})})})]})}}]),n}(r.Component),Q=n(4),$=function(e){var t=e.alert,n=e.onClick;return Object(j.jsxs)("div",{className:"alert alert-".concat(t.type," alert-dismissible fade show"),children:[Object(j.jsx)("button",{type:"button",className:"close d-flex justify-content-center align-items-center","data-dismiss":"alert",onClick:function(){return n()},children:"\xd7"}),t.message]})},X=n(7),Z=function(e){var t=e.status;return"FINISHED"===t?Object(j.jsxs)("span",{children:[Object(j.jsx)("i",{className:"fa fa-check-circle-o text-success"})," Finished"]}):"IN_PROGRESS"===t?Object(j.jsxs)("span",{children:[Object(j.jsx)("i",{className:"fa fa-check-circle text-warning"})," In Progress"]}):"WAITING_APPROVAL"===t||"PENDING"===t?Object(j.jsxs)("span",{children:[Object(j.jsx)("i",{className:"fa fa-clock-o text-secondary"})," Not Approved"]}):"ACCEPTED"===t?Object(j.jsxs)("span",{children:[Object(j.jsx)("i",{className:"fa fa-clock text-success"})," Approved"]}):Object(j.jsxs)("span",{children:[Object(j.jsx)("i",{className:"fa fa-times-rectangle text-danger"})," Rejected"]})},ee=function(e){return"FINISHED"===e?"finished":"IN_PROGRESS"===e?"in-progress":"WAITING_APPROVAL"===e||"PENDING"===e?"waiting":"ACCEPTED"===e?"accepted":"rejected"},te=n(11),ne=function(e){var t,n,s,r=e.profileData,a=e.userRole;return Object(j.jsx)("div",{className:"card bg-transparent",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h4",{className:"card-title",children:null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.fullName}),Object(j.jsxs)("p",{className:"card-text",children:[Object(j.jsx)("i",{className:"fa fa-user-circle"}),Object(j.jsxs)("span",{className:"mx-1",children:[" ","".concat("STUDENT"===a?"Reg No":"Staff ID"),": ",(null===r||void 0===r?void 0:r.regNo)||(null===r||void 0===r?void 0:r.staffId)]})]}),Object(j.jsxs)("p",{className:"card-text",children:[Object(j.jsx)("i",{className:"fa fa-envelope"}),Object(j.jsxs)("span",{className:"mx-1",children:["Email: ",null===r||void 0===r||null===(n=r.user)||void 0===n?void 0:n.email]})]}),Object(j.jsxs)("p",{className:"card-text",children:[Object(j.jsx)("i",{className:"fa fa-calendar"}),Object(j.jsxs)("span",{className:"mx-1",children:["Joined: ",Object(te.default)(null===r||void 0===r||null===(s=r.user)||void 0===s?void 0:s.createdAt).toDateString()]})]})]})})},se=n(55),re=function(e){var t=e.children,n=e.active,s=e.setActive,r=e.id,a=e.title,c=e.size,i=void 0===c?"sm":c;return Object(j.jsxs)(se.a,{show:n,id:r,size:i,children:[Object(j.jsxs)(se.a.Header,{children:[Object(j.jsx)("h4",{className:"modal-title",children:a}),Object(j.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){return s(!1)},children:"\xd7"})]}),Object(j.jsx)(se.a.Body,{children:t})]})},ae=function(e){var t=e.text;return t?Object(j.jsx)("div",{className:"text-body",dangerouslySetInnerHTML:{__html:t}}):null};var ce=function(e){var t,n,s,a=e.project,c=Object(r.useState)(!1),i=Object(X.a)(c,2),o=i[0],d=i[1];return Object(j.jsxs)("div",{className:"card bg-transparent shadow h-100 custom-card ".concat(ee(null===a||void 0===a?void 0:a.status)),children:[Object(j.jsx)("div",{style:{position:"absolute",top:"-3px",right:"2px"},children:Object(j.jsx)(Z,{status:null===a||void 0===a?void 0:a.status})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h4",{className:"card-title",children:null===a||void 0===a?void 0:a.name}),Object(j.jsx)(ae,{text:null===a||void 0===a||null===(t=a.description)||void 0===t?void 0:t.substring(0,100)})]}),Object(j.jsxs)("div",{className:"card-footer",children:[Object(j.jsxs)("div",{className:"card-text pull-left",children:[Object(j.jsxs)("button",{className:"btn btn-sm",onClick:function(){return d(!0)},children:[" ",Object(j.jsx)("i",{className:"fa fa-user"})]}),Object(j.jsx)("span",{className:"mx-1",children:null===a||void 0===a||null===(n=a.student)||void 0===n||null===(s=n.user)||void 0===s?void 0:s.fullName}),Object(j.jsx)(re,{title:"User Profile",active:o,setActive:d,id:a._id,children:Object(j.jsx)(ne,{profileData:null===a||void 0===a?void 0:a.student,userRole:"STUDENT"})})]}),Object(j.jsx)("div",{children:Object(j.jsx)(l.b,{to:"/projects/".concat(null===a||void 0===a?void 0:a._id),className:"pull-right btn btn-outline-primary btn-sm",children:Object(j.jsx)("i",{className:"fa fa-arrow-circle-o-right",children:" View "})})})]})]})},ie=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?v("body").prepend("<div class='loading'><div class='loader'>Loading<div></div>"):v(".loading").remove()},le=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={allProjects:[],projects:[],alert:{},hasAlert:!1,categories:["WEB_BASED","ANDROID","DESKTOP","NETWORKING","SECURITY","OTHER"],statuses:["PENDING","WAITING_APPROVAL","IN_PROGRESS","FINISHED","REJECTED","ACCEPTED"]},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.filterProjectByStatus=s.filterProjectByStatus.bind(Object(Q.a)(s)),s.filterProjectByCategory=s.filterProjectByCategory.bind(Object(Q.a)(s)),s.removeFilter=s.removeFilter.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"filterProjectByStatus",value:function(e){this.setState({projects:this.state.allProjects.filter((function(t){return t.status===e}))})}},{key:"filterProjectByCategory",value:function(e){this.setState({projects:this.state.allProjects.filter((function(t){return t.category===e}))})}},{key:"removeFilter",value:function(){this.setState({projects:this.state.allProjects})}},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie(!0),t=null,"STUDENT"!==I.getUserRole()){e.next=8;break}return e.next=5,F.getAllByStatus("FINISHED");case 5:t=e.sent,e.next=11;break;case 8:return e.next=10,F.getAll();case 10:t=e.sent;case 11:t.error?this.setAlert(t.error):this.setState({allProjects:t.data.data,projects:t.data.data}),ie(!1);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.statuses,s=t.categories,r=t.projects,a=t.alert,c=t.hasAlert;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsxs)("div",{className:"container-fluid p-1",children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 text-center mb-2",children:Object(j.jsx)("h3",{children:"Projects"})}),Object(j.jsx)("div",{className:"col-md-12 my-2 ",children:Object(j.jsx)("div",{className:"card bg-transparent shadow",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("div",{className:"pull-left",children:Object(j.jsxs)("div",{className:"d-flex",children:["EVALUATOR"===I.getUserRole()?Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"status",className:"text-body",children:"Status"}),Object(j.jsx)("select",{name:"status",id:"status",className:"form-control",onChange:function(t){return e.filterProjectByStatus(t.target.value)},children:n.map((function(e,t){return Object(j.jsx)("option",{value:e,children:e},t)}))})]}):Object(j.jsx)("div",{}),Object(j.jsxs)("div",{className:"mx-1",children:[Object(j.jsx)("label",{htmlFor:"category",className:"text-body",children:"Category"}),Object(j.jsx)("select",{name:"category",id:"category",className:"form-control",onChange:function(t){return e.filterProjectByCategory(t.target.value)},children:s.map((function(e,t){return Object(j.jsx)("option",{value:e,children:e},t)}))})]}),Object(j.jsxs)("div",{className:"mx-1",children:[Object(j.jsx)("label",{htmlFor:"removeFilter"}),Object(j.jsx)("input",{type:"button",className:"form-control",onClick:this.removeFilter,value:"Remove Filter"})]})]})}),Object(j.jsx)("div",{className:"pull-right",children:"EVALUATOR"===I.getUserRole()&&Object(j.jsx)(l.b,{to:"/approve-projects",className:"btn btn-primary mx-2",children:"Approve Projects"})})]})})}),Object(j.jsx)("div",{className:"col-md-12",children:c&&Object(j.jsx)($,{alert:a,onClick:this.removeAlert})})]}),Object(j.jsx)("div",{className:"row",children:r&&r.map((function(e){return Object(j.jsx)("div",{className:"col-sm-6 col-md-4 mb-2",children:Object(j.jsx)(ce,{project:e})},e._id)}))})]})})}}]),n}(r.Component),oe=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/staff");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/staff/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/staff/register",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/staff/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getProjects",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/staff/".concat(t,"/projects"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFiles",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/staff/".concat(t,"/files"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getComments",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/staff/".concat(t,"/comments"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/staff/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/staff/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),de=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/comments");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/comments/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/comments",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllByType",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/comments/type/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/comments/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/comments/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),ue=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/users");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/users/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOneByEmail",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/users/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/users",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/users/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getProjects",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/users/".concat(t,"/projects"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFiles",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/users/".concat(t,"/files"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getComments",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/users/".concat(t,"/comments"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/users/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/users/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}());window.$=window.jQuery=window.jquery=p.a;var je=n(105),be=n.n(je),he=(n(156),n(157),n(158),n(159),n(160),n(87),function(e){var t=e.text,n=void 0===t?"":t,s=e.height,r=e.handleChangeFun;return Object(j.jsx)(be.a,{value:n,options:{height:s||120,dialogsInBody:!0,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link"]]]},onChange:function(e){return r(e)}})}),me=function(e){var t=e.projectId,n=Object(r.useState)({}),s=Object(X.a)(n,2),a=s[0],c=s[1],i=Object(r.useState)(!1),l=Object(X.a)(i,2),o=l[0],d=l[1],u=Object(r.useState)(null),b=Object(X.a)(u,2),h=b[0],m=b[1],v=Object(r.useState)(null),p=Object(X.a)(v,2),O=p[0],x=p[1];Object(r.useEffect)((function(){ue.getOneByEmail(I.getUserEmail()).then((function(e){var t;x(null===(t=e.data)||void 0===t?void 0:t.data)})).catch((function(e){c(e)}))}),[]);var N=function(){var e=Object(g.a)(f.a.mark((function e(){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),n={projectId:t,message:h,userId:null===O||void 0===O?void 0:O._id},e.next=4,de.save(n);case 4:(s=e.sent).error?(c(s.error),d(!0)):(c({title:"Operation successful",message:s.data.message,type:"success"}),d(!0)),ie(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12",children:o&&Object(j.jsx)($,{alert:a,onClick:function(){c(null),d(!1)}})}),Object(j.jsxs)("div",{className:"col-12 my-2",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"message",className:"form-label",children:"Message"}),Object(j.jsx)(he,{handleChangeFun:m})]}),Object(j.jsx)("button",{className:"btn btn-primary my-1",onClick:N,children:"Post Comment"})]})]})})},ve=n(32),pe=function(e){var t,n,s=e.project,a=e.supervisors,c=e.changeStatus,i=e.setSupervisor,l=Object(r.useState)(null),o=Object(X.a)(l,2),d=o[0],u=o[1],b=Object(r.useState)(!1),h=Object(X.a)(b,2),m=h[0],v=h[1];return(null===s||void 0===s||null===(t=s.evaluator)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email)===I.getUserEmail()?Object(j.jsxs)(j.Fragment,{children:[["WAITING_APPROVAL","REJECTED"].includes(null===s||void 0===s?void 0:s.status)&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"btn btn-success mx-1",onClick:function(){return c(s,"ACCEPTED")},children:"Accept"}),Object(j.jsx)("button",{className:"btn btn-danger",onClick:function(){return c(s,"REJECTED")},children:"Reject"})]}),Object(j.jsx)("button",{className:"btn btn-outline-secondary mx-1",onClick:function(){return v(!0)},children:"Comment"}),Object(j.jsx)(re,{id:"new-comment",title:"Project: ".concat(null===s||void 0===s?void 0:s.name),active:m,setActive:v,size:"md",children:Object(j.jsx)(me,{projectId:null===s||void 0===s?void 0:s._id})}),["ACCEPTED","IN_PROGRESS"].includes(null===s||void 0===s?void 0:s.status)&&Object(j.jsxs)("div",{className:"input-group my-3",children:[Object(j.jsx)("div",{className:"input-group-prepend",children:Object(j.jsx)("span",{className:"input-group-text",children:"Supervisors"})}),Object(j.jsx)("select",{name:"supervisor",id:"supervisor",className:"form-control form-control-sm",onChange:function(e){return u(e.target.value)},children:a&&a.map((function(e){var t,n;return Object(j.jsxs)("option",{value:null===e||void 0===e?void 0:e._id,children:[(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.firstName)||"--"," ",(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.lastName)||"--"]},null===e||void 0===e?void 0:e._id)}))}),Object(j.jsx)("div",{className:"input-group-append",children:Object(j.jsx)("span",{style:{cursor:"pointer",backgroundColor:"green",color:"white"},className:"input-group-text bg-success text-light",onClick:function(){return i(s,d)},children:"Assign"})})]})]}):null},Oe=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={supervisor:[],projectId:s.props.match.params.projectId,project:{},relatedProjects:[],alert:{},hasAlert:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.getSupervisors=s.getSupervisors(Object(Q.a)(s)),s.changeStatus=s.changeStatus.bind(Object(Q.a)(s)),s.setSupervisor=s.setSupervisor.bind(Object(Q.a)(s)),s.getProject=s.getProject.bind(Object(Q.a)(s)),s.getProjectsByCategory=s.getProjectsByCategory.bind(Object(Q.a)(s)),s.downloadFiles=s.downloadFiles.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"getSupervisors",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.getAll();case 2:if(!(t=e.sent).error){e.next=7;break}return e.abrupt("return",null);case 7:this.setState({supervisors:null===(n=t.data.data)||void 0===n?void 0:n.filter((function(e){var t;return"SUPERVISOR"===(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.role)}))});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeStatus",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,F.setStatus(null===t||void 0===t?void 0:t._id,n);case 3:(s=e.sent).error?this.setAlert(s.error):(this.setState({project:s.data.data}),this.setAlert({message:s.data.message,type:"success"})),ie(!1);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setSupervisor",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){var s,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===t||void 0===t||null===(s=t.evaluator)||void 0===s||null===(r=s.user)||void 0===r?void 0:r.email)!==I.getUserEmail()){e.next=7;break}return e.next=3,F.setSupervisor(null===t||void 0===t?void 0:t._id,n);case 3:(a=e.sent).error?this.setAlert(a.error):(this.setState({project:a.data.data}),this.setAlert({message:a.data.message,type:"success"})),e.next=8;break;case 7:this.setAlert({title:"Permission Denied",message:"Sorry, but only the project evaluator can a assign a supervisor to this project",type:"danger"});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getProjectsByCategory",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){var s,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getAllByCategory(t);case 2:a=e.sent,this.setState({relatedProjects:null===(s=a.data)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.filter((function(e){return e._id!==n}))});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getProject",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.projectId,e.next=3,F.getOneById(t);case 3:if(!(n=e.sent).error){e.next=8;break}this.setAlert(n.error),e.next=12;break;case 8:return s=n.data.data,this.setState({project:s}),e.next=12,this.getProjectsByCategory(s.category,s._id);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadFiles",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.project.projectFiles)){e.next=5;break}t.forEach((function(e){Object(ve.saveAs)(e.fileURL,e.name)})),e.next=6;break;case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getProject();case 3:ie(!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,s,r,a,c,i=this,o=this.state,d=o.project,u=o.hasAlert,b=o.alert,h=o.supervisors,m=o.relatedProjects;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container-fluid p-1",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 text-center mb-2",children:Object(j.jsx)("h3",{children:null===d||void 0===d?void 0:d.name})}),u&&Object(j.jsx)($,{alert:b,onClick:this.removeAlert}),Object(j.jsx)("div",{className:"col-md-8",children:Object(j.jsxs)("div",{className:"card bg-transparent border-0",children:[Object(j.jsx)("div",{className:"card-header bg-transparent my-2",children:Object(j.jsxs)("div",{className:"owner shadow p-2",children:[Object(j.jsxs)("h4",{className:"card-title text-primary",children:["By ",null===d||void 0===d||null===(e=d.student)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===d||void 0===d||null===(n=d.student)||void 0===n||null===(s=n.user)||void 0===s?void 0:s.lastName,Object(j.jsxs)("span",{className:"text-muted",children:["(",null===d||void 0===d||null===(r=d.student)||void 0===r?void 0:r.regNo,")"]})]}),Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsxs)("span",{className:"text-muted",children:[Object(j.jsx)("i",{className:"fa fa-envelope"}),Object(j.jsxs)("span",{className:"mx-1",children:[null===d||void 0===d||null===(a=d.student)||void 0===a||null===(c=a.user)||void 0===c?void 0:c.email," "]})]}),Object(j.jsx)("span",{className:"text-muted",children:Object(te.default)(null===d||void 0===d?void 0:d.startDate).getFullYear()||"--"})]})]})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("div",{className:"card-text mb-1",children:[Object(j.jsx)("h6",{className:"card-title text-success",children:"Project Title"}),Object(j.jsx)("p",{className:"lead",children:null===d||void 0===d?void 0:d.name})]}),Object(j.jsxs)("article",{className:"card-text mb-1",children:[Object(j.jsx)("h6",{className:"card-title text-success",children:"Project Description"}),Object(j.jsx)(ae,{text:null===d||void 0===d?void 0:d.description})]}),Object(j.jsxs)("div",{className:"card-text mb-1",children:[Object(j.jsx)("h6",{className:"card-title text-success",children:"Programming languages"}),Object(j.jsx)("p",{className:"lead",children:null===d||void 0===d?void 0:d.languages})]}),Object(j.jsxs)("div",{className:"card-text mb-1",children:[Object(j.jsx)("h6",{className:"card-title text-success",children:"Project Category"}),Object(j.jsx)("p",{className:"lead",children:null===d||void 0===d?void 0:d.category})]})]}),Object(j.jsxs)("div",{className:"card-footer",children:[Object(j.jsxs)("button",{className:"btn btn-success mx-2",onClick:function(){return i.downloadFiles()},children:[Object(j.jsx)("i",{className:"fa fa-download text-light"})," Download"]}),Object(j.jsx)(l.b,{className:"btn btn-secondary mx-1",to:"/projects/".concat(null===d||void 0===d?void 0:d._id,"/report"),children:"View Report"}),Object(j.jsx)(pe,{project:d,supervisors:h,changeStatus:this.changeStatus,setSupervisor:this.setSupervisor})]})]})}),Object(j.jsx)("div",{className:"col-md-4",children:Object(j.jsxs)("div",{className:"well bg-light p-2",children:[Object(j.jsx)("h4",{className:"text-primary",children:"Related Projects"}),Object(j.jsx)("ul",{className:"list-unstyled px-2",children:m.map((function(e){return Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{to:"/projects/".concat(null===e||void 0===e?void 0:e._id),target:"_parent",children:e.name})},null===e||void 0===e?void 0:e._id)}))})]})})]})})})}}]),n}(r.Component),xe=n(15);var fe=function(e){for(var t=(new Date).getTime(),n=t;n<t+e;)n=(new Date).getTime()},ge=function(e){var t=e.handleChange,n=e.loginFun,s=e.setPwdFun;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),Object(j.jsx)("input",{type:"email",className:"form-control mb-1",id:"email",name:"email",placeholder:"Enter your Email",onChange:function(e){return t(e)}})]}),Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"Enter Password",onChange:function(e){return t(e)}})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{className:"btn btn-success btn-sm",onClick:function(){return n()},children:"Login"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{className:"card-link btn btn-sm btn-outline-secondary",onClick:function(){return s()},children:"Forgot Password?"})})]})]})},Ne=function(e){var t=e.handleChange,n=e.resetPasswordFun,s=e.setPwdFun;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"mb-3",children:[Object(j.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),Object(j.jsx)("input",{type:"email",className:"form-control mb-1",id:"email",name:"email",placeholder:"Enter your Email",onChange:function(e){return t(e)}})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{className:"btn btn-success btn-sm",onClick:function(){return n()},children:"Reset Password"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{className:"card-link btn btn-sm btn-outline-secondary",onClick:function(){return s()},children:"Login"})})]})]})},ye=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={email:"",password:"",alert:{},hasAlert:!1,pwd:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.login=s.login.bind(Object(Q.a)(s)),s.handleChange=s.handleChange.bind(Object(Q.a)(s)),s.setPwd=s.setPwd.bind(Object(Q.a)(s)),s.resetPassword=s.resetPassword.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState(Object(d.a)(Object(d.a)({},this.state),{},Object(xe.a)({},e.target.name,t)))}},{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"setPwd",value:function(){this.setState({pwd:!this.state.pwd})}},{key:"login",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.email,s=t.password,r={email:n,password:s},n&&s){e.next=6;break}this.setAlert({message:"Email and Password are required",type:"danger"}),e.next=12;break;case 6:return ie(!0),e.next=9,I.login(r);case 9:(a=e.sent).error?this.setAlert(a.error):(I.setToken(a.data.data),fe(2e3),this.props.history.push("/dashboard")),ie(!1);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.email){e.next=5;break}return e.abrupt("return",this.setAlert({message:"Email is required",type:"danger"}));case 5:return ie(!0),e.next=8,I.pwd(t).then((function(e){var t;e.error?n.setAlert(e.error):n.setAlert({message:null===(t=e.data)||void 0===t?void 0:t.message,type:"success"})}));case 8:ie(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.alert,n=e.hasAlert,s=e.pwd;return I.getToken()?Object(j.jsx)(o.a,{to:"/dashboard"}):Object(j.jsx)("main",{className:"main",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row mt-5",children:Object(j.jsx)("div",{className:"col-md-6 m-auto",children:Object(j.jsxs)("div",{className:"card bg-light border-success",children:[Object(j.jsx)("div",{className:"card-header bg-success text-light d-flex flex-row justify-content-center align-items-center",children:Object(j.jsx)("h6",{className:"text align-content-center",children:s?"Reset Password":"Member Login"})}),Object(j.jsxs)("div",{className:"card-body",children:[n&&Object(j.jsx)($,{alert:t,onClick:this.removeAlert}),s?Object(j.jsx)(Ne,{handleChange:this.handleChange,resetPasswordFun:this.resetPassword,setPwdFun:this.setPwd}):Object(j.jsx)(ge,{handleChange:this.handleChange,loginFun:this.login,setPwdFun:this.setPwd}),Object(j.jsx)("hr",{className:""}),Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("p",{className:"",children:["Not yet a member?",Object(j.jsx)(l.b,{to:"/register",children:"Register Here"})]})})]})]})})})})})}}]),n}(r.Component),we=function(e){var t=e.roles,n=e.changeHandler,s=e.disabled;return t||(t=["STUDENT"]),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"role",className:"form-label",children:"Role"}),Object(j.jsx)("select",{className:"form-control",id:"role",name:"role",onChange:function(e){return n(e)},required:!0,disabled:s,defaultValue:"STUDENT",children:t.map((function(e,t){return Object(j.jsx)("option",{value:e,children:e},t)}))})]})},ke=function(e){var t,n,s,r=e.changeHandler,a=e.names,c=e.email,i=e.role,l=e.pwd,o=e.disabled,d=e.regNo,u=e.staffId,b=e.roles,h=e.data;return Object(j.jsxs)(j.Fragment,{children:[a&&Object(j.jsxs)("div",{className:"row mb-2",children:[Object(j.jsxs)("div",{className:"col-md-6",children:[Object(j.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"First Name"}),Object(j.jsx)("input",{type:"text",className:"form-control mb-1",id:"firstName",name:"firstName",placeholder:"Enter your First Name ",required:!0,disabled:o,defaultValue:(null===h||void 0===h||null===(t=h.user)||void 0===t?void 0:t.firstName)||"",onChange:function(e){return r(e)}})]}),Object(j.jsxs)("div",{className:"col-md-6",children:[Object(j.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last Name"}),Object(j.jsx)("input",{type:"text",className:"form-control mb-1",id:"lastName",name:"lastName",placeholder:"Enter your Last Name",required:!0,disabled:o,defaultValue:(null===h||void 0===h||null===(n=h.user)||void 0===n?void 0:n.lastName)||"",onChange:function(e){return r(e)}})]})]}),c&&Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",placeholder:"Enter Email address",required:!0,disabled:o,defaultValue:(null===h||void 0===h||null===(s=h.user)||void 0===s?void 0:s.email)||"",onChange:function(e){return r(e)}})]}),d&&Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"regNo",className:"form-label",children:"Registration Number"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"regNo",name:"regNo",placeholder:"Enter Registration Number",required:!0,disabled:o,defaultValue:(null===h||void 0===h?void 0:h.regNo)||"",onChange:function(e){return r(e)}})]}),u&&Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"staffId",className:"form-label",children:"Staff ID"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"staffId",name:"staffId",placeholder:"Enter StaffId",required:!0,disabled:o,defaultValue:(null===h||void 0===h?void 0:h.staffId)||"",onChange:function(e){return r(e)}})]}),l&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password",required:!0,onChange:function(e){return r(e)}})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm Password",required:!0,onChange:function(e){return r(e)}})]})]}),i&&Object(j.jsx)(we,{roles:b,changeHandler:r,disabled:o})]})},Ae=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/students");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/students/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/students/register",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/students/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getProjects",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/students/".concat(t,"/projects"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFiles",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/students/".concat(t,"/files"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getComments",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/students/".concat(t,"/comments"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/students/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/students/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),Se=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"STUDENT",roles:s.props.roles||["STUDENT"],regNo:"",staffId:"",alert:{},hasAlert:!1},s.handleChange=s.handleChange.bind(Object(Q.a)(s)),s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.register=s.register.bind(Object(Q.a)(s)),s.doRegister=s.doRegister.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState(Object(d.a)(Object(d.a)({},this.state),{},Object(xe.a)({},e.target.name,t)))}},{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"register",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a,c,i,l,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie(!0),t=this.state,n=t.firstName,s=t.lastName,r=t.email,a=t.role,c=t.regNo,i=t.staffId,l=t.password,t.confirmPassword===l){e.next=8;break}return this.setAlert({type:"danger",message:"Passwords don't match.",title:"Error"}),v("#btnRegister").removeClass("loading"),e.abrupt("return",!1);case 8:return this.removeAlert(),o={firstName:n,lastName:s,email:r,password:l,role:a,regNo:c,staffId:i,verificationURL:"http://localhost:3000/verify/"},e.next=12,this.doRegister(a,o);case 12:ie(!1);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doRegister",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null,"STUDENT"!==t){e.next=7;break}return e.next=4,Ae.register(n);case 4:s=e.sent,e.next=16;break;case 7:if("EVALUATOR"!==t&&"SUPERVISOR"!==t){e.next=13;break}return e.next=10,oe.register(n);case 10:s=e.sent,e.next=16;break;case 13:return e.next=15,I.register(n);case 15:s=e.sent;case 16:s.error?this.setAlert(s.error):this.setAlert({title:"Operation successful",message:s.data.message,type:"success"});case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.alert,n=e.hasAlert,s=e.role,r=e.roles;return Object(j.jsx)("main",{className:this.props.class||"main",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row pt-2",children:Object(j.jsx)("div",{className:"col-md-8 col-lg-6 m-auto",children:Object(j.jsxs)("div",{className:"card bg-light border-success",children:[Object(j.jsx)("div",{className:" card-header d-flex flex-row justify-content-center align-items-center",children:Object(j.jsx)("h6",{className:"text align-content-center",children:"New Account Registration"})}),Object(j.jsxs)("div",{className:"card-body",children:[n&&Object(j.jsx)($,{alert:t,onClick:this.removeAlert}),Object(j.jsx)(ke,{changeHandler:this.handleChange,names:!0,email:!0,pwd:!0,disabled:!1,regNo:!1,staffId:!1,role:!0,roles:r}),s&&Object(j.jsxs)("div",{className:"form-group mb-2",children:[Object(j.jsx)("label",{htmlFor:"".concat("STUDENT"===s||""===s?"regNo":"staffId"),className:"form-label",children:"".concat("STUDENT"===s?"Registration No":"Staff ID")}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"".concat("STUDENT"===s?"regNo":"staffId"),name:"".concat("STUDENT"===s?"regNo":"staffId"),placeholder:"Enter ".concat("STUDENT"===s?"Registration No":"Staff ID"),required:!0,onChange:this.handleChange})]}),Object(j.jsxs)("div",{className:"row mt-1",children:[Object(j.jsx)("div",{className:"col-xs-1-12",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-success btn-lg",id:"btnRegister",name:"btnRegister",onClick:this.register,children:"Register"})}),!this.props.class&&Object(j.jsx)("div",{className:"col-12 my-1",children:Object(j.jsxs)("p",{className:"",children:["Already a member?",Object(j.jsx)(l.b,{to:"/login",children:"Login Here"})]})})]})]})]})})})})})}}]),n}(r.Component),Pe=function(){return Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("div",{className:"welcome",children:[Object(j.jsxs)("div",{className:"message float-left",children:[Object(j.jsx)("h3",{className:"text-dark",children:"Hi, Welcome back,"}),Object(j.jsx)("p",{className:"lead",children:"Your analytics dashboard"})]}),Object(j.jsx)("div",{className:"clearfix"})]})})})},De=function(e){var t,n,s,r,a,c,i,o=e.student,d=e.projects,u=null===o||void 0===o||null===(t=o.projects)||void 0===t?void 0:t.filter((function(e){return"IN_PROGRESS"===e.status}))[0],b=function(){var e,t,n=0;return null===u||void 0===u||null===(e=u.milestones)||void 0===e||null===(t=e.tasks)||void 0===t||t.forEach((function(e){"FINISHED"!==e.status&&(n+=1)})),n},h=function(){var e=(null===u||void 0===u?void 0:u.projectDays)-(null===u||void 0===u?void 0:u.daysLeft);return 100*Math.ceil(e/(null===u||void 0===u?void 0:u.projectDays))};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("div",{className:"updates mb-2",children:Object(j.jsx)("div",{className:"card",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title",children:"Quick Updates"}),Object(j.jsx)("div",{className:"card-text",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-6 col-md-3 ",children:Object(j.jsxs)(l.b,{to:"/projects",className:"update",children:[Object(j.jsx)("div",{className:"icon d-flex justify-content-center align-items-center",children:Object(j.jsx)("img",{src:"",alt:"",width:"35",height:"35"})}),Object(j.jsx)("h6",{className:"title",children:"All Projects"}),Object(j.jsx)("p",{className:"text",children:(null===d||void 0===d?void 0:d.length)||0})]})}),Object(j.jsx)("div",{className:"col-6 col-md-3 ",children:Object(j.jsxs)(l.b,{to:"/my-projects",className:"update",children:[Object(j.jsx)("div",{className:"icon d-flex justify-content-center align-items-center",children:Object(j.jsx)("img",{src:"",alt:"",width:"35",height:"35"})}),Object(j.jsx)("h6",{className:"title",children:"My Projects"}),Object(j.jsx)("p",{className:"text",children:(null===o||void 0===o||null===(n=o.projects)||void 0===n?void 0:n.length)||0})]})}),Object(j.jsx)("div",{className:"col-6 col-md-3  ",children:Object(j.jsxs)(l.b,{to:"/project-milestones/".concat(null===u||void 0===u?void 0:u._id),className:"update",children:[Object(j.jsx)("div",{className:"icon d-flex justify-content-center align-items-center",children:Object(j.jsx)("img",{src:"",alt:"",width:"35",height:"35"})}),Object(j.jsx)("h6",{className:"title",children:"Milestones"}),Object(j.jsx)("p",{className:"text",children:(null===u||void 0===u||null===(s=u.milestones)||void 0===s?void 0:s.length)||0})]})}),Object(j.jsx)("div",{className:"col-6 col-md-3 ",children:Object(j.jsxs)("div",{className:"update",children:[Object(j.jsx)("div",{className:"icon d-flex justify-content-center align-items-center",children:Object(j.jsx)("img",{src:"",alt:"",width:"35",height:"35"})}),Object(j.jsx)("h6",{className:"title",children:"Project Files"}),Object(j.jsx)("p",{className:"text",children:(null===u||void 0===u||null===(r=u.files)||void 0===r?void 0:r.length)||0})]})})]})})]})})})})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12 my-2",children:Object(j.jsxs)("div",{className:"quick-reports",children:[Object(j.jsxs)("div",{className:"time-spend",children:[Object(j.jsx)("h6",{className:"title",children:"Time spend on project"}),Object(j.jsx)("div",{className:"progress",style:{height:"30px"},children:Object(j.jsxs)("div",{className:"progress-bar progress-bar-striped",style:{width:"".concat(h()||0,"%")},children:["$",h()||0,"%"]})}),Object(j.jsx)("h6",{className:"title",children:"Time Available"}),Object(j.jsxs)("p",{className:"lead",children:[null===u||void 0===u?void 0:u.daysLeft," Days"]})]}),Object(j.jsxs)("div",{className:"pending-tasks",children:[Object(j.jsx)("h6",{className:"title",children:"Pending Tasks"}),Object(j.jsx)("p",{className:"lead",children:b||0})]}),Object(j.jsxs)("div",{className:"finished-tasks",children:[Object(j.jsx)("h6",{className:"title",children:"Finished Tasks"}),Object(j.jsx)("p",{className:"lead",children:function(){var e,t=0;return null===u||void 0===u||null===(e=u.milestones)||void 0===e||e.forEach((function(e){var n;t+=null===e||void 0===e||null===(n=e.tasks)||void 0===n?void 0:n.length})),t}-b||0})]}),Object(j.jsxs)("div",{className:"finished-milestones",children:[Object(j.jsx)("h6",{className:"title",children:"Finished Milestones"}),Object(j.jsx)("p",{className:"lead",children:(null===u||void 0===u||null===(a=u.milestones)||void 0===a?void 0:a.length)-function(){var e,t=0;return null===u||void 0===u||null===(e=u.milestones)||void 0===e||e.forEach((function(e){"FINISHED"!==e.status&&(t+=1)})),t}||0})]}),Object(j.jsx)("div",{className:"project-report",children:Object(j.jsxs)("div",{className:"card border-info h-100",children:[Object(j.jsx)("div",{className:"card-header bg-info",children:Object(j.jsx)("h6",{children:"Project Report"})}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("ul",{className:"list-unstyled",children:[Object(j.jsxs)("li",{className:"",children:["Start Date:",Object(j.jsx)("span",{className:"pull-right",children:Object(te.shortDate)(null===u||void 0===u?void 0:u.startDate)||"--"})]}),Object(j.jsxs)("li",{className:"",children:["End Date:",Object(j.jsx)("span",{className:"pull-right",children:Object(te.shortDate)(null===u||void 0===u?void 0:u.endDate)||"--"})]}),Object(j.jsxs)("li",{className:"",children:["Project Status:",Object(j.jsx)("span",{className:"pull-right",children:(null===u||void 0===u?void 0:u.status)||"--"})]}),Object(j.jsxs)("li",{className:"",children:["All Milestones:",Object(j.jsx)("span",{className:"pull-right",children:(null===u||void 0===u||null===(c=u.milestones)||void 0===c?void 0:c.length)||0})]})]})})]})})]})})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("h5",{children:"Recent Tasks"})}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Task ID"}),Object(j.jsx)("th",{children:"Task Name"}),Object(j.jsx)("th",{children:"Start Date"}),Object(j.jsx)("th",{children:"End Date"}),Object(j.jsx)("th",{children:"Status"})]})}),Object(j.jsx)("tbody",{children:null===u||void 0===u||null===(i=u.milestones)||void 0===i?void 0:i.forEach((function(e){var t;return null===(t=e.task)||void 0===t?void 0:t.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:null===e||void 0===e?void 0:e._id}),Object(j.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===e||void 0===e?void 0:e.startDate)}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===e||void 0===e?void 0:e.startDate)}),Object(j.jsx)("td",{children:null===e||void 0===e?void 0:e.status})]})}))}))})]})})]})})})]})},Ce=function(e){var t=e.update,n=e.className,s=void 0===n?"col-sm-6 col-md-3":n;return Object(j.jsx)("div",{className:s,children:Object(j.jsxs)(l.b,{to:null===t||void 0===t?void 0:t.link,className:"update custom-card border-top shadow",children:[Object(j.jsx)("div",{className:"icon d-flex justify-content-center align-items-center",children:Object(j.jsx)("i",{className:"fa fa-2x fa-".concat(null===t||void 0===t?void 0:t.icon)})}),Object(j.jsx)("h4",{className:"title",children:null===t||void 0===t?void 0:t.title}),Object(j.jsx)("p",{className:"text",children:(null===t||void 0===t?void 0:t.text)||0})]})})},Ee=function(e){return{pendingProjects:null===e||void 0===e?void 0:e.filter((function(e){return"WAITING_APPROVAL"===e.status})),completeProjects:null===e||void 0===e?void 0:e.filter((function(e){return"FINISHED"===e.status})),overdueProjects:null===e||void 0===e?void 0:e.filter((function(e){return"IN_PROGRESS"===e.status&&Object(te.default)(e.endDate).toDateString()>(new Date).toDateString()})),inProgress:null===e||void 0===e?void 0:e.filter((function(e){return"IN_PROGRESS"===e.status}))}},Te=function(e){var t=e.projects,n=Ee(t),s=n.pendingProjects,r=n.completeProjects,a=n.inProgress,c=n.overdueProjects;return Object(j.jsxs)("div",{className:"card border-info h-100",children:[Object(j.jsx)("div",{className:"card-header bg-info",children:Object(j.jsx)("h6",{children:"Quick Updates"})}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("ul",{className:"list-unstyled",children:[Object(j.jsxs)("li",{className:"",children:["Complete Projects:",Object(j.jsx)("span",{className:"pull-right",children:null===r||void 0===r?void 0:r.length})]}),Object(j.jsxs)("li",{className:"",children:["In Progress:",Object(j.jsx)("span",{className:"pull-right",children:null===a||void 0===a?void 0:a.length})]}),Object(j.jsxs)("li",{className:"",children:["Over due:",Object(j.jsx)("span",{className:"pull-right",children:null===c||void 0===c?void 0:c.length})]}),Object(j.jsxs)("li",{className:"",children:["Pending:",Object(j.jsx)("span",{className:"pull-right",children:null===s||void 0===s?void 0:s.length})]})]})})]})},Ie=Ee,Fe=function(e){var t=e.pendingProjects,n=e.approveProjectFun;return Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Project ID"}),Object(j.jsx)("th",{children:"Project Name"}),Object(j.jsx)("th",{children:"Category"}),Object(j.jsx)("th",{children:"Student"}),Object(j.jsx)("th",{children:"Date Created"}),Object(j.jsx)("th",{children:"Actions"})]})}),Object(j.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){var t,s,r,a,c,i;return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:null===e||void 0===e?void 0:e._id}),Object(j.jsxs)("td",{children:[Object(j.jsx)("h6",{children:null===e||void 0===e?void 0:e.name}),Object(j.jsx)("span",{className:"small text-muted",children:(null===e||void 0===e||null===(t=e.description)||void 0===t?void 0:t.substring(0,70))+"..."})]}),Object(j.jsx)("td",{children:null===e||void 0===e?void 0:e.category}),Object(j.jsxs)("td",{children:[(null===e||void 0===e||null===(s=e.student)||void 0===s||null===(r=s.user)||void 0===r?void 0:r.firstName)+" "+(null===e||void 0===e||null===(a=e.student)||void 0===a||null===(c=a.user)||void 0===c?void 0:c.lastName),Object(j.jsx)("h6",{className:"small",children:null===e||void 0===e||null===(i=e.student)||void 0===i?void 0:i.regNo})]}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===e||void 0===e?void 0:e.createdAt)}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsxs)("ul",{className:"list-inline",children:[Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)("button",{className:"btn btn-sm btn-primary",id:null===e||void 0===e?void 0:e._id,onClick:function(e){return n(e.target.id)},children:"Approve"})}),Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)(l.b,{to:"/projects/".concat(null===e||void 0===e?void 0:e._id),className:"card-link btn btn-sm btn-outline-secondary",children:"View"})})]})})]},null===e||void 0===e?void 0:e._id)}))})]})},Re=function(e){var t=e.projects,n=e.users,s=e.students,a=e.staff,c=Ie(t).pendingProjects,i=Object(r.useState)({}),l=Object(X.a)(i,2),o=l[0],d=l[1],u=Object(r.useState)(!1),b=Object(X.a)(u,2),h=b[0],m=b[1],v=[{title:"All Projects",text:(null===t||void 0===t?void 0:t.length)||0,link:"/projects"},{title:"All Users",text:(null===n||void 0===n?void 0:n.length)||0,link:"/users"},{title:"Students",text:(null===s||void 0===s?void 0:s.length)||0,link:"/students"},{title:"Staff",text:(null===a||void 0===a?void 0:a.length)||0,link:"/staff"}],p=function(){var e=Object(g.a)(f.a.mark((function e(n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.setStatus(n,"ACCEPTED");case 2:(s=e.sent).error?d(s.error):(d({message:s.data.message,type:"success"}),m(!0),c=t.filter((function(e){return e._id!==n})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"row mb-2",children:[Object(j.jsx)("div",{className:"col-md-8 mb-2",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:v.map((function(e,t){return Object(j.jsx)(Ce,{update:e},t)}))})})}),Object(j.jsx)("div",{className:"col-md-4 mb-2",children:Object(j.jsx)("div",{className:"project-report",children:Object(j.jsx)(Te,{projects:t})})})]}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("h5",{children:"Pending Projects"})}),Object(j.jsxs)("div",{className:"card-body",children:[h&&Object(j.jsx)($,{alert:o,onClick:function(){d(null),m(!1)}}),c&&Object(j.jsx)(Fe,{pendingProjects:c,approveProjectFun:p})]})]})})})]})},Ue=function(e,t,n){return(e+t)/n*100},Me=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return"PENDING"===e.status})),n=null===e||void 0===e?void 0:e.filter((function(e){return"FINISHED"===e.status})),s=null===e||void 0===e?void 0:e.filter((function(e){return"IN_PROGRESS"===e.status}));return{milestones:e,pendingMilestones:t,completeMilestones:n,milestonesInProgress:s,milestonesProgressInPercentage:Ue(null===n||void 0===n?void 0:n.length,null===s||void 0===s?void 0:s.length,null===e||void 0===e?void 0:e.length)}},_e=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return"PENDING"===e.status})),n=null===e||void 0===e?void 0:e.filter((function(e){return"FINISHED"===e.status})),s=null===e||void 0===e?void 0:e.filter((function(e){return"IN_PROGRESS"===e.status}));return{tasks:e,pendingTasks:t,completeTasks:n,tasksInProgress:s,taskProgressInPercentage:Ue(null===n||void 0===n?void 0:n.length,null===s||void 0===s?void 0:s.length,null===e||void 0===e?void 0:e.length)}},Ge=n(27),Le=n(113),Be=function(e){var t=function(e){var t=[];return e.forEach((function(e){var n=[e._id,e.name,new Date(e.startDate),new Date(e.endDate),e.duration,e.progress,null];t.push(n)})),t}(e.tasks),n=[[{type:"string",label:"Task ID"},{type:"string",label:"Task Name"},{type:"date",label:"Start Date"},{type:"date",label:"End Date"},{type:"number",label:"Duration"},{type:"number",label:"Percent Complete"},{type:"string",label:"Dependencies"}]].concat(Object(Ge.a)(t));return Object(j.jsx)("div",{className:"card-text my-1",children:Object(j.jsx)(Le.a,{width:"100%",chartType:"Gantt",loader:Object(j.jsx)("div",{className:"font-italic text-info",children:"Loading Chart. This may take longer. Please wait ..."}),data:n,rootProps:{"data-testid":"1"}})})},Ve=function(e){var t,n,s,r,a,c,i,l,o,d,u,b,h,m=e.project,v=e.projectSetting,p=(e.thisYearSettings,e.user),O=Me(null===m||void 0===m?void 0:m.milestones),x=O.milestones,f=O.pendingMilestones,g=O.completeMilestones,N=O.milestonesInProgress,y=O.milestonesProgressInPercentage,w=_e(function(e){var t=[];return e&&e.forEach((function(e){var n;e.duration=Object(te.dateDiffInHours)(e.endDate,e.startDate),null===(n=e.tasks)||void 0===n||n.forEach((function(e){e.progress="PENDING"===e.status?0:"IN_PROGRESS"===t.status?50:100,e.duration=Object(te.dateDiffInHours)(e.endDate,e.startDate),t.push(e)}))})),t}(null===m||void 0===m?void 0:m.milestones)),k=w.tasks,A=w.pendingTasks,S=w.completeTasks,P=w.tasksInProgress,D=w.taskProgressInPercentage,C=null===m||void 0===m?void 0:m.projectFiles;return Object(j.jsx)("div",{className:"container py-1",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsx)("div",{className:"card bg-transparent border-0",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("div",{className:"card-text mb-2",children:[Object(j.jsx)("h4",{className:"card-title",children:"Project Summary"}),Object(j.jsxs)("table",{className:"table table-bordered table-responsive table-sm",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Report Date"}),Object(j.jsx)("th",{children:"Project Name"}),Object(j.jsx)("th",{children:"Prepared By"})]})}),Object(j.jsx)("tbody",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:(new Date).toDateString()}),Object(j.jsx)("td",{children:null===m||void 0===m?void 0:m.name}),Object(j.jsx)("td",{children:(null===p||void 0===p?void 0:p.firstName)+" "+(null===p||void 0===p?void 0:p.lastName)})]})})]})]}),Object(j.jsx)("div",{className:"card-text mb-2",children:Object(j.jsx)("table",{className:"table table-bordered w-100",children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Languages"}),Object(j.jsx)("td",{children:null===m||void 0===m?void 0:m.languages})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Category"}),Object(j.jsx)("td",{children:null===m||void 0===m?void 0:m.category})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Student"}),Object(j.jsxs)("td",{children:[Object(j.jsx)("a",{href:"mailto:".concat(null===m||void 0===m||null===(t=m.student)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email),children:(null===m||void 0===m||null===(s=m.student)||void 0===s||null===(r=s.user)||void 0===r?void 0:r.fullName)||"--"}),Object(j.jsxs)("span",{className:"mx-2",children:["(",null===m||void 0===m||null===(a=m.student)||void 0===a?void 0:a.regNo,")"]})]})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Evaluator"}),Object(j.jsx)("td",{children:Object(j.jsx)("a",{href:"mailto:".concat(null===m||void 0===m||null===(c=m.evaluator)||void 0===c||null===(i=c.user)||void 0===i?void 0:i.email),children:(null===m||void 0===m||null===(l=m.evaluator)||void 0===l||null===(o=l.user)||void 0===o?void 0:o.fullName)||"--"})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Supervisor"}),Object(j.jsx)("td",{children:Object(j.jsx)("a",{href:"mailto:".concat(null===m||void 0===m||null===(d=m.supervisor)||void 0===d||null===(u=d.user)||void 0===u?void 0:u.email),children:(null===m||void 0===m||null===(b=m.supervisor)||void 0===b||null===(h=b.user)||void 0===h?void 0:h.fullName)||"--"})})]})]})})}),Object(j.jsxs)("div",{className:"card-text",children:[Object(j.jsx)("h4",{className:"card-title",children:"Status Summary"}),Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Milestones"}),Object(j.jsx)("th",{children:"Complete "}),Object(j.jsx)("th",{children:"In Progress"}),Object(j.jsx)("th",{children:"Pending"}),Object(j.jsx)("th",{children:"Progress(%)"})]})}),Object(j.jsx)("tbody",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:null===x||void 0===x?void 0:x.length}),Object(j.jsx)("td",{children:null===g||void 0===g?void 0:g.length}),Object(j.jsx)("td",{children:null===N||void 0===N?void 0:N.length}),Object(j.jsx)("td",{children:null===f||void 0===f?void 0:f.length}),Object(j.jsx)("td",{children:y||"--"})]})})]}),Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Tasks"}),Object(j.jsx)("th",{children:"Complete "}),Object(j.jsx)("th",{children:"In Progress"}),Object(j.jsx)("th",{children:"Pending"}),Object(j.jsx)("th",{children:"Progress(%)"})]})}),Object(j.jsx)("tbody",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:null===k||void 0===k?void 0:k.length}),Object(j.jsxs)("td",{children:[null===S||void 0===S?void 0:S.length," "]}),Object(j.jsx)("td",{children:null===P||void 0===P?void 0:P.length}),Object(j.jsx)("td",{children:null===A||void 0===A?void 0:A.length}),Object(j.jsx)("td",{children:D||"--"})]})})]}),Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Expected Start Date"}),Object(j.jsx)("th",{children:"Started On"}),Object(j.jsx)("th",{children:"Expected End Date"}),Object(j.jsx)("th",{children:"Finished On"}),Object(j.jsx)("th",{children:"Timeframe (Days)"}),Object(j.jsx)("th",{children:"Time Left (Days)"})]})}),Object(j.jsx)("tbody",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:Object(te.shortDate)(null===v||void 0===v?void 0:v.startDate)}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===m||void 0===m?void 0:m.startDate)}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===v||void 0===v?void 0:v.endDate)}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===m||void 0===m?void 0:m.endDate)}),Object(j.jsx)("td",{children:null===m||void 0===m?void 0:m.projectDays}),Object(j.jsx)("td",{children:null===m||void 0===m?void 0:m.daysLeft})]})})]})]}),(null===A||void 0===A?void 0:A.length)>0?Object(j.jsxs)("div",{className:"card-text mb-2",children:[Object(j.jsx)("h4",{className:"card-title",children:"Pending Tasks"}),Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Milestone"}),Object(j.jsx)("th",{children:"Task Name"}),Object(j.jsx)("th",{children:"Start Date"}),Object(j.jsx)("th",{children:"End Date"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Time Left (days)"})]})}),Object(j.jsx)("tbody",{children:A.map((function(e){var t;return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:null===e||void 0===e?void 0:e._id}),Object(j.jsx)("td",{children:null===e||void 0===e||null===(t=e.milestone)||void 0===t?void 0:t.name}),Object(j.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===e||void 0===e?void 0:e.startDate)}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===e||void 0===e?void 0:e.endDate)}),Object(j.jsx)("td",{children:null===e||void 0===e?void 0:e.status}),Object(j.jsx)("td",{children:null===e||void 0===e?void 0:e.daysLeft})]},null===e||void 0===e?void 0:e._id)}))})]})]}):null,Object(j.jsxs)("div",{className:"card-text mb-2",children:[Object(j.jsx)("h4",{className:"card-title",children:"Project Task Schedule"}),k.length>0?Object(j.jsx)(Be,{tasks:k}):Object(j.jsx)("p",{className:"lead my-1 card-text  p-1",children:"Could not show Gantt Chart because project has no tasks"})]}),Object(j.jsxs)("div",{className:"card-text mb-2",children:[Object(j.jsx)("h4",{className:"card-title",children:"Documentation"}),Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"File Name"}),Object(j.jsx)("th",{children:"Documentation"}),Object(j.jsx)("th",{children:"Date Submitted"}),Object(j.jsx)("th",{children:"Date Approved"}),Object(j.jsx)("th",{children:"Status"})]})}),Object(j.jsx)("tbody",{children:C&&C.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.name}),Object(j.jsx)("td",{children:e.fileType}),Object(j.jsx)("td",{children:Object(te.shortDate)(e.createdAt)}),Object(j.jsx)("td",{children:Object(te.shortDate)(e.acceptedDate)||"--"}),Object(j.jsx)("td",{children:e.status})]},e._id)}))})]})]})]})})})})})},He=function(e){var t,n,s,a,c,i,l=e.project,o=e.user,d=Object(r.useState)(!1),u=Object(X.a)(d,2),b=u[0],h=u[1];return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:null===l||void 0===l?void 0:l._id}),Object(j.jsxs)("td",{children:[Object(j.jsx)("h6",{children:null===l||void 0===l?void 0:l.name}),Object(j.jsx)("span",{className:"small text-muted",children:(null===l||void 0===l||null===(t=l.description)||void 0===t?void 0:t.substring(0,70))+"..."})]}),Object(j.jsx)("td",{children:null===l||void 0===l?void 0:l.category}),Object(j.jsxs)("td",{children:[(null===l||void 0===l||null===(n=l.student)||void 0===n||null===(s=n.user)||void 0===s?void 0:s.firstName)+" "+(null===l||void 0===l||null===(a=l.student)||void 0===a||null===(c=a.user)||void 0===c?void 0:c.lastName),Object(j.jsx)("h6",{className:"small",children:null===l||void 0===l||null===(i=l.student)||void 0===i?void 0:i.regNo})]}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===l||void 0===l?void 0:l.startDate)}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===l||void 0===l?void 0:l.endDate)}),Object(j.jsx)("td",{children:null===l||void 0===l?void 0:l.status}),Object(j.jsx)("td",{children:null===l||void 0===l?void 0:l.daysLeft}),Object(j.jsxs)("td",{className:"text-center",children:[Object(j.jsx)("button",{className:"btn btn-sm btn-info",onClick:function(){return h(!0)},children:"Report"}),Object(j.jsx)(re,{title:"Project Report",id:null===l||void 0===l?void 0:l._id,active:b,setActive:h,size:"lg",children:Object(j.jsx)(Ve,{project:l,user:o,showSelect:!1})})]})]},null===l||void 0===l?void 0:l._id)},Ye=function(e){var t=e.projects,n=e.students,s=Object(r.useState)({}),a=Object(X.a)(s,2),c=a[0],i=a[1],l=Object(r.useState)(!1),o=Object(X.a)(l,2),d=o[0],u=o[1],b=Object(r.useState)({}),h=Object(X.a)(b,2),m=h[0],v=h[1];Object(r.useEffect)((function(){p()}));var p=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.getOneByEmail(I.getUserEmail()).then((function(e){var t;v((null===(t=e.data)||void 0===t?void 0:t.data)||{})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=[{title:"All Projects",text:(null===t||void 0===t?void 0:t.length)||0,link:"/projects",icon:"files-o"},{title:"Assigned Projects",text:(null===t||void 0===t?void 0:t.length)||0,link:"/my-projects",icon:"files-o"},{title:"Students",text:(null===n||void 0===n?void 0:n.length)||0,link:"/students",icon:"users"}];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"row mb-2",children:[Object(j.jsx)("div",{className:"col-12",children:d&&Object(j.jsx)($,{alert:c,onClick:function(){i(null),u(!1)}})}),Object(j.jsx)("div",{className:"col-md-8 mb-2",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:O.map((function(e,t){return Object(j.jsx)(Ce,{update:e,className:"col-sm-12 col-md-4"},t)}))})})}),Object(j.jsx)("div",{className:"col-md-4 mb-2",children:Object(j.jsx)("div",{className:"project-report",children:Object(j.jsx)(Te,{projects:t})})})]}),Object(j.jsx)("div",{className:"row mb-2",children:Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("h5",{children:"My Projects"})}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Project ID"}),Object(j.jsx)("th",{children:"Project Name"}),Object(j.jsx)("th",{children:"Category"}),Object(j.jsx)("th",{children:"Student"}),Object(j.jsx)("th",{children:"Start Date"}),Object(j.jsx)("th",{children:"End Date"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Days Left"}),Object(j.jsx)("th",{children:"View"})]})}),Object(j.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){return Object(j.jsx)(He,{project:e,user:m},null===e||void 0===e?void 0:e._id)}))})]})})]})})})]})};function qe(){return We.apply(this,arguments)}function We(){return(We=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.getAll();case 2:if(!(t=e.sent).error){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",t.data.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(){return Je.apply(this,arguments)}function Je(){return(Je=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll();case 2:if(!(t=e.sent).error){e.next=7;break}return e.abrupt("return",!1);case 7:return n=I.getUserEmail(),s=t.data.data,"SUPERVISOR"===I.getUserRole()&&(s=null===(r=s)||void 0===r?void 0:r.filter((function(e){var t;return null===(t=e.projects)||void 0===t?void 0:t.filter((function(e){var t,s;return(null===(t=e.supervisor)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.email)===n}))}))),a=t.data.data.filter((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.email)===n}))[0],e.abrupt("return",{students:s,student:a});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.getAll();case 2:if(!(t=e.sent).error){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",t.data.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getAll();case 2:if(!(t=e.sent).error){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",t.data.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ze=function(){var e=Object(r.useState)([]),t=Object(X.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)([]),c=Object(X.a)(a,2),i=c[0],l=c[1],o=Object(r.useState)([]),d=Object(X.a)(o,2),u=d[0],b=d[1],h=Object(r.useState)([]),m=Object(X.a)(h,2),v=m[0],p=m[1],O=Object(r.useState)([]),x=Object(X.a)(O,2),N=x[0],y=x[1];return Object(r.useEffect)((function(){(function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.t0=s,e.next=4,qe();case 4:return e.t1=e.sent,(0,e.t0)(e.t1),e.next=8,ze();case 8:return t=e.sent,l(t.students),b(t.student),e.t2=y,e.next=14,$e();case 14:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=p,e.next=19,Ke();case 19:e.t5=e.sent,(0,e.t4)(e.t5),ie(!1);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsxs)("div",{className:"container-fluid p-1",children:[Object(j.jsx)(Pe,{}),"STUDENT"===I.getUserRole()&&Object(j.jsx)(De,{student:u,projects:N}),"EVALUATOR"===I.getUserRole()&&Object(j.jsx)(Re,{users:n,students:i,projects:N,staff:v}),"SUPERVISOR"===I.getUserRole()&&Object(j.jsx)(Ye,{projects:N,students:i})]})})},et=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/settings");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/settings/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllByYear",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/settings/year/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/settings",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/settings/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/settings/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/settings/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),tt=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={name:"",description:"",category:"",languages:"",startDate:"",endDate:"",studentId:"",evaluatorId:"",evaluators:[],project:s.props.project||null,alert:{},hasAlert:!1,settings:[]},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.handleChange=s.handleChange.bind(Object(Q.a)(s)),s.setDescription=s.setDescription.bind(Object(Q.a)(s)),s.getThisYearProjectSettings=s.getThisYearProjectSettings.bind(Object(Q.a)(s)),s.getEvaluators=s.getEvaluators.bind(Object(Q.a)(s)),s.createOrEditProject=s.createOrEditProject.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState(Object(d.a)(Object(d.a)({},this.state),{},Object(xe.a)({},e.target.name,t)))}},{key:"setDescription",value:function(e){this.setState({description:e})}},{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"getThisYearProjectSettings",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new Date).getFullYear(),e.next=3,et.getAllByYear(t).then((function(e){var t;e.error?n.setAlert(e.error):n.setState({settings:(null===(t=e.data.data)||void 0===t?void 0:t.filter((function(e){return"PROJECT"===e.category}))[0])||null})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getStudent",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll();case 2:(t=e.sent).error?this.setAlert(t.error):(n=t.data.data.filter((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.email)===I.getUserEmail()}))[0],this.setState({studentId:null===n||void 0===n?void 0:n._id}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEvaluators",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.getAll();case 2:(t=e.sent).error?this.setAlert(t.error):(n=t.data.data.filter((function(e){var t;return"EVALUATOR"===(null===(t=e.user)||void 0===t?void 0:t.role)})),this.setState({evaluators:n}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrEditProject",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a,c,i,l,o,d,u,j,b,h,m,v=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=v.length>0&&void 0!==v[0]&&v[0],ie(!0),r=this.state,a=r.name,c=r.description,i=r.category,l=r.languages,o=r.startDate,d=r.endDate,u=r.studentId,j=r.evaluatorId,b=r.project,h={name:a,description:c||(null===b||void 0===b?void 0:b.description),category:i||(null===b||void 0===b?void 0:b.category),languages:l||(null===b||void 0===b?void 0:b.languages),startDate:o||b.startDate,endDate:d||b.endDate,studentId:u||(null===b||void 0===b||null===(t=b.student)||void 0===t?void 0:t._id),evaluatorId:j||(null===b||void 0===b||null===(n=b.evaluator)||void 0===n?void 0:n._id)},!s){e.next=10;break}return e.next=7,F.update(null===b||void 0===b?void 0:b._id,h);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,F.save(h);case 12:e.t0=e.sent;case 13:(m=e.t0).error?this.setAlert(m.error):(console.log({response:m}),this.setAlert({message:m.data.message,type:"success"})),ie(!1);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getThisYearProjectSettings();case 3:return e.next=5,this.getStudent();case 5:return e.next=7,this.getEvaluators();case 7:ie(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.state,s=n.hasAlert,r=n.alert,a=n.evaluators,c=n.project,i=n.settings;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:null===c?"container":"container-fluid",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:null===c?"col-lg-8 m-auto":"col-12",children:Object(j.jsxs)("div",{className:null===c?"card bg-light border-success":"card bg-light",children:[null==c?Object(j.jsx)("div",{className:"card-header bg-success text-light d-flex flex-row justify-content-center align-items-center",children:Object(j.jsx)("h6",{className:"text align-content-center",children:" NEW PROJECT"})}):null,Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:null===c?"container":"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12",children:s&&Object(j.jsx)($,{alert:r,onClick:this.removeAlert})}),Object(j.jsxs)("div",{className:"col-lg-6 mb-2",children:[Object(j.jsx)("h3",{className:"text-success mb-2",children:"Basic Details"}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",className:"form-label",children:"Project Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",placeholder:"Enter Project Name",defaultValue:null===c||void 0===c?void 0:c.name,onChange:this.handleChange})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),Object(j.jsx)(he,{text:null===c||void 0===c?void 0:c.description,height:350,handleChangeFun:this.setDescription})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"evaluatorId",className:"form-label",children:"Project Evaluator"}),Object(j.jsxs)("select",{name:"evaluatorId",id:"evaluatorId",className:"form-control",onChange:this.handleChange,defaultValue:null===c||void 0===c||null===(e=c.evaluator)||void 0===e?void 0:e._id,children:[Object(j.jsx)("option",{value:"",children:"Select Evaluator"}),a&&a.map((function(e){var t,n;return Object(j.jsxs)("option",{value:"".concat(e._id),children:[" ","".concat(null===(t=e.user)||void 0===t?void 0:t.firstName," ").concat(null===(n=e.user)||void 0===n?void 0:n.lastName)]},e._id)}))]})]})]}),Object(j.jsxs)("div",{className:"col-lg-6 mb-2",children:[Object(j.jsx)("h3",{className:"text-success mb-2",children:"Other Details"}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"languages",className:"form-label",children:"Programming Languages"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"languages",name:"languages",defaultValue:null===c||void 0===c?void 0:c.languages,placeholder:"Languages eg PHP, ReactJs",onChange:this.handleChange}),Object(j.jsx)("span",{className:"form-text",children:"Separate each language with a comma"})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"category",className:"form-label",children:"Project Category"}),Object(j.jsxs)("select",{name:"category",id:"category",className:"form-control",onChange:this.handleChange,defaultValue:null===c||void 0===c?void 0:c.category,children:[Object(j.jsx)("option",{value:"",children:"Select Category"}),Object(j.jsx)("option",{value:"WEB_BASED",children:"Web Based Application"}),Object(j.jsx)("option",{value:"ANDROID",children:"Android Application"}),Object(j.jsx)("option",{value:"DESKTOP",children:"Desktop Application"}),Object(j.jsx)("option",{value:"SECURITY",children:"Security"}),Object(j.jsx)("option",{value:"NETWORKING",children:"Networking"}),Object(j.jsx)("option",{value:"OTHER",children:"Other"})]})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"startDate",className:"form-label",children:"Start Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",id:"startDate",name:"startDate",defaultValue:Object(te.shortDate)(null===c||void 0===c?void 0:c.startDate),min:Object(te.shortDate)(null===i||void 0===i?void 0:i.startDate),max:Object(te.shortDate)(null===i||void 0===i?void 0:i.endDate),onChange:this.handleChange})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"endDate",className:"form-label",children:"End Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",id:"endDate",name:"endDate",onChange:this.handleChange,defaultValue:Object(te.shortDate)(null===c||void 0===c?void 0:c.endDate),min:Object(te.shortDate)(null===i||void 0===i?void 0:i.startDate),max:Object(te.shortDate)(null===i||void 0===i?void 0:i.endDate)})]})]}),Object(j.jsx)("div",{className:"col-12 my-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("button",{type:"button",id:"btnProject",name:"btnProject",className:"btn btn-success btn-lg",onClick:function(){return t.createOrEditProject(null!==c)},children:"Submit Project"}),Object(j.jsx)(l.b,{to:"/my-projects",id:"btnProjects",name:"btnProjects",className:"btn btn-outline-secondary btn-lg",children:"My Projects"})]})})]})})})]})})})})})}}]),n}(r.Component),nt=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/milestones");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/milestones/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllByStatus",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/milestones/status/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/milestones",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/milestones/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setStatus",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/milestones/".concat(t,"/status/").concat(n),null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTasks",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/milestones/".concat(t,"/tasks"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/milestones/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/milestones/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),st=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={name:"",startDate:"",endDate:"",projectId:s.props.projectId||"",projects:[],currentIndex:0,currentProject:{},student:{},alert:{},hasAlert:!1,isModal:s.props.isModal||!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.handleChange=s.handleChange.bind(Object(Q.a)(s)),s.setIndexAndProject=s.setIndexAndProject.bind(Object(Q.a)(s)),s.createMilestone=s.createMilestone.bind(Object(Q.a)(s)),s.getStudent=s.getStudent.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState(Object(d.a)(Object(d.a)({},this.state),{},Object(xe.a)({},e.target.name,t)))}},{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"getStudent",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll();case 2:(t=e.sent).error?this.setAlert(t.error):(n=t.data.data.filter((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.email)===I.getUserEmail()}))[0],this.setState({student:n}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setIndexAndProject",value:function(e){this.setState({currentIndex:e.target.value,currentProject:this.state.projects[e.target.value]})}},{key:"createMilestone",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),t=this.state,n=t.name,s=t.startDate,r=t.endDate,a=t.currentProject,c={name:n,startDate:s,endDate:r,projectId:null===a||void 0===a?void 0:a._id},e.next=5,nt.save(c);case 5:(i=e.sent).error?this.setAlert(i.error):this.setAlert({title:"Operation successful",message:i.data.message,type:"success"}),ie(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getStudent();case 3:this.setState({projects:null===(t=this.state.student)||void 0===t?void 0:t.projects,currentProject:(null===(n=this.state.student)||void 0===n?void 0:n.projects[0])||{}}),ie(!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.hasAlert,n=e.alert,s=e.projects,r=e.currentProject,a=e.projectId,c=e.isModal;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:c?"col-12":"col-md-8 m-auto",children:Object(j.jsxs)("div",{className:"card bg-light border-info",children:[!c&&Object(j.jsx)("div",{className:"card-header bg-info d-flex flex-row justify-content-center align-items-center ",children:Object(j.jsx)("h6",{className:"text align-content-center",children:"CREATE NEW MILESTONE"})}),Object(j.jsxs)("div",{className:"card-body",children:[t&&Object(j.jsx)($,{alert:n,onClick:this.removeAlert}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"projectId",className:"form-label",children:"Select Project"}),Object(j.jsx)("select",{name:"currentProject",id:"currentProject",className:"form-control",onChange:this.setIndexAndProject,defaultValue:a,children:s&&s.map((function(e,t){return Object(j.jsx)("option",{value:"".concat(t),children:e.name},e._id)}))})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",className:"form-label",children:"Milestone Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",onChange:this.handleChange})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"startDate",className:"form-label",children:"Start Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",id:"startDate",name:"startDate",min:Object(te.shortDate)(null===r||void 0===r?void 0:r.startDate),max:Object(te.shortDate)(null===r||void 0===r?void 0:r.endDate),onChange:this.handleChange})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"endDate",className:"form-label",children:"End Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",id:"endDate",name:"endDate",min:Object(te.shortDate)(null===r||void 0===r?void 0:r.startDate),max:Object(te.shortDate)(null===r||void 0===r?void 0:r.endDate),onChange:this.handleChange})]}),Object(j.jsx)("div",{className:"my-2",children:Object(j.jsx)("button",{className:"btn btn-success",type:"button",onClick:this.createMilestone,children:"Create Milestone"})})]})]})})})})})}}]),n}(r.Component),rt=function(e){var t,n=e.project,s=e.student,a=e.changeStatus,c=e.deleteProject,i=Object(r.useState)(null),l=Object(X.a)(i,2),o=l[0],d=l[1],u=Object(r.useState)(!1),b=Object(X.a)(u,2),h=b[0],m=b[1],v=[{name:"IN_PROGRESS",displayName:"In Progress"},{name:"FINISHED",displayName:"Finished"}];return(null===s||void 0===s||null===(t=s.user)||void 0===t?void 0:t.email)===I.getUserEmail()?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"btn btn-danger",onClick:function(){return c()},children:"Delete"}),Object(j.jsx)("button",{className:"btn btn-outline-secondary mx-1",onClick:function(){return m(!0)},children:"Comment"}),Object(j.jsx)(re,{id:"new-comment",title:"Project: ".concat(null===n||void 0===n?void 0:n.name),active:h,setActive:m,size:"md",children:Object(j.jsx)(me,{projectId:null===n||void 0===n?void 0:n._id,studentId:null===s||void 0===s?void 0:s._id})}),["ACCEPTED","IN_PROGRESS"].includes(null===n||void 0===n?void 0:n.status)&&Object(j.jsxs)("div",{className:"input-group my-3",children:[Object(j.jsx)("div",{className:"input-group-prepend",children:Object(j.jsx)("span",{className:"input-group-text",children:"Change Status"})}),Object(j.jsx)("select",{name:"supervisor",id:"supervisor",className:"form-control form-control-sm",onChange:function(e){return d(e.target.value)},children:v&&v.map((function(e,t){return Object(j.jsx)("option",{value:e.name,children:e.displayName},t)}))}),Object(j.jsx)("div",{className:"input-group-append",children:Object(j.jsx)("span",{style:{cursor:"pointer",backgroundColor:"green",color:"white"},className:"input-group-text bg-success text-light",onClick:function(){return a(n,o)},children:"Update"})})]})]}):null},at=function(e){var t,n,s,r,a,c,i=e.project,l=e.changeStatus,o=e.deleteProject;return Object(j.jsx)("div",{className:"mb-2 p-2",children:Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{children:Object(j.jsx)("th",{colSpan:"2",children:"Project Details"})})}),Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Name"}),Object(j.jsx)("td",{children:i.name})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Description"}),Object(j.jsx)("td",{children:Object(j.jsx)("div",{className:"lead",dangerouslySetInnerHTML:{__html:null===i||void 0===i?void 0:i.description}})})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Languages"}),Object(j.jsx)("td",{children:i.languages})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Category"}),Object(j.jsx)("td",{children:i.category})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Student"}),Object(j.jsx)("td",{children:null===i||void 0===i||null===(t=i.student)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.fullName})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Evaluator"}),Object(j.jsx)("td",{children:null===i||void 0===i||null===(s=i.evaluator)||void 0===s||null===(r=s.user)||void 0===r?void 0:r.fullName})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Supervisor"}),Object(j.jsx)("td",{children:(null===i||void 0===i||null===(a=i.supervisor)||void 0===a||null===(c=a.user)||void 0===c?void 0:c.fullName)||"--"})]}),Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:2,children:Object(j.jsx)(rt,{project:i,student:null===i||void 0===i?void 0:i.student,changeStatus:l,deleteProject:o})})})]})]})})},ct=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={allProjects:[],projects:[],currentIndex:0,currentProject:{},projectId:null,user:{},staff:{},alert:{},hasAlert:!1,active:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.setActive=s.setActive.bind(Object(Q.a)(s)),s.getAllProjects=s.getAllProjects.bind(Object(Q.a)(s)),s.getUserByEmail=s.getUserByEmail.bind(Object(Q.a)(s)),s.getStaff=s.getStaff.bind(Object(Q.a)(s)),s.setProjectId=s.setProjectId.bind(Object(Q.a)(s)),s.loadProject=s.loadProject.bind(Object(Q.a)(s)),s.changeStatus=s.changeStatus.bind(Object(Q.a)(s)),s.downloadFiles=s.downloadFiles.bind(Object(Q.a)(s)),s.deleteProject=s.deleteProject.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"setActive",value:function(e){this.setState({active:e}),e||this.getAllProjects()}},{key:"getAllProjects",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getAll();case 2:if(!(t=e.sent).error){e.next=7;break}this.setAlert(t.error),e.next=15;break;case 7:return n=I.getUserRole(),s=I.getUserEmail(),e.next=11,this.getUserByEmail(s);case 11:r=e.sent,this.setState({allProjects:t.data.data}),"EVALUATOR"===n?this.setState({projects:this.state.allProjects.filter((function(e){var t,n;return(null===(t=e.evaluator)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email)===s}))}):"SUPERVISOR"===n?this.setState({projects:this.state.allProjects.filter((function(e){var t,n;return(null===(t=e.supervisor)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email)===s}))}):"STUDENT"===n?this.setState({projects:this.state.allProjects.filter((function(e){var t,n;return(null===(t=e.student)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email)===s}))}):this.setState({projects:this.state.allProjects}),this.setState({projectId:0,user:r,currentProject:this.state.projects[0]});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserByEmail",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.getOneByEmail(t);case 2:if(!(n=e.sent).error){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStaff",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.getOneById(t);case 2:if(!(n=e.sent).error){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setProjectId",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({currentIndex:t.target.value,currentProject:this.state.projects[t.target.value]});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadProject",value:function(){this.setState({currentProject:this.state.projects[this.state.currentIndex]})}},{key:"changeStatus",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,F.setStatus(null===t||void 0===t?void 0:t._id,n);case 3:(s=e.sent).error?this.setAlert(s.error):(this.setState({project:s.data.data}),this.setAlert({message:s.data.message,type:"success"})),ie(!1);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"downloadFiles",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.currentProject,!(n=(null===t||void 0===t?void 0:t.projectFiles)||[])){e.next=6;break}n.forEach((function(e){Object(ve.saveAs)(e.fileURL,e.name)})),e.next=7;break;case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteProject",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,F.delete(this.state.projects[this.state.currentIndex]._id);case 3:return(t=e.sent).error?this.setAlert(t.error):(this.setState({projects:this.state.projects.filter((function(e){return e._id!==n.state.projectId}))}),this.setAlert({title:"Operation successful",message:t.data.message,type:"success"})),e.next=7,this.getAllProjects();case 7:ie(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getAllProjects();case 3:this.loadProject(),ie(!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,s=this,r=this.state,a=r.alert,c=r.hasAlert,i=r.active,o=r.projects,d=r.currentProject,u=r.user;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container-fluid p-1",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)(l.b,{to:"/projects",className:"btn btn-sm btn-outline-secondary",children:"All Projects"}),Object(j.jsx)("h3",{children:"My Projects"}),"STUDENT"===(null===u||void 0===u?void 0:u.role)?Object(j.jsx)(l.b,{to:"/new-project",className:"btn btn-sm btn-primary",children:"New Project"}):Object(j.jsx)("div",{children:" "})]})}),Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsx)("div",{className:"card bg-light shadow",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("div",{className:"pull-left mb-2",children:[Object(j.jsx)("h4",{className:"text-body",children:"Select Project"}),Object(j.jsx)("div",{className:"btn-group",children:Object(j.jsx)("select",{name:"currentProject",id:"currentProject",className:"form-control",onChange:this.setProjectId,children:o&&o.map((function(e,t){return Object(j.jsx)("option",{value:"".concat(t),children:e.name},e._id)}))})})]}),Object(j.jsxs)("div",{className:"pull-right mb-2",children:["STUDENT"===(null===u||void 0===u?void 0:u.role)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l.b,{className:"btn btn-secondary mx-2",to:"/new-milestone/",children:Object(j.jsx)("span",{className:"mx-1",children:"New Milestone"})}),Object(j.jsx)("button",{className:"btn btn-primary mx-1",onClick:function(){return s.setActive(!0)},children:Object(j.jsx)("i",{className:"fa fa-edit"})}),Object(j.jsx)(re,{id:"new-project-container",title:"Edit Project: ".concat(null===d||void 0===d?void 0:d.name),active:i,setActive:this.setActive,size:"lg",children:Object(j.jsx)(tt,{project:d})})]}):Object(j.jsx)("div",{children:" "}),Object(j.jsx)("button",{className:"btn btn-success mx-1",onClick:function(){return s.downloadFiles()},children:Object(j.jsx)("i",{className:"fa fa-download text-light"})}),Object(j.jsx)(l.b,{className:"btn btn-secondary mx-1",to:"/projects/".concat(null===d||void 0===d?void 0:d._id,"/report"),children:"View Report"}),"STUDENT"===(null===u||void 0===u?void 0:u.role)?Object(j.jsx)("button",{className:"btn btn-danger",onClick:this.deleteProject,children:Object(j.jsx)("i",{className:"fa fa-trash text-light"})}):null]})]})})}),c&&Object(j.jsx)($,{alert:a,onClick:this.removeAlert}),Object(j.jsxs)("div",{className:"col-12 my-2",children:[Object(j.jsxs)("ul",{className:"nav nav-tabs",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link active","data-toggle":"tab",to:"#details",children:"Details"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link","data-toggle":"tab",to:"/projects/".concat(null===d||void 0===d?void 0:d._id,"/milestones"),children:"Milestones"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(l.b,{className:"nav-link","data-toggle":"tab",to:"/projects/".concat(null===d||void 0===d?void 0:d._id,"/files"),children:["Files",Object(j.jsx)("span",{className:"badge text-danger",children:(null===d||void 0===d||null===(e=d.projectFiles)||void 0===e||null===(t=e.filter((function(e){return"PENDING"===e.status})))||void 0===t?void 0:t.length)||""})]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(l.b,{className:"nav-link","data-toggle":"tab",to:"/projects/".concat(null===d||void 0===d?void 0:d._id,"/comments"),children:"Comments"})})]}),Object(j.jsx)("div",{className:"tab-content",children:Object(j.jsx)("div",{className:"tab-pane container-fluid active",id:"details",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-8 mb-2 py-1",children:d&&Object(j.jsx)(at,{project:d,changeStatus:this.changeStatus,deleteProject:this.deleteProject})}),Object(j.jsx)("div",{className:"col-md-4",children:Object(j.jsxs)("div",{className:"card bg-light border-info",children:[Object(j.jsx)("div",{className:"card-header bg-info",children:Object(j.jsx)("h5",{className:"text-light",children:"Quick Stats"})}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("span",{className:"mx-1",children:"Start Date"}),": ",Object(j.jsx)("span",{className:"pull-right",children:Object(te.default)(null===d||void 0===d?void 0:d.startDate).toDateString()})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("span",{className:"mx-1",children:"End Date"}),": ",Object(j.jsx)("span",{className:"pull-right",children:Object(te.default)(null===d||void 0===d?void 0:d.endDate).toDateString()})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("span",{className:"mx-1",children:"Status"}),": ",Object(j.jsx)("span",{className:"pull-right",children:null===d||void 0===d?void 0:d.status})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("span",{className:"mx-1",children:"Milestones"}),": ",Object(j.jsx)("span",{className:"pull-right",children:(null===d||void 0===d||null===(n=d.milestones)||void 0===n?void 0:n.length)||0})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("span",{className:"mx-1",children:"Time frame(days)"}),": ",Object(j.jsx)("span",{className:"pull-right",children:(null===d||void 0===d?void 0:d.projectDays)||0})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("span",{className:"mx-1",children:"Time left(days)"}),": ",Object(j.jsx)("span",{className:"pull-right",children:null===d||void 0===d?void 0:d.daysLeft})]})]})})]})})]})})})]})]})})})}}]),n}(r.Component),it=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/tasks");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/tasks/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllByStatus",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/tasks/status/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/tasks",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/tasks/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setStatus",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/tasks/".concat(t,"/status/").concat(n),null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/tasks/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/tasks/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),lt=function(e){var t=e._id,n=e.changeStatus,s=e.deleteTask;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsxs)("select",{className:"form-control form-control-sm",onChange:function(e){return n(t,e.target.value)},children:[Object(j.jsx)("option",{value:"",children:"Change Status"}),Object(j.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),Object(j.jsx)("option",{value:"FINISHED",children:"Finished"})]})}),Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)("button",{className:"btn btn-danger btn-sm",type:"button",onClick:function(){return s()},children:Object(j.jsx)("i",{className:"fa fa-trash"})})})]})},ot=function(e){var t=e.tasks,n=e.deleteTask,s=e.refreshFun,a=Object(r.useState)({}),c=Object(X.a)(a,2),i=c[0],l=c[1],o=Object(r.useState)(!1),d=Object(X.a)(o,2),u=d[0],b=d[1],h=function(){var e=Object(g.a)(f.a.mark((function e(n,r){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",null);case 4:return ie(!0),e.next=7,it.setStatus(n,r);case 7:(a=e.sent).error?l(a.error):(t=Object(Ge.a)(t.forEach((function(e){e._id===n&&(e=a.data.data)}))),l({message:a.data.message,type:"success"})),s(),ie(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(g.a)(f.a.mark((function e(n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this items")){e.next=9;break}return ie(!0),e.next=5,it.delete(n);case 5:(r=e.sent).error?(l(r.error),b(!0)):(t=Object(Ge.a)(t.filter((function(e){return e._id!==n}))),l({title:"Operation successful",message:r.data.message,type:"success"}),b(!0)),s(),ie(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("table",{className:"table table-bordered table-success",children:[Object(j.jsx)("thead",{className:"bg-light text-dark",children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Task Name"}),Object(j.jsx)("th",{children:"Start Date"}),Object(j.jsx)("th",{children:"End Date"}),Object(j.jsx)("th",{children:"Status"}),n&&Object(j.jsx)("th",{children:"Action"})]})}),Object(j.jsxs)("tbody",{children:[Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:"6",children:u&&Object(j.jsx)($,{alert:i,onClick:function(){l(null),b(!1)}})})}),t&&t.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e._id}),Object(j.jsxs)("td",{children:[e.name," ",Object(j.jsx)("br",{}),Object(j.jsx)("small",{className:"",children:null===e||void 0===e?void 0:e.description})]}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===e||void 0===e?void 0:e.startDate)||"--"}),Object(j.jsx)("td",{children:Object(te.shortDate)(null===e||void 0===e?void 0:e.endDate)||"--"}),Object(j.jsx)("td",{children:e.status}),n&&Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("ul",{className:"list-inline",children:Object(j.jsx)(lt,{_id:e._id,changeStatus:h,deleteTask:function(){return m(e._id)}})})})]},e._id)}))]})]})},dt=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={name:"",description:"",startDate:"",endDate:"",milestoneId:s.props.milestoneId||s.props.match.params.milestoneId,milestoneName:"",project:{},milestone:{},alert:{},hasAlert:!1,isModal:s.props.isModal||!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.handleChange=s.handleChange.bind(Object(Q.a)(s)),s.getMilestone=s.getMilestone.bind(Object(Q.a)(s)),s.createTask=s.createTask.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState(Object(d.a)(Object(d.a)({},this.state),{},Object(xe.a)({},e.target.name,t)))}},{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"getMilestone",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.getOneById(this.state.milestoneId);case 2:(t=e.sent).error?this.setAlert(t.error):this.setState({milestone:null===(n=t.data)||void 0===n?void 0:n.data,milestoneName:null===(s=t.data)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.name,project:null===(a=t.data)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.project});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createTask",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a,c,i,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),t=this.state,n=t.name,s=t.description,r=t.startDate,a=t.endDate,c=t.milestoneId,i={name:n,description:s,startDate:r,endDate:a,milestoneId:c},console.log({data:i}),e.next=6,it.save(i);case 6:(l=e.sent).error?this.setAlert(l.error):this.setAlert({title:"Operation successful",message:l.data.message,type:"success"}),ie(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),t=this.props.milestoneId||this.props.match.params.milestoneId,this.setState({milestoneId:t}),e.next=5,this.getMilestone();case 5:ie(!1);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.hasAlert,n=e.alert,s=e.milestone,r=e.project,a=e.milestoneName,c=e.isModal;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[!c&&Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)(l.b,{to:"/projects/".concat(r._id,"/milestones/").concat(s._id),id:"btnTasks",name:"btnTasks",className:"btn btn-outline-secondary btn-lg",children:"All Tasks"}),Object(j.jsx)("h3",{children:"CREATE NEW PROJECT TASK"}),Object(j.jsx)(l.b,{to:"/projects/".concat(null===r||void 0===r?void 0:r._id,"/milestones"),className:"btn btn-sm btn-primary",children:"Milestones"})]})}),Object(j.jsx)("div",{className:c?"col-12":"col-md-8 m-auto",children:Object(j.jsxs)("div",{className:"card bg-light border-success",children:[!c&&Object(j.jsxs)("div",{className:"card-header",children:[Object(j.jsxs)("h4",{className:"text-muted",children:["Project: ",(null===r||void 0===r?void 0:r.name)||"--"]}),Object(j.jsxs)("h6",{className:"text-muted",children:["Milestone: ",a]})]}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12",children:t&&Object(j.jsx)($,{alert:n,onClick:this.removeAlert})}),Object(j.jsxs)("div",{className:c?"col-12 mb-2":"col-md-6 mb-2",children:[Object(j.jsx)("h3",{className:"text-success mb-2",children:"Basic Details"}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",className:"form-label",children:"Task Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",placeholder:"Enter Task Name",onChange:this.handleChange})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),Object(j.jsx)("textarea",{className:"form-control",id:"description",name:"description",rows:"5",placeholder:"Long Description",onChange:this.handleChange})]})]}),Object(j.jsxs)("div",{className:c?"col-12 mb-2":"col-md-6 mb-2",children:[Object(j.jsx)("h3",{className:"text-success mb-2",children:"Other Details"}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"startDate",className:"form-label",children:"Start Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",id:"startDate",name:"startDate",min:Object(te.shortDate)(null===s||void 0===s?void 0:s.startDate),max:Object(te.shortDate)(null===s||void 0===s?void 0:s.endDate),onChange:this.handleChange})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"endDate",className:"form-label",children:"End Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",id:"endDate",name:"endDate",min:Object(te.shortDate)(null===s||void 0===s?void 0:s.startDate),max:Object(te.shortDate)(null===s||void 0===s?void 0:s.endDate),onChange:this.handleChange})]})]}),Object(j.jsx)("div",{className:"col-12 my-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("button",{type:"button",id:"btnTask",name:"btnTask",className:"btn btn-success btn-lg",onClick:this.createTask,children:"Create Task"}),Object(j.jsx)(l.b,{to:"/projects/".concat(r._id,"/milestones/").concat(s._id),id:"btnTasks",name:"btnTasks",className:"btn btn-outline-secondary btn-lg",children:"All Tasks"})]})})]})})})]})})]})})})}}]),n}(r.Component),ut=function(e){var t,n=e.milestone,s=e._id,a=e.changeStatus,c=e.deleteMilestone,i=e.delMilestone,l=e.refreshFun,o=Object(r.useState)(!1),d=Object(X.a)(o,2),u=d[0],b=d[1],h=function(e,t){p()(".".concat(e)).removeClass("active"),p()("#".concat(t)).toggleClass("active")};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:n._id}),Object(j.jsx)("td",{children:n.name}),Object(j.jsx)("td",{children:Object(te.shortDate)(n.startDate)||"--"}),Object(j.jsx)("td",{children:Object(te.shortDate)(n.endDate)||"--"}),Object(j.jsx)("td",{children:n.status}),Object(j.jsx)("td",{children:null===(t=n.tasks)||void 0===t?void 0:t.length}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsxs)("ul",{className:"list-inline",children:[Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)("button",{className:"btn btn-outline-primary btn-sm","data-target":"tasks-list-".concat(n._id),onClick:function(e){return function(e){var t=e.target.getAttribute("data-target");h("task-list",t)}(e)},children:Object(j.jsx)("i",{className:"fa fa-plus"})})}),c&&Object(j.jsx)(jt,{deleteMilestoneFun:function(){return i(n._id)},_id:n._id,changeStatus:a})]})})]}),Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:7,children:Object(j.jsxs)("div",{id:"tasks-list-".concat(n._id),className:"task-list",children:[Object(j.jsxs)("div",{className:"card-title",children:[Object(j.jsxs)("h6",{className:"text-info",children:["Tasks under ",null===n||void 0===n?void 0:n.name]}),c&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"btn btn-sm btn-success mx-3",onClick:function(){return b(!0)},children:"New Task"}),Object(j.jsx)(re,{title:"Add New Task",id:s,active:u,setActive:b,size:"md",children:Object(j.jsx)(dt,{milestoneId:s,isModal:!0})})]})]}),n.tasks&&Object(j.jsx)(ot,{tasks:n.tasks,deleteTask:c,refreshFun:l})]})})})]})},jt=function(e){var t=e.deleteMilestoneFun,n=e.changeStatus,s=e._id;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsxs)("select",{className:"form-control form-control-sm",onChange:function(e){return n(s,e.target.value)},children:[Object(j.jsx)("option",{value:"",children:"Change Status"}),Object(j.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),Object(j.jsx)("option",{value:"FINISHED",children:"Finished"})]})}),Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)("button",{className:"btn btn-danger btn-sm",type:"button",onClick:function(){return t()},children:Object(j.jsx)("i",{className:"fa fa-trash"})})})]})},bt=function(e){var t=e.milestones,n=e.deleteMilestone,s=e.refreshFun,a=Object(r.useState)({}),c=Object(X.a)(a,2),i=c[0],l=c[1],o=Object(r.useState)(!1),d=Object(X.a)(o,2),u=d[0],b=d[1],h=function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this items")){e.next=8;break}return ie(!0),e.next=5,nt.delete(t);case 5:(n=e.sent).error?(l(n.error),b(!0)):(l({title:"Operation successful",message:n.data.message,type:"success"}),b(!0),s()),ie(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(g.a)(f.a.mark((function e(n,r){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.abrupt("return",null);case 4:return ie(!0),e.next=7,nt.setStatus(n,r);case 7:(a=e.sent).error?l(a.error):(t.forEach((function(e){e._id===n&&(e=a.data.data)})),l({message:a.data.message,type:"success"})),s(),ie(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{className:"bg-dark text-light",children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Name"}),Object(j.jsx)("th",{children:"Start Date"}),Object(j.jsx)("th",{children:"End Date"}),Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("th",{children:"Tasks"}),Object(j.jsx)("th",{children:"Action"})]})}),Object(j.jsxs)("tbody",{children:[Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:"7",children:u&&Object(j.jsx)($,{alert:i,onClick:function(){l(null),b(!1)}})})}),t&&t.map((function(e){return Object(j.jsx)(ut,{milestone:e,_id:e._id,changeStatus:m,delMilestone:h,deleteMilestone:n,refreshFun:s},e._id)}))]})]})},ht=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={projectId:s.props.match.params.projectId,title:"",milestones:[],alert:{},hasAlert:!1,active:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.getMilestones=s.getMilestones.bind(Object(Q.a)(s)),s.setActive=s.setActive.bind(Object(Q.a)(s)),s.isOwner=s.isOwner.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"setActive",value:function(e){this.setState({active:e}),e||this.getMilestones()}},{key:"getMilestones",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getMilestones(this.state.projectId);case 2:(t=e.sent).error?this.setAlert(t.error):(r=null===(n=t.data.data[0])||void 0===n||null===(s=n.project)||void 0===s?void 0:s.name,this.setState({milestones:t.data.data,title:r}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isOwner",value:function(){var e,t,n,s=I.getUserEmail(),r=(null===(e=this.state.milestones[0])||void 0===e?void 0:e.project)||{};return!(!r||s!==(null===r||void 0===r||null===(t=r.student)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email))}},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),t=this.props.match.params.projectId,this.setState({projectId:t}),e.next=5,this.getMilestones();case 5:ie(!1);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.title,s=t.milestones,r=t.alert,a=t.hasAlert,c=t.projectId,i=t.active;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)(l.b,{to:"/my-projects",className:"btn btn-sm btn-outline-secondary",children:"My Projects"}),Object(j.jsx)("h3",{children:"Project Milestones"}),this.isOwner()?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"btn btn-sm btn-primary",onClick:function(){return e.setActive(!0)},children:"New Milestone"}),Object(j.jsx)(re,{title:"Create Project Milestone",active:i,setActive:this.setActive,size:"md",children:Object(j.jsx)(st,{projectId:c,isModal:!0})})]}):Object(j.jsx)("div",{})]})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("div",{className:"card bg-light my-2",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsxs)("h4",{className:"text-muted",children:["Project: ",n]})}),Object(j.jsxs)("div",{className:"card-body",children:[a&&Object(j.jsx)($,{alert:r,onClick:this.removeAlert}),s&&Object(j.jsx)(bt,{milestones:s,deleteMilestone:this.isOwner(),refreshFun:function(){return e.getMilestones()}})]})]})})]})})})}}]),n}(r.Component),mt=function(e){var t,n=e.milestone;return Object(j.jsx)("div",{className:"mb-2 p-2",children:Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{children:Object(j.jsx)("th",{colSpan:"2",children:"Milestone Details"})})}),Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Name"}),Object(j.jsx)("td",{children:n.name})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Created On"}),Object(j.jsx)("td",{children:Object(te.shortDate)(n.createdAt)})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Expected Start Date"}),Object(j.jsx)("td",{children:Object(te.shortDate)(n.startDate)})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Status"}),Object(j.jsx)("td",{children:n.status})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Project"}),Object(j.jsx)("td",{children:null===n||void 0===n||null===(t=n.project)||void 0===t?void 0:t.name})]})]})]})})},vt=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={milestoneId:s.props.match.params.milestoneId,milestone:{},alert:{},hasAlert:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.getMilestone=s.getMilestone.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"getMilestone",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.milestoneId,e.next=3,nt.getOneById(t);case 3:(n=e.sent).error?this.setAlert(n.error):this.setState({milestone:n.data.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getMilestone();case 3:ie(!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n=this.state,s=n.milestone,r=n.hasAlert,a=n.alert;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container-fluid p-1",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)(l.b,{to:"/projects/".concat(null===s||void 0===s||null===(e=s.project)||void 0===e?void 0:e._id,"/milestones"),className:"btn btn-sm btn-outline-secondary",children:"All Milestones"}),Object(j.jsx)("div",{className:"card bg-transparent border-0",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h4",{className:"card-title",children:"Project: ".concat(null===s||void 0===s||null===(t=s.project)||void 0===t?void 0:t.name)}),Object(j.jsx)("h6",{className:"text-muted card-subtitle",children:"Milestone: ".concat(null===s||void 0===s?void 0:s.name)})]})}),Object(j.jsx)(l.b,{to:"/new-task/".concat(null===s||void 0===s?void 0:s._id),className:"btn btn-sm btn-primary",children:"New Task"})]}),r&&Object(j.jsx)($,{alert:a,onClick:this.removeAlert}),Object(j.jsx)("div",{className:"col-md-12",children:Object(j.jsx)("div",{className:"card border-0",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-6",children:Object(j.jsx)(mt,{milestone:s})})}),Object(j.jsxs)("div",{className:"milestone-tasks",children:[Object(j.jsx)("h5",{className:"card-title",children:"Milestone Tasks"}),s.tasks&&Object(j.jsx)(ot,{tasks:s.tasks})]})]})})})]})})})}}]),n}(r.Component),pt=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={firstName:"",lastName:"",email:"",regNo:"",staffId:"",oldPassword:"",password:"",confirmPassword:"",userRole:I.getUserRole(),profileData:{},alert:{},hasAlert:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.handleChange=s.handleChange.bind(Object(Q.a)(s)),s.getProfileData=s.getProfileData.bind(Object(Q.a)(s)),s.updateProfile=s.updateProfile.bind(Object(Q.a)(s)),s.doUpdate=s.doUpdate.bind(Object(Q.a)(s)),s.changePassword=s.changePassword.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState(Object(d.a)(Object(d.a)({},this.state),{},Object(xe.a)({},e.target.name,t)))}},{key:"getProfileData",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.userRole,n=null,"STUDENT"!==t){e.next=8;break}return e.next=5,Ae.getAll();case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,oe.getAll();case 10:n=e.sent;case 11:n.error?this.setAlert(n.error):(s=n.data.data.filter((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.email)===I.getUserEmail()}))[0],this.setState({profileData:s}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateProfile",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a,c,i,l,o,d,u,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),r=this.state,a=r.firstName,c=r.lastName,i=r.email,l=r.regNo,o=r.staffId,d=r.profileData,u=r.userRole,j={firstName:a||(null===d||void 0===d||null===(t=d.user)||void 0===t?void 0:t.firstName),lastName:c||(null===d||void 0===d||null===(n=d.user)||void 0===n?void 0:n.lastName),email:i||(null===d||void 0===d||null===(s=d.user)||void 0===s?void 0:s.email),regNo:l||(null===d||void 0===d?void 0:d.regNo),staffId:o||(null===d||void 0===d?void 0:d.staffId)},e.next=5,this.doUpdate(d._id,u,j);case 5:ie(!1);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"doUpdate",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n,s){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,"STUDENT"!==n){e.next=7;break}return e.next=4,Ae.update(t,s);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,oe.update(t,s);case 9:r=e.sent;case 10:return r.error?this.setAlert(r.error):(this.setAlert({title:"Operation successful",message:r.data.message,type:"success"}),this.setState({profileData:r.data.data})),e.next=13,this.getProfileData();case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,s){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a,c,i,l,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie(!0),n=this.state,s=n.profileData,r=n.oldPassword,a=n.password,c=n.confirmPassword,i={oldPassword:r,password:a,email:null===s||void 0===s||null===(t=s.user)||void 0===t?void 0:t.email},c===a){e.next=8;break}return this.setAlert({type:"danger",message:"Passwords don't match.",title:"Error"}),e.abrupt("return",!1);case 8:return e.next=10,I.changePassword(i);case 10:(l=e.sent).error?this.setAlert(l.error):this.setAlert({type:"success",message:null===(o=l.data)||void 0===o?void 0:o.message,title:"Server Response"});case 12:ie(!1);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getProfileData();case 3:ie(!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,s,r,a=this.state,c=a.userRole,i=a.profileData,o=a.alert,d=a.hasAlert;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{}),Object(j.jsx)("h3",{children:"My Profile"}),Object(j.jsx)("div",{})]})})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-lg-4 mb-3",children:Object(j.jsxs)("div",{className:"card bg-transparent border-0 shadow",style:{position:"relative"},children:[Object(j.jsx)("div",{className:"card-header bg-info text-light py-2",children:Object(j.jsx)("h3",{className:"text-center text-uppercase",children:c||"USER"})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h3",{className:"card-title",children:"".concat(null===i||void 0===i||null===(e=i.user)||void 0===e?void 0:e.firstName," ").concat(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.lastName)}),Object(j.jsxs)("p",{className:"card-text",children:[Object(j.jsx)("i",{className:"fa fa-user-circle"}),Object(j.jsxs)("span",{className:"mx-1",children:[" ","".concat("STUDENT"===c?"Reg No":"Staff ID"),": ",(null===i||void 0===i?void 0:i.regNo)||(null===i||void 0===i?void 0:i.staffId)]})]}),Object(j.jsxs)("p",{className:"card-text",children:[Object(j.jsx)("i",{className:"fa fa-envelope"}),Object(j.jsxs)("span",{className:"mx-1",children:["Email: ",null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.email]})]}),Object(j.jsxs)("p",{className:"card-text",children:[Object(j.jsx)("i",{className:"fa fa-calendar"}),Object(j.jsxs)("span",{className:"mx-1",children:["Joined: ",Object(te.default)(null===i||void 0===i||null===(s=i.user)||void 0===s?void 0:s.createdAt).toDateString()]})]}),"STUDENT"===c&&Object(j.jsxs)("p",{className:"card-text",children:[Object(j.jsx)("i",{className:"fa fa-files-o"}),Object(j.jsxs)("span",{className:"mx-1",children:["Projects: ",null===i||void 0===i||null===(r=i.projects)||void 0===r?void 0:r.length]}),Object(j.jsx)("span",{className:"pull-right",children:Object(j.jsx)(l.b,{to:"/my-projects",className:"card-link",children:"View"})})]})]})]})}),Object(j.jsxs)("div",{className:"col-lg-8 mb-3",children:[d&&Object(j.jsx)($,{alert:o,onClick:this.removeAlert}),Object(j.jsx)("div",{className:"card bg-transparent border-1",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("p",{className:"card-text",children:"Update Details"}),Object(j.jsx)(ke,{changeHandler:this.handleChange,names:!0,email:!0,regNo:"STUDENT"===c,staffId:"STUDENT"!==c,disabled:!1,data:i}),Object(j.jsx)("div",{className:"my-2",children:Object(j.jsx)("button",{className:"btn btn-success btn-sm",type:"button",onClick:this.updateProfile,children:"Update Details"})})]})}),Object(j.jsx)("div",{className:"card bg-transparent border-1 mt-2",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("p",{className:"card-text",children:"Change Password"}),Object(j.jsxs)("div",{className:"form-group mb-2",children:[Object(j.jsx)("label",{htmlFor:"oldPassword",className:"form-label",children:"Old Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"oldPassword",name:"oldPassword",placeholder:"oldPassword",required:!0,onChange:this.handleChange})]}),Object(j.jsx)(ke,{changeHandler:this.handleChange,pwd:!0}),Object(j.jsx)("div",{className:"my-2",children:Object(j.jsx)("button",{className:"btn btn-success btn-sm",type:"button",onClick:this.changePassword,children:"Change Password"})})]})})]})]})]})})}}]),n}(r.Component),Ot=function(e){var t,n,s,a,c=e.user,i=(e.stdRegNo,e.staffNo,Object(r.useState)(null)),l=Object(X.a)(i,2),o=l[0],d=l[1],u=Object(r.useState)(null),b=Object(X.a)(u,2),h=b[0],m=b[1],v=Object(r.useState)(null),p=Object(X.a)(v,2),O=p[0],x=p[1],N=Object(r.useState)(null),y=Object(X.a)(N,2),w=y[0],k=y[1],A=Object(r.useState)(null),S=Object(X.a)(A,2),P=S[0],D=S[1],C=Object(r.useState)(null),E=Object(X.a)(C,2),T=E[0],I=E[1],F=Object(r.useState)({}),R=Object(X.a)(F,2),U=R[0],M=R[1],_=Object(r.useState)(!1),G=Object(X.a)(_,2),L=G[0],B=G[1],V=(null===c||void 0===c?void 0:c.role)||(null===c||void 0===c||null===(t=c.user)||void 0===t?void 0:t.role),H=function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie(!0),a=null,i={firstName:o||(null===c||void 0===c?void 0:c.firstName)||(null===c||void 0===c||null===(t=c.user)||void 0===t?void 0:t.firstName),lastName:h||(null===c||void 0===c?void 0:c.lastName)||(null===c||void 0===c||null===(n=c.user)||void 0===n?void 0:n.lastName),email:O||(null===c||void 0===c?void 0:c.email)||(null===c||void 0===c||null===(s=c.user)||void 0===s?void 0:s.email),role:w||(null===c||void 0===c?void 0:c.role)||(null===c||void 0===c||null===(r=c.user)||void 0===r?void 0:r.role),regNo:P||(null===c||void 0===c?void 0:c.regNo),staffId:T||(null===c||void 0===c?void 0:c.staffId)},"STUDENT"!==w){e.next=9;break}return e.next=6,Ae.update(c._id,i);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,oe.update(c._id,i);case 11:a=e.sent;case 12:a.error?(M(a.error),B(!0)):(M({title:"Operation successful",message:a.data.message,type:"success"}),B(!0)),ie(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"row mb-2",children:[Object(j.jsx)("div",{className:"col-12",children:L&&Object(j.jsx)($,{alert:U,onClick:function(){M(null),B(!1)}})}),Object(j.jsxs)("div",{className:"col-md-6",children:[Object(j.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"First Name"}),Object(j.jsx)("input",{type:"text",className:"form-control mb-1",id:"firstName",name:"firstName",placeholder:"Enter First Name ",required:!0,defaultValue:(null===c||void 0===c?void 0:c.firstName)||(null===c||void 0===c||null===(n=c.user)||void 0===n?void 0:n.firstName),onChange:function(e){return d(e.target.value)}})]}),Object(j.jsxs)("div",{className:"col-md-6",children:[Object(j.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last Name"}),Object(j.jsx)("input",{type:"text",className:"form-control mb-1",id:"lastName",name:"lastName",placeholder:"Enter Last Name",required:!0,defaultValue:(null===c||void 0===c?void 0:c.lastName)||(null===c||void 0===c||null===(s=c.user)||void 0===s?void 0:s.lastName),onChange:function(e){return m(e.target.value)}})]})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",placeholder:"Enter Email address",required:!0,defaultValue:(null===c||void 0===c?void 0:c.email)||(null===c||void 0===c||null===(a=c.user)||void 0===a?void 0:a.email),onChange:function(e){return x(e.target.value)}})]}),"STUDENT"===V&&Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"regNo",className:"form-label",children:"Registration Number"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"regNo",name:"regNo",placeholder:"Enter Registration Number",required:!0,defaultValue:null===c||void 0===c?void 0:c.regNo,onChange:function(e){return D(e.target.value)}})]}),"STUDENT"!==V&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"role",className:"form-label",children:"Role"}),Object(j.jsxs)("select",{className:"form-control",id:"role",name:"role",onChange:function(e){return k(e.target.value)},required:!0,defaultValue:V,children:[Object(j.jsx)("option",{value:"SUPERVISOR",children:"Supervisor"}),Object(j.jsx)("option",{value:"EVALUATOR",children:"Evaluator"}),Object(j.jsx)("option",{value:"ADMINISTRATOR",children:"Administrator"})]})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"staffId",className:"form-label",children:"Staff ID"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"staffId",name:"staffId",placeholder:"Enter StaffId",required:!0,defaultValue:null===c||void 0===c?void 0:c.staffId,onChange:function(e){return I(e.target.value)}})]})]}),Object(j.jsx)("div",{className:"form-group my-1",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-success btn-lg",id:"btnUpdate",name:"btnUpdate",onClick:H,children:"Update User"})})]})},xt=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/messages");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/messages/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/messages",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendReply",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/messages/".concat(t,"/reply"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/messages/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/messages/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),ft=function(e){var t=e.user,n=e.inMessage,s=void 0!==n&&n,a=e.receiverEmail,c=e.receiverName,i=Object(r.useState)({}),l=Object(X.a)(i,2),o=l[0],d=l[1],u=Object(r.useState)(!1),b=Object(X.a)(u,2),h=b[0],m=b[1],v=Object(r.useState)(null),p=Object(X.a)(v,2),O=p[0],x=p[1],N=Object(r.useState)(null),y=Object(X.a)(N,2),w=y[0],k=y[1],A=Object(r.useState)(null),S=Object(X.a)(A,2),P=S[0],D=S[1];Object(r.useEffect)((function(){t&&(x(t.fullName),k(t.email))}),[t]);var C=function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie(!0),t=null,!s){e.next=5;break}return e.next=5,ue.getOneByEmail(I.getUserEmail()).then((function(e){console.log(e),t=e.data.data}));case 5:return n={senderName:t.fullName||O,senderEmail:t.email||w,receiverName:c||null,receiverEmail:a||null,message:P},e.next=8,xt.sendMessage(n).then((function(e){var t;e.error?(d(e.error),m(!0)):(d({title:"Server Response",message:null===(t=e.data)||void 0===t?void 0:t.message,type:"success"}),m(!0))}));case 8:ie(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[h&&Object(j.jsx)($,{alert:o,onClick:function(){d(null),m(!1)}}),!s&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"senderName",className:"form-label",children:"Your Full Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"senderName",name:"senderName",placeholder:"Enter your full name",defaultValue:O,onChange:function(e){return x(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"senderEmail",className:"form-label",children:"Email"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"senderEmail",name:"senderEmail",placeholder:"Enter email",defaultValue:w,onChange:function(e){return k(e.target.value)}})]})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"message",className:"form-label",children:"Message"}),Object(j.jsx)(he,{handleChangeFun:D})]}),Object(j.jsx)("div",{className:"my-2",children:Object(j.jsx)("button",{name:"btnSend",id:"btnSend",className:"btn btn-success",type:"button",onClick:function(){return C()},children:"Send Message"})})]})},gt=function(e){var t,n,s,a=e.canDelete,c=e.deleteFn,i=e.user,l=e.userRole,o=Object(r.useState)(!1),d=Object(X.a)(o,2),u=d[0],b=d[1],h=Object(r.useState)(!1),m=Object(X.a)(h,2),v=m[0],p=m[1];return Object(j.jsx)("td",{className:"text-center",children:Object(j.jsxs)("ul",{className:"list-inline",children:[Object(j.jsxs)("li",{className:"list-inline-item",children:[Object(j.jsx)("button",{className:"btn btn-sm btn-success",onClick:function(){return p(!0)},children:Object(j.jsx)("i",{className:"fa fa-envelope"})}),Object(j.jsx)(re,{active:v,setActive:p,size:"md",title:"Contact ".concat((null===i||void 0===i?void 0:i.fullName)||(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.fullName),"  "),id:i._id,children:Object(j.jsx)(ft,{user:i,inMessage:!0,receiverName:(null===i||void 0===i?void 0:i.fullName)||(null===i||void 0===i||null===(n=i.user)||void 0===n?void 0:n.fullName),receiverEmail:(null===i||void 0===i?void 0:i.email)||(null===i||void 0===i||null===(s=i.user)||void 0===s?void 0:s.email)})})]}),a&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("li",{className:"list-inline-item",children:[Object(j.jsx)("button",{className:"btn btn-sm btn-primary",onClick:function(){return b(!0)},children:Object(j.jsx)("i",{className:"fa fa-edit"})}),Object(j.jsx)(re,{active:u,setActive:b,size:"md",title:"Update User Details",id:i._id,children:Object(j.jsx)(Ot,{user:i,stdRegNo:(null===i||void 0===i?void 0:i.regNo)||null,staffNo:(null===i||void 0===i?void 0:i.staffId)||null})})]}),Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)("button",{className:"btn btn-outline-danger btn-sm",type:"button",onClick:function(){return c(null===i||void 0===i?void 0:i._id,l)},children:Object(j.jsx)("i",{className:"fa fa-trash"})})})]})]})})},Nt=function(e){var t,n,s,r,a,c=e.user;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("td",{children:null===c||void 0===c?void 0:c._id}),Object(j.jsx)("td",{children:(null===c||void 0===c||null===(t=c.user)||void 0===t?void 0:t.firstName)||"--"}),Object(j.jsx)("td",{children:(null===c||void 0===c||null===(n=c.user)||void 0===n?void 0:n.lastName)||"--"}),Object(j.jsx)("td",{children:(null===c||void 0===c||null===(s=c.user)||void 0===s?void 0:s.email)||"--"}),Object(j.jsx)("td",{children:(null===c||void 0===c||null===(r=c.user)||void 0===r?void 0:r.role)||"STUDENT"}),Object(j.jsx)("td",{children:null===c||void 0===c?void 0:c.regNo}),Object(j.jsx)("td",{children:Object(te.default)(null===c||void 0===c||null===(a=c.user)||void 0===a?void 0:a.createdAt).toDateString()||"--"})]})},yt=function(e){var t,n,s,r,a,c=e.user;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("td",{children:null===c||void 0===c?void 0:c._id}),Object(j.jsx)("td",{children:(null===c||void 0===c||null===(t=c.user)||void 0===t?void 0:t.firstName)||"--"}),Object(j.jsx)("td",{children:(null===c||void 0===c||null===(n=c.user)||void 0===n?void 0:n.lastName)||"--"}),Object(j.jsx)("td",{children:(null===c||void 0===c||null===(s=c.user)||void 0===s?void 0:s.email)||"--"}),Object(j.jsx)("td",{children:(null===c||void 0===c||null===(r=c.user)||void 0===r?void 0:r.role)||"STAFF"}),Object(j.jsx)("td",{children:null===c||void 0===c?void 0:c.staffId}),Object(j.jsx)("td",{children:Object(te.default)(null===c||void 0===c||null===(a=c.user)||void 0===a?void 0:a.createdAt).toDateString()||"--"})]})},wt=function(e){var t=e.user;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("td",{children:null===t||void 0===t?void 0:t._id}),Object(j.jsx)("td",{children:(null===t||void 0===t?void 0:t.firstName)||"--"}),Object(j.jsx)("td",{children:(null===t||void 0===t?void 0:t.lastName)||"--"}),Object(j.jsx)("td",{children:(null===t||void 0===t?void 0:t.email)||"--"}),Object(j.jsx)("td",{children:(null===t||void 0===t?void 0:t.role)||"STUDENT"}),Object(j.jsx)("td",{children:Object(te.default)(null===t||void 0===t?void 0:t.createdAt).toDateString()||"--"})]})},kt=function(e){var t=e.users,n=e.canDelete,s=e.userRole,r=e.deleteFn;return Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{className:"bg-dark text-light",children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"ID"}),Object(j.jsx)("th",{children:"First Name"}),Object(j.jsx)("th",{children:"Last Name"}),Object(j.jsx)("th",{children:"Email"}),Object(j.jsx)("th",{children:"Role"}),"STUDENT"===s&&Object(j.jsx)("th",{children:"RegNo"}),"STAFF"===s&&Object(j.jsx)("th",{children:"Staff ID"}),Object(j.jsx)("th",{children:"Date Joined"}),Object(j.jsx)("th",{children:"Action"})]})}),Object(j.jsx)("tbody",{children:t&&t.map((function(e){return Object(j.jsxs)("tr",{children:["ALL"===s&&Object(j.jsx)(wt,{user:e}),"STUDENT"===s&&Object(j.jsx)(Nt,{user:e}),"STAFF"===s&&Object(j.jsx)(yt,{user:e}),Object(j.jsx)(gt,{user:e,canDelete:n,deleteFn:r,userRole:s})]},null===e||void 0===e?void 0:e._id)}))})]})},At=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={allUsers:[],users:[],students:[],staff:[],userRole:s.props.role||"ALL",alert:{},hasAlert:!1,showSelect:s.props.canSelect||!0},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.setUserRole=s.setUserRole.bind(Object(Q.a)(s)),s.setUsers=s.setUsers.bind(Object(Q.a)(s)),s.getAllStudents=s.getAllStudents.bind(Object(Q.a)(s)),s.getAllStaff=s.getAllStaff.bind(Object(Q.a)(s)),s.getAllUsers=s.getAllUsers.bind(Object(Q.a)(s)),s.canDeleteUsers=s.canDeleteUsers.bind(Object(Q.a)(s)),s.deleteUser=s.deleteUser.bind(Object(Q.a)(s)),s.deleteAllUsers=s.deleteAllUsers.bind(Object(Q.a)(s)),s.removeFromList=s.removeFromList.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"setUserRole",value:function(e){var t=e.target.value;this.setState({userRole:t}),this.setUsers(t)}},{key:"setUsers",value:function(e){if("STAFF"===e)this.setState({users:this.state.staff});else if("STUDENT"===e){var t,n=this.state.students,s=I.getUserEmail();if("SUPERVISOR"===I.getUserRole())n=null===(t=n)||void 0===t?void 0:t.filter((function(e){var t;return null===(t=e.projects)||void 0===t?void 0:t.filter((function(e){var t,n;return(null===(t=e.supervisor)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email)===s}))}));this.setState({users:n})}else this.setState({users:this.state.allUsers})}},{key:"getAllStudents",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getAll().then((function(e){e.error?t.setAlert(e.error):t.setState({students:e.data.data})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllStaff",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.getAll().then((function(e){e.error?t.setAlert(e.error):t.setState({staff:e.data.data})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllUsers",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.getAll().then((function(e){e.error?t.setAlert(e.error):t.setState({allUsers:e.data.data})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this ".concat(n,"?"))){e.next=23;break}if(ie(!0),s=null,"STUDENT"!==n){e.next=10;break}return e.next=7,Ae.delete(t);case 7:s=e.sent,e.next=19;break;case 10:if(!["EVALUATOR","SUPERVISOR","STAFF"].includes(n)){e.next=16;break}return e.next=13,oe.delete(t);case 13:s=e.sent,e.next=19;break;case 16:return e.next=18,ue.delete(t);case 18:s=e.sent;case 19:return s.error?this.setAlert(s.error):(this.setAlert({message:s.data.message,type:"success"}),this.removeFromList(n,t)),e.next=22,this.getAllUsers();case 22:ie(!1);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeFromList",value:function(e,t){"STUDENT"===e?this.setState({students:this.state.students.filter((function(e){return e._id!==t}))}):this.setState({staff:this.state.staff.filter((function(e){return e._id!==t}))})}},{key:"canDeleteUsers",value:function(){var e=I.getUserRole();return!!["ADMINISTRATOR","EVALUATOR"].includes(e)}},{key:"deleteAllUsers",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete all ".concat(t," ?"))){e.next=27;break}if(ie(!0),n=null,"STUDENT"!==t){e.next=10;break}return e.next=7,Ae.deleteAll();case 7:n=e.sent,e.next=13;break;case 10:return e.next=12,oe.deleteAll();case 12:n=e.sent;case 13:if(!n.error){e.next=17;break}this.setAlert(n.error),e.next=24;break;case 17:if("STUDENTS"!==t){e.next=22;break}return e.next=20,this.getAllStudents();case 20:e.next=24;break;case 22:return e.next=24,this.getAllStaff();case 24:return e.next=26,this.getAllUsers();case 26:ie(!1);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getAllUsers();case 3:return e.next=5,this.getAllStudents();case 5:return e.next=7,this.getAllStaff();case 7:this.setUsers(this.props.role||this.state.userRole),ie(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.users,s=t.alert,r=t.hasAlert,a=t.userRole,c=t.canSelect;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container-fluid p-1",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{}),Object(j.jsx)("h3",{children:"Users"}),Object(j.jsx)("div",{})]})}),Object(j.jsx)("div",{className:"col-md-12 my-2 mx-auto",children:Object(j.jsx)("div",{className:"card bg-transparent shadow",children:Object(j.jsxs)("div",{className:"card-body",children:[c&&Object(j.jsx)("div",{className:"card-text pull-left",children:Object(j.jsxs)("div",{className:"d-flex d-inline align-items-center",children:[Object(j.jsx)("label",{htmlFor:"userRole",style:{width:"120px"},children:"User Role"}),Object(j.jsxs)("select",{name:"userRole",id:"userRole",className:"form-control mx-1",defaultValue:a,onChange:this.setUserRole,children:[Object(j.jsx)("option",{value:"STUDENT",children:"Students"}),Object(j.jsx)("option",{value:"STAFF",children:"Staff"}),Object(j.jsx)("option",{value:"ALL",children:"ALL"})]})]})}),Object(j.jsx)("div",{className:"card-text pull-right",children:this.canDeleteUsers()&&Object(j.jsxs)("div",{className:"btn-group",children:[Object(j.jsxs)(l.b,{className:"btn btn-secondary mx-2",to:"/new-user",children:[Object(j.jsx)("i",{className:"fa fa-plus"}),Object(j.jsx)("span",{className:"mx-1",children:"New User"})]}),Object(j.jsxs)("button",{className:"btn btn-danger",onClick:function(){return e.deleteAllUsers(a)},children:[Object(j.jsx)("i",{className:"fa fa-trash text-light"})," Delete All"]})]})})]})})}),Object(j.jsx)("div",{className:"col-12",children:r&&Object(j.jsx)($,{alert:s,onClick:this.removeAlert()})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)(kt,{userRole:a,users:n,canDelete:this.canDeleteUsers(),deleteFn:this.deleteUser})})]})})})}}]),n}(r.Component),St=function(){return Object(j.jsx)(At,{role:"STUDENT",canSelect:!1})},Pt=function(){return Object(j.jsx)(At,{role:"STAFF",canSelect:!1})},Dt=function(){var e=I.getUserRole(),t=[];return t="ADMINISTRATOR"===e?["ADMINISTRATOR","EVALUATOR","SUPERVISOR","STUDENT"]:"EVALUATOR"===e?["EVALUATOR","SUPERVISOR","STUDENT"]:["STUDENT"],Object(j.jsx)(Se,{class:"admin-main",roles:t})},Ct=function(e){var t,n=e.comment;return Object(j.jsxs)("div",{className:"card bg-transparent shadow custom-card mb-2",children:[Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("blockquote",{className:"card-text blockquote",children:[Object(j.jsx)(ae,{text:null===n||void 0===n?void 0:n.message}),Object(j.jsxs)("span",{className:"blockquote-footer",children:["Posted On:",Object(j.jsx)("span",{children:Object(te.shortDate)(null===n||void 0===n?void 0:n.createdAt)})]})]})}),Object(j.jsx)("div",{className:"card-footer",children:Object(j.jsxs)("div",{className:"card-text pull-left",children:[Object(j.jsx)("i",{className:"fa fa-user"}),Object(j.jsx)("span",{className:"mx-1",children:null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.fullName})]})})]})},Et=function(e){return e.comments.map((function(e){return Object(j.jsx)(Ct,{comment:e},null===e||void 0===e?void 0:e._id)}))},Tt=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={comments:[],user:{},projectId:s.props.match.params.projectId,alert:{},hasAlert:!1,active:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.setActive=s.setActive.bind(Object(Q.a)(s)),s.getProjectAndComments=s.getProjectAndComments.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"setActive",value:function(e){this.setState({active:e}),e||this.getProjectAndComments()}},{key:"getProjectAndComments",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getOneById(this.state.projectId);case 2:(t=e.sent).error?this.setAlert(t.error):this.setState({project:t.data.data,comments:null===(n=t.data)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.comments});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getProjectAndComments();case 3:ie(!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.project,s=t.comments,r=t.alert,a=t.hasAlert,c=t.active;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{children:" "}),Object(j.jsx)("h3",{children:"Comments"}),Object(j.jsx)("h6",{children:null===n||void 0===n?void 0:n.name}),Object(j.jsx)("div",{children:" "})]})}),Object(j.jsx)("div",{className:"col-12 mb-2",children:a&&Object(j.jsx)($,{alert:r,onClick:this.removeAlert})}),Object(j.jsxs)("div",{className:"col-12 mb-2",children:[Object(j.jsx)("button",{className:"btn btn-sm btn-outline-secondary",onClick:function(){return e.setActive(!0)},children:"New Comment"}),Object(j.jsx)(re,{id:"new-comment",title:"Project: ".concat(null===n||void 0===n?void 0:n.name),active:c,setActive:this.setActive,size:"md",children:Object(j.jsx)(me,{projectId:null===n||void 0===n?void 0:n._id})})]}),Object(j.jsx)("div",{className:"col-12 mb-2",children:s&&Object(j.jsx)(Et,{comments:s})})]})})})}}]),n}(r.Component),It=function(e){var t=e.notifications,n=e.canDelete,s=e.deleteFun;return t.map((function(e){var t,r;return Object(j.jsxs)("div",{className:"card bg-transparent shadow custom-card ".concat(ee(null===e||void 0===e?void 0:e.type)," mb-2"),children:[Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h4",{className:"card-title",children:null===e||void 0===e?void 0:e.title}),Object(j.jsx)("p",{className:"card-text small",children:null===e||void 0===e?void 0:e.message})]}),Object(j.jsxs)("div",{className:"card-footer",children:[Object(j.jsxs)("div",{className:"card-text pull-left",children:[Object(j.jsx)("i",{className:"fa fa-user"}),Object(j.jsx)("span",{className:"mx-1",children:null===e||void 0===e||null===(t=e.postedBy)||void 0===t?void 0:t.fullName}),Object(j.jsxs)("small",{className:"text-muted text-italic",children:["(",null===e||void 0===e||null===(r=e.postedBy)||void 0===r?void 0:r.role,")"]})]}),n&&Object(j.jsx)("div",{className:"pull-right",children:Object(j.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){return s(e._id)},children:"Delete"})})]})]},e._id)}))},Ft=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/notifications");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/notifications/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/notifications",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllByType",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/notifications/type/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/notifications/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/notifications/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),Rt=function(){var e=Object(r.useState)({}),t=Object(X.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(!1),c=Object(X.a)(a,2),i=c[0],l=c[1],o=Object(r.useState)(null),d=Object(X.a)(o,2),u=d[0],b=d[1],h=Object(r.useState)("SYSTEM"),m=Object(X.a)(h,2),v=m[0],p=m[1],O=Object(r.useState)(null),x=Object(X.a)(O,2),N=x[0],y=x[1],w=Object(r.useState)(null),k=Object(X.a)(w,2),A=k[0],S=k[1];Object(r.useEffect)((function(){ue.getOneByEmail(I.getUserEmail()).then((function(e){S(e.data.data)})).catch((function(e){s(e)}))}),[]);var P=function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),t={title:u,message:N,userId:null===A||void 0===A?void 0:A._id,type:v},e.next=4,Ft.save(t);case 4:(n=e.sent).error?(s(n.error),l(!0)):(s({title:"Operation successful",message:n.data.message,type:"success"}),l(!0)),ie(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12",children:i&&Object(j.jsx)($,{alert:n,onClick:function(){s(null),l(!1)}})}),Object(j.jsxs)("div",{className:"col-12 my-2",children:[Object(j.jsxs)("div",{className:"form-group mb-1",children:[Object(j.jsx)("label",{htmlFor:"type",className:"form-label",children:"Notification Type"}),Object(j.jsx)("select",{name:"type",id:"type",className:"form-control",defaultValue:v,onChange:function(e){return p(e.target.value)},children:["SYSTEM","EVALUATOR","SUPERVISOR","STUDENT"].map((function(e){return Object(j.jsxs)("option",{value:e,children:[" ",e]})}))}),"SYSTEM"===v?Object(j.jsx)("span",{className:"form-text tex-info",children:"Notification will be send to all users"}):Object(j.jsxs)("span",{className:"form-text tex-info",children:["Notification will be send to users with role: ",v]})]}),Object(j.jsxs)("div",{className:"form-group mb-1",children:[Object(j.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),Object(j.jsx)("input",{type:"text",name:"title",id:"year",className:"form-control",onChange:function(e){return b(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"message",className:"form-label",children:"Message"}),Object(j.jsx)(he,{handleChangeFun:y})]}),Object(j.jsx)("button",{className:"btn btn-primary my-1",onClick:P,children:"Post Notification"})]})]})})},Ut=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={notifications:[],canDelete:!1,alert:{},hasAlert:!1,active:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.setActive=s.setActive.bind(Object(Q.a)(s)),s.getNotifications=s.getNotifications.bind(Object(Q.a)(s)),s.deleteNotification=s.deleteNotification.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"setActive",value:function(e){this.setState({active:e}),e||this.getNotifications()}},{key:"getNotifications",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.getUserRole(),e.next=3,Ft.getAll();case 3:(n=e.sent).error?this.setAlert(n.error):(s=n.data.data,"STUDENT"===t||"SUPERVISOR"===t?s=s.filter((function(e){return e.type===t||"SYSTEM"===e.type})):this.setState({canDelete:!0}),this.setState({notifications:s}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteNotification",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,Ft.delete(t).then((function(e){e.error?n.setAlert(e.error):(n.setState({notifications:n.state.notifications.filter((function(e){return e._id!==t}))}),n.setAlert({message:e.data.message,type:"info"}))}));case 3:ie(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getNotifications();case 3:ie(!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.notifications,s=t.alert,r=t.hasAlert,a=t.active,c=t.canDelete;return console.log({notifications:n}),Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{children:" "}),Object(j.jsx)("h3",{children:"Notifications"}),"ADMINISTRATOR"===I.getUserRole()||"EVALUATOR"===I.getUserRole()?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"btn btn-sm btn-outline-secondary",onClick:function(){return e.setActive(!0)},children:"New Notification"}),Object(j.jsx)(re,{id:"new-notification",title:"New Notification",active:a,setActive:this.setActive,size:"md",children:Object(j.jsx)(Rt,{})})]}):null,Object(j.jsx)("div",{})]})}),Object(j.jsx)("div",{className:"col-12 mb-2",children:r&&Object(j.jsx)($,{alert:s,onClick:this.removeAlert})}),Object(j.jsx)("div",{className:"col-md-8 mx-auto mb-2",children:n&&Object(j.jsx)(It,{notifications:n,canDelete:c,deleteFun:this.deleteNotification})})]})})})}}]),n}(r.Component),Mt=function(e){var t=e.projects,n=e.users,s=(null===n||void 0===n?void 0:n.filter((function(e){return"STUDENTS"===e.role})))||0,r=null===n||void 0===n?void 0:n.filter((function(e){return"EVALUATORS"===e.role})),a=null===n||void 0===n?void 0:n.filter((function(e){return"SUPERVISORS"===e.role})),c=null===t||void 0===t?void 0:t.filter((function(e){return Object(te.default)(e.createdAt).getFullYear()===(new Date).getFullYear()})),i=null===t||void 0===t?void 0:t.filter((function(e){return"FINISHED"===e.status})),l=null===t||void 0===t?void 0:t.filter((function(e){return"IN_PROGRESS"===e.status})),o=null===t||void 0===t?void 0:t.filter((function(e){return"WAITING_APPROVAL"===e.status})),d=null===t||void 0===t?void 0:t.filter((function(e){return"IN_PROGRESS"===e.status})),u=function(){return[{name:"Android",projects:null===t||void 0===t?void 0:t.filter((function(e){return"ANDROID"===e.category}))},{name:"Desktop",projects:null===t||void 0===t?void 0:t.filter((function(e){return"DESKTOP"===e.category}))},{name:"Web Based",projects:null===t||void 0===t?void 0:t.filter((function(e){return"WEB_BASED"===e.category}))},{name:"Networking",projects:null===t||void 0===t?void 0:t.filter((function(e){return"NETWORKING"===e.category}))},{name:"SECURITY",projects:null===t||void 0===t?void 0:t.filter((function(e){return"SECURITY"===e.category}))},{name:"OTHER",projects:null===t||void 0===t?void 0:t.filter((function(e){return"OTHER"===e.category}))}]};return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsx)("div",{className:"card bg-light",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h3",{className:"card-title",children:"Users"}),Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"All Users"}),Object(j.jsx)("th",{children:"Students"}),Object(j.jsx)("th",{children:"Evaluators"}),Object(j.jsx)("th",{children:"Supervisors"})]})}),Object(j.jsx)("tbody",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:(null===n||void 0===n?void 0:n.length)||0}),Object(j.jsx)("td",{children:(null===s||void 0===s?void 0:s.length)||0}),Object(j.jsx)("td",{children:(null===r||void 0===r?void 0:r.length)||0}),Object(j.jsx)("td",{children:(null===a||void 0===a?void 0:a.length)||0})]})})]})]})})}),Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsx)("div",{className:"card bg-light",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h3",{className:"card-title",children:"Projects"}),Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"All Time"}),Object(j.jsx)("th",{children:"This Year"}),Object(j.jsx)("th",{children:"Waiting Approval"}),Object(j.jsx)("th",{children:"In Progress"}),Object(j.jsx)("th",{children:"Complete"}),Object(j.jsx)("th",{children:"Overdue"})]})}),Object(j.jsx)("tbody",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:(null===t||void 0===t?void 0:t.length)||0}),Object(j.jsx)("td",{children:(null===c||void 0===c?void 0:c.length)||0}),Object(j.jsx)("td",{children:(null===o||void 0===o?void 0:o.length)||0}),Object(j.jsx)("td",{children:(null===l||void 0===l?void 0:l.length)||0}),Object(j.jsx)("td",{children:(null===i||void 0===i?void 0:i.length)||0}),Object(j.jsx)("td",{children:(null===d||void 0===d?void 0:d.length)||0})]})})]})]})})}),Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsx)("div",{className:"card bg-light",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h3",{className:"card-title",children:"Projects By Category"}),Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{children:u()&&u().map((function(e){return Object(j.jsx)("th",{children:e.name})}))})}),Object(j.jsx)("tbody",{children:Object(j.jsx)("tr",{children:u()&&u().map((function(e){return Object(j.jsx)("td",{children:e.projects.length})}))})})]})]})})})]})})},_t=n(106),Gt=n.n(_t),Lt=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{children:[Object(j.jsx)(Gt.a,{trigger:function(){return Object(j.jsxs)("div",{className:"my-2 p-1",children:[Object(j.jsx)("button",{className:"btn btn-sm btn-primary pull-right mr-1",children:Object(j.jsx)("i",{className:"fa fa-print",children:" Print "})}),Object(j.jsx)("div",{className:"clearfix"})]})},content:function(){return e.componentRef},documentTitle:"Academic Project Approval and Management System: Report for "+this.props.project.name+" Project"}),Object(j.jsx)("div",{ref:function(t){return e.componentRef=t},children:Object(j.jsx)(Ve,{project:this.props.project,user:this.props.user,projectSetting:this.props.projectSetting,thisYearSettings:this.props.thisYearSettings})})]})}}]),n}(a.a.PureComponent),Bt=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={projectId:s.props.projectId||s.props.match.params.projectId,project:{},user:{},thisYearSettings:[],projectSetting:{},projects:s.props.projects||[],showProjects:s.props.showProjects||!1,alert:{},hasAlert:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.setCurrentProject=s.setCurrentProject.bind(Object(Q.a)(s)),s.getProject=s.getProject.bind(Object(Q.a)(s)),s.getUser=s.getUser.bind(Object(Q.a)(s)),s.getThisYearSettings=s.getThisYearSettings.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"setCurrentProject",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({project:this.state.projects[t]||{}}),e.next=3,this.getThisYearSettings();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProject",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.projectId||this.props.match.params.projectId,e.next=3,F.getOneById(t);case 3:(n=e.sent).error?this.setAlert(n.error):(s=n.data.data,this.setState({project:s}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.getOneByEmail(I.getUserEmail()).then((function(e){var n;t.setState({user:null===(n=e.data)||void 0===n?void 0:n.data})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getThisYearSettings",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date(null===(t=this.state.project)||void 0===t?void 0:t.createdAt).getFullYear(),e.next=3,et.getAllByYear(n).then((function(e){var t,n,r;s.setState({thisYearSettings:(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)||[],projectSetting:(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.filter((function(e){return"PROJECT"===e.category}))[0])||null})})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getProject();case 3:return e.next=5,this.getUser();case 5:return e.next=7,this.getThisYearSettings();case 7:ie(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.projects,s=t.showProjects,r=t.project,a=t.user,c=t.thisYearSettings,i=t.projectSetting;return Object(j.jsxs)("div",{className:"admin-main",children:[Object(j.jsx)("div",{className:"mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{children:s&&Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"projectId",className:"form-label",children:"Select Project"}),Object(j.jsx)("select",{name:"projectId",id:"projectId",className:"form-control",onChange:function(t){return e.setCurrentProject(t.target.value)},children:n.map((function(e,t){return Object(j.jsx)("option",{value:t,children:e.name},t)}))})]})}),Object(j.jsx)("h3",{children:"Project Report"}),Object(j.jsx)("div",{})]})}),Object(j.jsx)(Lt,{project:r,user:a,thisYearSettings:c,projectSetting:i})]})}}]),n}(r.Component),Vt=function(e){var t,n=e.report,s=e.projects,r=e.users;return"Project Status"===n?"STUDENT"!==I.getUserRole()?Object(j.jsx)(Bt,{projects:s,projectId:null===(t=s[0])||void 0===t?void 0:t._id,showProjects:!0}):null:Object(j.jsx)(Mt,{projects:s,users:r})},Ht=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).setReport=function(e){s.setState({report:e.target.value})},s.state={reports:["General","Project Status"],report:1,projects:[],project:0,users:[]},s.setReport=s.setReport.bind(Object(Q.a)(s)),s.getAllProjects=s.getAllProjects.bind(Object(Q.a)(s)),s.getAllUsers=s.getAllUsers.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"getAllProjects",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getAll().then((function(e){var n;t.setState({projects:(null===(n=e.data)||void 0===n?void 0:n.data)||null})})).catch((function(e){console.log({err:e})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllUsers",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getAll().then((function(e){var n;t.setState({users:(null===(n=e.data)||void 0===n?void 0:n.data)||null})})).catch((function(e){console.log({err:e})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getAllProjects();case 3:return e.next=5,this.getAllUsers();case 5:ie(!1);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.reports,n=e.report,s=e.projects,r=e.users;return Object(j.jsxs)("div",{className:"admin-main",children:[Object(j.jsxs)("div",{className:"container mb-2",children:[Object(j.jsx)("div",{className:"row mb-2",children:Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{children:" "}),Object(j.jsx)("h3",{children:"Reports"}),Object(j.jsx)("div",{children:" "})]})})}),Object(j.jsx)("div",{className:"row shadow",children:Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsx)("div",{className:"pull-left",children:Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"report",className:"form-label",children:"Select Report"}),Object(j.jsx)("select",{name:"report",id:"report",className:"form-control",onChange:this.setReport,children:t.map((function(e,t){return Object(j.jsx)("option",{value:e,children:e},t)}))})]})})})})]}),Object(j.jsx)(Vt,{report:n,projects:s,users:r})]})}}]),n}(r.Component),Yt=function(e){var t=e.setting,n=e.isEdit,s=Object(r.useState)({}),a=Object(X.a)(s,2),c=a[0],i=a[1],l=Object(r.useState)(!1),o=Object(X.a)(l,2),d=o[0],u=o[1],b=Object(r.useState)(null),h=Object(X.a)(b,2),m=h[0],v=h[1],p=Object(r.useState)(null),O=Object(X.a)(p,2),x=O[0],N=O[1],y=Object(r.useState)(null),w=Object(X.a)(y,2),k=w[0],A=w[1],S=Object(r.useState)(null),P=Object(X.a)(S,2),D=P[0],C=P[1],E=function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),t={year:x,category:m,startDate:k,endDate:D},e.next=4,et.save(t);case 4:(n=e.sent).error?(i(n.error),u(!0)):(i({title:"Operation successful",message:n.data.message,type:"success"}),u(!0)),ie(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(g.a)(f.a.mark((function e(){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),n={year:x||(null===t||void 0===t?void 0:t.year),category:m||(null===t||void 0===t?void 0:t.category),startDate:k||(null===t||void 0===t?void 0:t.startDate),endDate:D||(null===t||void 0===t?void 0:t.endDate)},console.log(n,t._id),e.next=5,et.update(t._id,n);case 5:(s=e.sent).error?(i(s.error),u(!0)):(i({title:"Operation successful",message:s.data.message,type:"success"}),u(!0)),ie(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12",children:d&&Object(j.jsx)($,{alert:c,onClick:function(){i(null),u(!1)}})}),Object(j.jsxs)("div",{className:"col-12 my-2",children:[Object(j.jsxs)("div",{className:"form-group mb-1",children:[Object(j.jsx)("label",{htmlFor:"year",className:"form-label",children:"Year"}),Object(j.jsx)("input",{type:"number",name:"year",id:"year",className:"form-control",defaultValue:null===t||void 0===t?void 0:t.year,onChange:function(e){return N(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"category",className:"form-label",children:"Setting Category"}),Object(j.jsxs)("select",{name:"category",id:"category",className:"form-control",defaultValue:null===t||void 0===t?void 0:t.category,onChange:function(e){return v(e.target.value)},children:[Object(j.jsx)("option",{value:"",children:"Select Category"}),Object(j.jsx)("option",{value:"PROJECT",children:"Project Submission"}),Object(j.jsx)("option",{value:"PROPOSAL",children:"Proposal Submission"}),Object(j.jsx)("option",{value:"SRS",children:"SRS Submission"}),Object(j.jsx)("option",{value:"SDD",children:"SDD Submission"}),Object(j.jsx)("option",{value:"TEST_PLAN",children:"Test Plan Submission"}),Object(j.jsx)("option",{value:"USER_MANUAL",children:"User manual Submission"})]})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"startDate",className:"form-label",children:"Start Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",id:"startDate",name:"startDate",defaultValue:Object(te.shortDate)(null===t||void 0===t?void 0:t.startDate),onChange:function(e){return A(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"endDate",className:"form-label",children:"End Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",id:"endDate",name:"endDate",defaultValue:Object(te.shortDate)(null===t||void 0===t?void 0:t.endDate),onChange:function(e){return C(e.target.value)}})]}),n?Object(j.jsx)("button",{className:"btn btn-primary my-1",onClick:T,children:"Update Setting"}):Object(j.jsx)("button",{className:"btn btn-primary my-1",onClick:E,children:"Post Setting"})]})]})})},qt=function(e){var t=e.setting,n=e.canDelete,s=e.delFun,a=Object(r.useState)(!1),c=Object(X.a)(a,2),i=c[0],l=c[1];return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t._id}),Object(j.jsx)("td",{children:t.category}),Object(j.jsx)("td",{children:Object(te.default)(null===t||void 0===t?void 0:t.startDate).toDateString()||"--"}),Object(j.jsx)("td",{children:Object(te.default)(null===t||void 0===t?void 0:t.endDate).toDateString()||"--"}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("input",{type:"checkbox",name:"setting",id:t._id,checked:t.isActive,disabled:!0})}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("ul",{className:"list-inline",children:n&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("li",{className:"list-inline-item",children:[Object(j.jsx)("button",{className:"btn btn-primary mx-2",onClick:function(){return l(!0)},children:Object(j.jsx)("i",{className:"fa fa-edit"})}),Object(j.jsx)(re,{active:i,setActive:l,size:"md",title:"Update Settings",id:null===t||void 0===t?void 0:t._id,children:Object(j.jsx)(Yt,{setting:t,isEdit:!0})})]}),Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)("button",{className:"btn btn-danger btn-sm",type:"button",onClick:function(){return s(t._id)},children:Object(j.jsx)("i",{className:"fa fa-trash"})})})]})})})]})},Wt=function(e){var t=e.settings,n=e.canDelete,s=e.deleteFun,a=Object(r.useState)({}),c=Object(X.a)(a,2),i=c[0],l=c[1],o=Object(r.useState)(!1),d=Object(X.a)(o,2),u=d[0],b=d[1];return Object(j.jsxs)("table",{className:"table table-bordered",children:[Object(j.jsx)("thead",{className:"bg-dark text-light",children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Category"}),Object(j.jsx)("th",{children:"Start Date"}),Object(j.jsx)("th",{children:"End Date"}),Object(j.jsx)("th",{children:"Active"}),Object(j.jsx)("th",{children:"Action"})]})}),Object(j.jsxs)("tbody",{children:[Object(j.jsx)("tr",{children:Object(j.jsx)("td",{colSpan:"7",children:u&&Object(j.jsx)($,{alert:i,onClick:function(){l(null),b(!1)}})})}),t&&t.map((function(e){return Object(j.jsx)(qt,{setting:e,canDelete:n,delFun:s},e._id)}))]})]})},zt=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={settings:[],alert:{},hasAlert:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.setActive=s.setActive.bind(Object(Q.a)(s)),s.isSuperUser=s.isSuperUser.bind(Object(Q.a)(s)),s.getAllSettingsByYear=s.getAllSettingsByYear.bind(Object(Q.a)(s)),s.deleteSetting=s.deleteSetting.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"setActive",value:function(e){this.setState({active:e}),e||this.getAllSettingsByYear()}},{key:"getAllSettingsByYear",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new Date).getFullYear(),e.next=3,et.getAllByYear(t).then((function(e){e.error?n.setAlert(e.error):n.setState({settings:e.data.data})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"isSuperUser",value:function(){return"EVALUATOR"===I.getUserRole()||"ADMINISTRATOR"===I.getUserRole()}},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getAllSettingsByYear();case 3:ie(!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteSetting",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this setting")){e.next=9;break}return ie(!0),e.next=5,et.delete(t);case 5:(n=e.sent).error?this.setAlert(n.error):(this.state.settings=this.state.settings.filter((function(e){return e._id!==t})),this.setAlert({title:"Operation successful",message:n.data.message,type:"success"})),this.getAllSettingsByYear(),ie(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.settings,s=t.alert,r=t.hasAlert,a=t.active;return Object(j.jsxs)("div",{className:"admin-main",children:[Object(j.jsxs)("div",{className:"container",children:[Object(j.jsxs)("div",{className:"row mb-2",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{children:" "}),Object(j.jsx)("h3",{children:"Settings"}),Object(j.jsx)("div",{children:" "})]})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("p",{className:"lead",children:"Sets the submission periods of projects and project files"})})]}),Object(j.jsxs)("div",{className:"row shadow",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsx)("div",{className:"pull-right pt-4",children:Object(j.jsx)("ul",{className:"list-inline",children:Object(j.jsxs)("li",{className:"list-inline-item",children:[Object(j.jsxs)("button",{className:"btn btn-primary mx-2",onClick:function(){return e.setActive(!0)},children:[Object(j.jsx)("i",{className:"fa fa-plus"})," New Setting"]}),Object(j.jsx)(re,{active:a,setActive:this.setActive,size:"md",title:"New Settings",id:"new-setting",children:Object(j.jsx)(Yt,{})})]})})})}),Object(j.jsx)("div",{className:"col-12",children:r&&Object(j.jsx)($,{alert:s,onClick:this.removeAlert})})]})]}),Object(j.jsx)(Wt,{settings:n,canDelete:this.isSuperUser,deleteFun:this.deleteSetting})]})}}]),n}(r.Component),Jt=function(e){var t=e.body,n=e.developer,s=e.token,r=e.role;return s?Object(j.jsx)(Y,{role:r,children:Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)(Kt,{body:t,developer:n})})}):Object(j.jsx)(H,{children:Object(j.jsx)(Kt,{body:t,developer:n})})},Kt=function(e){var t=e.body,n=e.developer;return Object(j.jsx)("div",{className:"not-found py-2",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h4",{className:"card-title",children:"PAGE NOT FOUND"}),Object(j.jsx)("p",{className:"card-text",children:"Sorry, but we are unable to retrieve that page."}),Object(j.jsxs)("p",{className:"card-text",children:["Ensure that the URL is correct and try again. ",Object(j.jsx)("br",{}),"If the problem persists or you think the URL is correct, please contact the developer."]}),Object(j.jsx)("p",{children:Object(j.jsx)(l.b,{to:"/",className:"card-link",children:"Go Homepage"})})]}),Object(j.jsxs)("div",{className:"card-footer bg-transparent",children:[Object(j.jsx)("h6",{className:"text-center",children:"Developed By"}),Object(j.jsx)("p",{children:n.name}),Object(j.jsx)("p",{className:"card-text",children:Object(j.jsxs)("a",{href:"mailto:".concat(n.email,"?Subject=PAGE%20NOT%20FOUND&Message=").concat(t,"&Body=").concat(t),children:[Object(j.jsx)("i",{className:"fa fa-envelope mx-1"}),"Email: ",n.email]})})]})]})})})})})},Qt=function(){var e={name:"Jeremiah Siranjofu Wachiye",email:"siranjofuw@gmail.com"},t=Object(r.useState)(null),n=Object(X.a)(t,2),s=n[0],a=n[1],c=Object(r.useState)(null),i=Object(X.a)(c,2),l=i[0],o=i[1],d=Object(r.useState)(null),u=Object(X.a)(d,2),b=u[0],h=u[1],m=Object(r.useState)(null),v=Object(X.a)(m,2),p=v[0],O=v[1];return Object(r.useEffect)((function(){var t=window.location,n="Hi ".concat(e.name,", \r\n I am having trouble accessing the link ").concat(s,". Please help."),r=I.getToken(),c=I.getUserRole();a(t),o(n),h(r),O(c)}),[e.name,s]),Object(j.jsx)(Jt,{role:p,token:b,body:l,developer:e})},$t=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("main",{className:"main",children:[Object(j.jsxs)("div",{className:"container text-center",children:[Object(j.jsx)("h1",{className:"text-success",children:"Contact Us"}),Object(j.jsx)("p",{className:"text-muted",children:"Need Help? Please fill out this form and we will get back to you as soon as possible"})]}),Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-6",children:Object(j.jsx)(ft,{})}),Object(j.jsx)("div",{className:"col-md-6",children:Object(j.jsx)("div",{className:"card shadow bg-light",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h4",{className:"card-title",children:"Direct Contact"}),Object(j.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("i",{className:"fa fa-envelope","aria-hidden":"true"}),Object(j.jsx)("span",{className:"mx-1",children:"Email"}),": ",Object(j.jsx)("span",{className:"pull-right",children:Object(j.jsx)("a",{className:"card-link",href:"mailto:".concat(A,"?Subject=APAMS%20CONTACT%20FORM"),children:A})})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("i",{className:"fa fa-phone","aria-hidden":"true"}),Object(j.jsx)("span",{className:"mx-1",children:"Phone"}),": ",Object(j.jsx)("span",{className:"pull-right",children:Object(j.jsx)("a",{className:"card-link",href:"tel:".concat(S),children:S})})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("i",{className:"fa fa-address-card","aria-hidden":"true"}),Object(j.jsx)("span",{className:"mx-1",children:"Address"}),": ",Object(j.jsx)("span",{className:"pull-right",children:Object(j.jsx)("address",{children:P})})]})]})]})})})]})})]})}}]),n}(r.Component),Xt=function(){var e=Object(r.useState)(!1),t=Object(X.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(null),c=Object(X.a)(a,2),i=c[0],o=c[1];Object(r.useEffect)((function(){var e=I.getUserEmail();ue.getOneByEmail(e).then((function(e){var t;o((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)||null)}))}),[]);var d=function(e){var t=e.target.getAttribute("data-target");u("help-item",t)},u=function(e,t){v(".".concat(e)).removeClass("active"),v("#".concat(t)).toggleClass("active")};return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{children:" "}),Object(j.jsx)("h3",{children:"Help"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{className:"btn btn-sm btn-outline-secondary",onClick:function(){return s(!0)},children:"Contact Us"}),Object(j.jsx)(re,{id:"new-comment",title:"Contact Us",active:n,setActive:s,size:"md",children:Object(j.jsx)(ft,{user:i})})]})]})}),Object(j.jsxs)("div",{className:"col-12 col-md-10 mx-auto",children:[Object(j.jsx)("div",{className:"card bg-transparent border-0 mb-1",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h4",{className:"card-title text-muted",children:"Academic Project Approval and Management System"}),Object(j.jsx)("p",{children:"Academic Project Approval and Management System is a web-based software application. The main purpose of this system is to automate all the project-management operations in academics and create an effective and efficient platform for students and their project supervisors and evaluators."})]})}),Object(j.jsx)("div",{className:"card bg-transparent border-0 mb-2",children:Object(j.jsx)("div",{id:"account-management",className:"card-body ",children:Object(j.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("h5",{className:"pull-left text-primary pull-left",children:"Getting Started"}),Object(j.jsx)("span",{className:"btn btn-sm btn-primary pull-right","data-target":"getting-started",onClick:function(e){return d(e)},children:Object(j.jsx)("i",{className:"fa fa-plus"})}),Object(j.jsx)("div",{className:"clearfix"}),Object(j.jsxs)("div",{id:"getting-started",className:"help-item",children:[Object(j.jsxs)("div",{children:["The System is designed to be used by different types of users, with features and functions appropriate for each one. The system will support fours types of user: Administrator, Evaluator, Supervisor and Student. ",Object(j.jsx)("br",{}),Object(j.jsxs)("ul",{style:{listStyle:"inside"},children:[Object(j.jsx)("li",{children:"Administrators have full control over the entire system."}),Object(j.jsx)("li",{children:"Evaluators can approve projects, allocate project supervisors, evaluate the project progress and grading."}),Object(j.jsx)("li",{children:"Supervisors can guide students on the project, review and approve project files, oversee project progress and"}),Object(j.jsx)("li",{children:"Students can submit project ideas and related files, use the system for managing and track the progress their projects."})]})]}),Object(j.jsx)("p",{children:"Only students will be allowed to register publicly. Project Evaluators will be added by the system administrators. Project Supervisors will be added by Project Evaluators."}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"To Create a Student Account:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ul",{style:{listStyle:"inside"},children:[Object(j.jsxs)("li",{children:["Go to the ",Object(j.jsx)(l.b,{className:"card-link",to:"/",children:"Homepage"})]}),Object(j.jsxs)("li",{children:["Select ",Object(j.jsx)("b",{children:"Register"})," on the Top Navigation Bar or Click the large ",Object(j.jsx)("strong",{children:"Get Started"})," button available on the homepage"]}),Object(j.jsxs)("li",{children:["Enter your Names(First and Last Names), valid email address, Registration Number and select a memorable password. ",Object(j.jsx)("em",{className:"text-info",children:"Registration number and Email should be unique to the system"})]}),Object(j.jsxs)("li",{children:["Hit the ",Object(j.jsx)("strong",{children:"Register"})," button to submit your details"]}),Object(j.jsx)("li",{children:"Wait for the server response."}),Object(j.jsx)("li",{children:"Your registration verification link will be send to the provided email. You must click the link to verify and activate your account"}),Object(j.jsx)("li",{children:"Upon successful registration, you will be able to login your account  using the provided email and password "})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"To Create Administrator/Evaluator/Supervisor Account:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ul",{style:{listStyle:"inside"},children:[Object(j.jsxs)("li",{children:["Actor (",Object(j.jsx)("strong",{children:"Administrator "}),"/ ",Object(j.jsx)("strong",{children:"Evaluator"}),") has be Authenticated and Authorized to perform this action."]}),Object(j.jsxs)("li",{children:[Object(j.jsx)(l.b,{className:"card-link",to:"/login",children:"Login"})," to your account using your email and password."]}),Object(j.jsxs)("li",{children:["On the ",Object(j.jsx)("strong",{children:"Dashboard Menu"}),", Select ",Object(j.jsx)("strong",{children:"Users/Students/Staff"})]}),Object(j.jsxs)("li",{children:["Select ",Object(j.jsx)("strong",{children:"New User"})," button."]}),Object(j.jsxs)("li",{children:["Enter the Names(First and Last Names), valid email address, Registration Number/Staff Id and select a memorable password. ",Object(j.jsx)("em",{className:"text-info",children:"Registration number/Staff ID and Email should be unique to the system"})]}),Object(j.jsxs)("li",{children:["Hit the ",Object(j.jsx)("strong",{children:"Register"})," button to submit the details"]}),Object(j.jsx)("li",{children:"Wait for the server response."}),Object(j.jsx)("li",{children:"A registration verification link will be send to the provided email. User must click the link to verify and activate their account"}),Object(j.jsx)("li",{children:"Upon successful registration, the registered user will be able to login to their  account  using the provided email and password "})]})]})]})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("h5",{className:"pull-left text-primary pull-left",children:"System Login"}),Object(j.jsx)("span",{className:"btn btn-sm btn-primary pull-right","data-target":"system-login",onClick:function(e){return d(e)},children:Object(j.jsx)("i",{className:"fa fa-plus"})}),Object(j.jsx)("div",{className:"clearfix"}),Object(j.jsxs)("div",{id:"system-login",className:"help-item",children:[Object(j.jsxs)("p",{children:["To login, you must have ",Object(j.jsx)("a",{href:"#get-started",children:"a registered and confirmed user account"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"To Login to your Account:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ul",{style:{listStyle:"inside"},children:[Object(j.jsxs)("li",{children:["Go to the ",Object(j.jsx)(l.b,{className:"card-link",to:"/",children:"Homepage"})]}),Object(j.jsxs)("li",{children:["On the Navigation bar, Select ",Object(j.jsx)(l.b,{className:"card-link",to:"/login",children:"Login"}),"."]}),Object(j.jsxs)("li",{children:["Enter your ",Object(j.jsx)("strong",{children:"email and password"})]}),Object(j.jsxs)("li",{children:["Hit the ",Object(j.jsx)("strong",{children:"Login"})," button and wait for the server to authenticate and authorize your details"]}),Object(j.jsx)("li",{children:"If login is successful, you will be automatically be redirected to your dashboard. Otherwise, an error message will be shown as appropriate"})]})]})]})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("h5",{className:"pull-left text-primary pull-left",children:"Forgot Password"}),Object(j.jsx)("span",{className:"btn btn-sm btn-primary pull-right","data-target":"forgot-password",onClick:function(e){return d(e)},children:Object(j.jsx)("i",{className:"fa fa-plus"})}),Object(j.jsx)("div",{className:"clearfix"}),Object(j.jsxs)("div",{id:"forgot-password",className:"help-item",children:[Object(j.jsx)("p",{children:"Even though you may have previously used a memorable password, it is possible to forget it."}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"To Reset your lost password:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ul",{style:{listStyle:"inside"},children:[Object(j.jsxs)("li",{children:["Go to the ",Object(j.jsx)(l.b,{className:"card-link",to:"/",children:"Homepage"})]}),Object(j.jsxs)("li",{children:["On the Navigation bar, Select ",Object(j.jsx)(l.b,{className:"card-link",to:"/login",children:"Login"}),"."]}),Object(j.jsxs)("li",{children:["On the login page, Select ",Object(j.jsx)("strong",{children:"Forgot Password"})," "]}),Object(j.jsx)("li",{children:"Enter the email you provided during registration"}),Object(j.jsxs)("li",{children:["Hit the ",Object(j.jsx)("strong",{children:"Reset Password"})," button and wait for the server send a random password to your email"]}),Object(j.jsx)("li",{children:"Use the new password as your password to login."}),Object(j.jsxs)("li",{children:["Remember to ",Object(j.jsx)("a",{href:"manage-account-info",children:"change your password"})," after successful login"]})]})]})]})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("h5",{className:"pull-left text-primary pull-left",children:"Managing Account Information"}),Object(j.jsx)("span",{className:"btn btn-sm btn-primary pull-right","data-target":"managing-account-info",onClick:function(e){return d(e)},children:Object(j.jsx)("i",{className:"fa fa-plus"})}),Object(j.jsx)("div",{className:"clearfix"}),Object(j.jsxs)("div",{id:"manage-account-info",className:"help-item",children:[Object(j.jsx)("p",{children:"Each user has the privilege to manage(View/edit/delete) their account"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"To Manage your Account:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ul",{style:{listStyle:"inside"},children:[Object(j.jsxs)("li",{children:["On the ",Object(j.jsx)("strong",{children:"Dashboard Menu"}),", Select ",Object(j.jsx)("strong",{children:"Profile"}),". Profile Page will appear"]}),Object(j.jsx)("li",{children:"You can enter new details or change your password on the profile page"})]})]})]})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("h5",{className:"pull-left text-primary pull-left",children:"Opening Project Journal"}),Object(j.jsx)("button",{className:"btn btn-sm btn-primary pull-right","data-target":"project-journal",onClick:function(e){return d(e)},children:Object(j.jsx)("i",{className:"fa fa-plus"})}),Object(j.jsx)("div",{className:"clearfix"}),Object(j.jsxs)("div",{id:"project-journal",className:"help-item",children:[Object(j.jsx)("p",{children:"Opening Project Journal is to create new project. The project will be visible to the student and their Evaluator. The Evaluator will be able to review the project and approve or provide feedback/comments on the project."}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"NOTE:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ol",{style:{listStyle:"inside"},start:1,children:[Object(j.jsx)("li",{children:"Only Students can open a project journal"}),Object(j.jsx)("li",{children:"Project Evaluators must be registered in the system"}),Object(j.jsx)("li",{children:"Students will only be allowed to open project journals during the specified period. (Set by the Evaluator)"})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"To Open a Project Journal / Create a new project:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ul",{style:{listStyle:"inside"},children:[Object(j.jsxs)("li",{children:["On the ",Object(j.jsx)("strong",{children:"Dashboard Menu"}),", Select ",Object(j.jsx)("strong",{children:"New Project"}),". New Project page will appear"]}),Object(j.jsx)("li",{children:"Enter the details of the project as required"}),Object(j.jsxs)("li",{children:["Hit the ",Object(j.jsx)("strong",{children:"Submit Project"})," button and wait for the server response"]}),Object(j.jsx)("li",{children:"If the project is created successfully, the selected Evaluator will receive a confirmation email that will prompt him/her to check the project details for approval"}),Object(j.jsxs)("li",{children:[Object(j.jsxs)("em",{className:"text-info",children:["To view your created project, click on the ",Object(j.jsx)("strong",{children:"My Projects"})," button available on the New Project Page"]})," Or ",Object(j.jsx)("br",{}),"On the ",Object(j.jsx)("strong",{children:"Dashboard Menu"}),", Select ",Object(j.jsx)("strong",{children:"My Projects"}),". A new page will appear with a listing of your projects and links to other details."]})]})]})]})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("h5",{className:"pull-left text-primary pull-left",children:"Approving Projects"}),Object(j.jsx)("button",{className:"btn btn-sm btn-primary pull-right","data-target":"approving-projects",onClick:function(e){return d(e)},children:Object(j.jsx)("i",{className:"fa fa-plus"})}),Object(j.jsx)("div",{className:"clearfix"}),Object(j.jsxs)("div",{id:"approving-projects",className:"help-item",children:[Object(j.jsxs)("p",{children:["All projects will have a status of ",Object(j.jsx)("em",{children:"WAITING APPROVAL"})," until approved. An approved project will have a status of ",Object(j.jsx)("em",{children:"ACCEPTED"})," while a rejected project will have a status of ",Object(j.jsx)("em",{children:"REJECTED"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"NOTE:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ol",{style:{listStyle:"inside"},start:1,children:[Object(j.jsxs)("li",{children:["Only Project Evaluators can view and/or approve  or reject all projects with  ",Object(j.jsx)("em",{children:"WAITING APPROVAL"})," status. However, students can view their individual projects regardless of the status unless otherwise deleted"]}),Object(j.jsx)("li",{children:"Supervisor cannot be assigned to a project that has not been ACCEPTED"})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"To Approve Pending Projects:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ul",{style:{listStyle:"inside"},children:[Object(j.jsxs)("li",{children:["On the ",Object(j.jsx)("strong",{children:"Dashboard Menu"}),", Select ",Object(j.jsx)("strong",{children:"Approve Projects"}),". A new Project page will appear listing all projects with a status of ",Object(j.jsx)("em",{children:"WAITING APPROVAL"})]}),Object(j.jsxs)("li",{children:["For each project that you wish to approve, Hit the ",Object(j.jsx)("strong",{children:"Approve"})," button next to it. You can also view the project details by clicking the ",Object(j.jsx)("strong",{children:"View"})," button next to it."]}),Object(j.jsx)("li",{children:"Once a project has been accepted by the Evaluator, the respective student will be notified via email."})]})]})]})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("h5",{className:"pull-left text-primary pull-left",children:"Creating Milestone"}),Object(j.jsx)("button",{className:"btn btn-sm btn-primary pull-right","data-target":"creating-milestones",onClick:function(e){return d(e)},children:Object(j.jsx)("i",{className:"fa fa-plus"})}),Object(j.jsx)("div",{className:"clearfix"}),Object(j.jsxs)("div",{id:"creating-milestones",className:"help-item",children:[Object(j.jsx)("p",{children:"Project milestones are checkpoints in the project that measure the progress of the project"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"NOTE:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ol",{style:{listStyle:"inside"},start:1,children:[Object(j.jsx)("li",{children:"Only students can create a project milestone"}),Object(j.jsx)("li",{children:"Project milestones will be visible to the student, supervisor and evaluator"})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"To Create a Project Milestone:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ul",{style:{listStyle:"inside"},children:[Object(j.jsxs)("li",{children:["On the ",Object(j.jsx)("strong",{children:"Dashboard Menu"}),", Select ",Object(j.jsx)("strong",{children:"My Projects"}),". A new page will appear listing all your projects "]}),Object(j.jsxs)("li",{children:["On the dropdown list ",Object(j.jsx)("strong",{children:"Select the project you want to add milestone"})]}),Object(j.jsxs)("li",{children:["On the tab menu below the dropdown list, ",Object(j.jsx)("strong",{children:"Click Milestones"}),". A new page will appear listing all milestones available in the project if any."]}),Object(j.jsxs)("li",{children:["On to top right ",Object(j.jsx)("strong",{children:"Click New Milestone"})," button to display a pop window."]}),Object(j.jsxs)("li",{children:["Enter the required details and click the ",Object(j.jsx)("strong",{children:" Create Milestone"})," button."]})]})]})]})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("h5",{className:"pull-left text-primary pull-left",children:"Creating Tasks"}),Object(j.jsx)("button",{className:"btn btn-sm btn-primary pull-right","data-target":"creating-tasks",onClick:function(e){return d(e)},children:Object(j.jsx)("i",{className:"fa fa-plus"})}),Object(j.jsx)("div",{className:"clearfix"}),Object(j.jsxs)("div",{id:"creating-tasks",className:"help-item",children:[Object(j.jsx)("p",{children:"Tasks are actual project activities done under a particular project milestone"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"NOTE:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ol",{style:{listStyle:"inside"},start:1,children:[Object(j.jsx)("li",{children:"A task can only exist in a project milestone"}),Object(j.jsx)("li",{children:"Only student owner of the project can create/manage the project tasks"})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"To Create a Task:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ul",{style:{listStyle:"inside"},children:[Object(j.jsxs)("li",{children:["Navigate to the project milestones as described in the ",Object(j.jsx)("a",{href:"#creating-milestones",children:"Create Milestone"})," section."]}),Object(j.jsx)("li",{children:"If no milestone is present, create a new milestone and proceed below"}),Object(j.jsxs)("li",{children:["Click the ",Object(j.jsx)("strong",{children:"+"})," button next to the milestone under which your task will belong. A new section will appear below the milestone listing all task in the milestone"]}),Object(j.jsxs)("li",{children:["Click the ",Object(j.jsx)("strong",{children:"New Task"})," button. A new pop up"]}),Object(j.jsxs)("li",{children:["Enter the required details and click the ",Object(j.jsx)("strong",{children:" Create Task"})," button."]}),Object(j.jsx)("li",{children:"Refresh the page to view your newly created task"})]})]})]})]}),Object(j.jsxs)("li",{className:"list-group-item",children:[Object(j.jsx)("h5",{className:"pull-left text-primary pull-left",children:"Uploading Project File"}),Object(j.jsx)("button",{className:"btn btn-sm btn-primary pull-right","data-target":"uploading-project-files",onClick:function(e){return d(e)},children:Object(j.jsx)("i",{className:"fa fa-plus"})}),Object(j.jsx)("div",{className:"clearfix"}),Object(j.jsxs)("div",{id:"uploading-project-files",className:"help-item",children:[Object(j.jsx)("p",{children:"Project Files are the documentations such as Project Proposal, SRS, SDD and Manuals"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"NOTE:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ol",{style:{listStyle:"inside"},start:1,children:[Object(j.jsx)("li",{children:"Only student owner of the project can submit the project files"}),Object(j.jsx)("li",{children:"Project Supervisor or Evaluator can approve or reject files"})]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{children:"To Upload a Project File:"})," ",Object(j.jsx)("br",{}),Object(j.jsxs)("ul",{style:{listStyle:"inside"},children:[Object(j.jsxs)("li",{children:["On the ",Object(j.jsx)("strong",{children:"Dashboard Menu"}),", Select ",Object(j.jsx)("strong",{children:"My Projects"}),". A new page will appear listing all your projects "]}),Object(j.jsxs)("li",{children:["On the dropdown list ",Object(j.jsx)("strong",{children:"Select the project you want to add file"})]}),Object(j.jsxs)("li",{children:["On the tab menu below the dropdown list, ",Object(j.jsx)("strong",{children:"Click Files"}),". A new page will appear listing all files available in the project if any."]}),Object(j.jsxs)("li",{children:["On to top right ",Object(j.jsx)("strong",{children:"Click New File"})," button to display a pop window."]}),Object(j.jsxs)("li",{children:["Enter the required details and click the ",Object(j.jsx)("strong",{children:" Upload File"})," button."]})]})]})]})]})]})})})]})]})})})},Zt=function(e){var t,n,s,r,a=e.file,c=e.canApprove,i=void 0!==c&&c,o=e.approveFileFun,d=e.canDelete,u=void 0!==d&&d,b=e.deleteFileFun;return Object(j.jsxs)("div",{className:"card bg-transparent shadow h-100 custom-card ".concat(ee(null===a||void 0===a?void 0:a.status)),children:[Object(j.jsx)("div",{style:{position:"absolute",top:"-3px",right:"2px"},children:Object(j.jsx)(Z,{status:null===a||void 0===a?void 0:a.status})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h4",{className:"card-title",children:null===a||void 0===a?void 0:a.name}),Object(j.jsx)(ae,{text:null===a||void 0===a?void 0:a.description.substring(0,100)})]}),Object(j.jsxs)("div",{className:"card-footer",children:[Object(j.jsxs)("div",{className:"card-text pull-left",children:[Object(j.jsx)("i",{className:"fa fa-user"}),Object(j.jsx)("span",{className:"mx-1",children:null===a||void 0===a||null===(t=a.project)||void 0===t||null===(n=t.student)||void 0===n||null===(s=n.user)||void 0===s?void 0:s.fullName})]}),Object(j.jsx)("div",{className:"card-text pull-right",children:Object(j.jsxs)("div",{className:"btn-group",children:[Object(j.jsx)("button",{className:"btn btn-sm btn-primary",title:"Download",onClick:function(){return function(e){Object(ve.saveAs)(e.fileURL,e.name)}(a)},children:Object(j.jsx)("i",{className:"fa fa-download"})}),i&&"PENDING"===a.status&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"btn btn-sm btn-success",title:"Approve",onClick:function(){return o(a._id,"ACCEPTED")},children:"Approve"}),Object(j.jsx)("button",{className:"btn btn-sm btn-warning",title:"Reject",onClick:function(){return o(a._id,"REJECTED")},children:"Reject"})]}),Object(j.jsx)(l.b,{className:"btn btn-sm btn-secondary",to:"/projects/".concat(null===a||void 0===a||null===(r=a.project)||void 0===r?void 0:r._id,"/files/").concat(a._id),children:"View"}),u&&Object(j.jsx)("button",{className:"btn btn-sm btn-danger",title:"Delete",onClick:function(){return b(a._id)},children:"Delete"})]})})]})]})},en=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/files");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/files/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"upload",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/files",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/files/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setStatus",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPut("/files/".concat(t,"/status/").concat(n),null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getComments",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/files/".concat(t,"/comments"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/files/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/files/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),tn=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={name:"",description:"",file:{},type:null,projectId:s.props.projectId||s.props.match.params.projectId,project:{},alert:{},hasAlert:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.handleChange=s.handleChange.bind(Object(Q.a)(s)),s.setDescription=s.setDescription.bind(Object(Q.a)(s)),s.onSelectFile=s.onSelectFile.bind(Object(Q.a)(s)),s.getProject=s.getProject.bind(Object(Q.a)(s)),s.uploadFile=s.uploadFile.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState(Object(d.a)(Object(d.a)({},this.state),{},Object(xe.a)({},e.target.name,t)))}},{key:"setDescription",value:function(e){this.setState({description:e})}},{key:"onSelectFile",value:function(e){this.setState({file:e.target.files[0]})}},{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"getProject",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getOneById(this.state.projectId);case 2:(t=e.sent).error?this.setAlert(t.error):this.setState({project:null===(n=t.data)||void 0===n?void 0:n.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a,c,i,l,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),n=this.state,s=n.name,r=n.description,a=n.file,c=n.type,i=n.project,l={name:s,description:r,file:a,fileType:c,projectId:null===i||void 0===i?void 0:i._id,studentId:null===i||void 0===i||null===(t=i.student)||void 0===t?void 0:t._id},e.next=5,en.upload(l);case 5:(o=e.sent).error?this.setAlert(o.error):this.setAlert({title:"Operation successful",message:o.data.message,type:"success"}),ie(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),t=this.props.projectId||this.props.match.params.projectId,this.setState({projectId:t}),e.next=5,this.getProject();case 5:ie(!1);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.hasAlert,n=e.alert,s=e.project;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-12 m-auto",children:Object(j.jsxs)("div",{className:"card bg-light border-success",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsxs)("h4",{className:"text-muted",children:["Project: ",null===s||void 0===s?void 0:s.name]})}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12",children:t&&Object(j.jsx)($,{alert:n,onClick:this.removeAlert})}),Object(j.jsxs)("div",{className:"col-12 m-auto mb-2",children:[Object(j.jsx)("h3",{className:"text-success mb-2",children:"File Details"}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",className:"form-label",children:"File Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",placeholder:"Enter File Name",onChange:this.handleChange}),Object(j.jsxs)("span",{className:"form-text",children:["Eg. Project Proposal for ",(null===s||void 0===s?void 0:s.name)||"xzy"," Project"]})]}),Object(j.jsxs)("div",{className:"form-group mb-2",children:[Object(j.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),Object(j.jsx)(he,{handleChangeFun:this.setDescription})]}),Object(j.jsxs)("div",{className:"form-group mb-2",children:[Object(j.jsx)("label",{htmlFor:"file",className:"form-label",children:"File"}),Object(j.jsx)("input",{className:"form-control",type:"file",id:"file",name:"file",accept:".pdf,.doc, .docx",multiple:!1,onChange:this.onSelectFile})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"type",className:"form-label",children:"File Type"}),Object(j.jsxs)("select",{name:"type",id:"type",className:"form-control",onChange:this.handleChange,defaultValue:"PROPOSAL",children:[Object(j.jsx)("option",{value:"",children:"Select Type"}),Object(j.jsx)("option",{value:"PROPOSAL",children:"Project Proposal Document"}),Object(j.jsx)("option",{value:"SRS",children:"Software Requirements Specification Document (SRS)"}),Object(j.jsx)("option",{value:"SDD",children:"Software Design Document (SDD)"}),Object(j.jsx)("option",{value:"TEST_PLAN",children:"Test Plan Document"}),Object(j.jsx)("option",{value:"USER_MANUAL",children:"User Manual"})]})]})]}),Object(j.jsx)("div",{className:"col-12 my-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("button",{type:"button",id:"btnFile",name:"btnFile",className:"btn btn-success btn-sm",onClick:this.uploadFile,children:"Upload File"}),Object(j.jsx)(l.b,{to:"/projects/".concat(null===s||void 0===s?void 0:s._id,"/files"),className:"btn btn-outline-secondary btn-sm",children:"All Files"})]})})]})})})]})})})})})}}]),n}(r.Component),nn=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={projectId:s.props.match.params.projectId||null,files:[],alert:{},hasAlert:!1,active:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.setActive=s.setActive.bind(Object(Q.a)(s)),s.getProjectFiles=s.getProjectFiles.bind(Object(Q.a)(s)),s.downloadFiles=s.downloadFiles.bind(Object(Q.a)(s)),s.canApproveFile=s.canApproveFile.bind(Object(Q.a)(s)),s.approveFile=s.approveFile.bind(Object(Q.a)(s)),s.isOwner=s.isOwner.bind(Object(Q.a)(s)),s.deleteFile=s.deleteFile.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"setActive",value:function(e){this.setState({active:e}),e||this.getProjectFiles()}},{key:"getProjectFiles",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.projectId,e.next=3,F.getFiles(t);case 3:(n=e.sent).error?this.setAlert(n.error):this.setState({files:null===(s=n.data)||void 0===s?void 0:s.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadFiles",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.files)){e.next=5;break}t.forEach((function(e){Object(ve.saveAs)(e.fileURL,e.name)})),e.next=6;break;case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"approveFile",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,en.setStatus(t,n);case 3:if(!(s=e.sent).error){e.next=8;break}this.setAlert(s.error),e.next=11;break;case 8:return this.setAlert({message:s.data.message,type:"success"}),e.next=11,this.getProjectFiles();case 11:ie(!1);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteFile",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this file")){e.next=10;break}return ie(!0),e.next=5,en.delete(t);case 5:return(n=e.sent).error?this.setAlert(n.error):this.setAlert({message:n.data.message,type:"success"}),e.next=9,this.getProjectFiles();case 9:ie(!1);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"canApproveFile",value:function(){var e,t,n,s,r,a=I.getUserEmail(),c=(null===(e=this.state.files[0])||void 0===e?void 0:e.project)||{};return!(!c||a!==(null===c||void 0===c||null===(t=c.evaluator)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email)&&a!==(null===c||void 0===c||null===(s=c.supervisor)||void 0===s||null===(r=s.user)||void 0===r?void 0:r.email))}},{key:"isOwner",value:function(){var e,t,n,s=I.getUserEmail(),r=(null===(e=this.state.files[0])||void 0===e?void 0:e.project)||{};return!(!r||s!==(null===r||void 0===r||null===(t=r.student)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.email))}},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),this.setState({projectId:this.props.match.params.projectId}),e.next=4,this.getProjectFiles();case 4:ie(!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.projectId,s=t.files,r=t.alert,a=t.hasAlert,c=t.active;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container-fluid p-1",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)(l.b,{to:"/my-projects",className:"btn btn-sm btn-outline-secondary",children:"My Projects"}),Object(j.jsx)("h3",{children:"Project Files"}),Object(j.jsxs)("div",{children:["STUDENT"===I.getUserRole()&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{className:"btn btn-sm btn-outline-secondary",onClick:function(){return e.setActive(!0)},children:"New File"}),Object(j.jsx)(re,{id:"new-comment",title:"Upload Project file",active:c,setActive:this.setActive,size:"lg",children:Object(j.jsx)(tn,{projectId:n})})]}),Object(j.jsxs)("button",{className:"btn btn-success mx-2",onClick:function(){return e.downloadFiles()},children:[Object(j.jsx)("i",{className:"fa fa-download text-light"})," Download All"]})]})]})}),Object(j.jsxs)("div",{className:"col-12 mb-2",children:[a&&Object(j.jsx)($,{alert:r,onClick:this.removeAlert}),Object(j.jsx)("div",{className:"card",children:Object(j.jsx)("div",{className:"row",children:s&&s.map((function(t){return Object(j.jsx)("div",{className:"col-sm-6 col-md-4 mb-2",children:Object(j.jsx)(Zt,{file:t,canApprove:e.canApproveFile(),approveFileFun:e.approveFile,canDelete:e.isOwner(),deleteFileFun:e.deleteFile})},null===t||void 0===t?void 0:t._id)}))})})]})]})})})}}]),n}(r.Component),sn=n(71),rn=n.n(sn),an=n(112),cn=n.n(an),ln=function(e){var t=e.file,n=[{url:null===t||void 0===t?void 0:t.fileURL}];return Object(j.jsx)(rn.a,{documents:n,pluginRenderers:sn.DocViewerRenderers})},on=function(e){var t,n=e.file,s=null===n||void 0===n||null===(t=n.fileURL)||void 0===t?void 0:t.split("."),r=s?s[(null===s||void 0===s?void 0:s.length)-1]:"auto";return Object(j.jsx)(cn.a,{fileType:r,filePath:null===n||void 0===n?void 0:n.fileURL})},dn=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={fileId:s.props.match.params.fileId||null,file:{},project:{},alert:{},hasAlert:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.getFile=s.getFile.bind(Object(Q.a)(s)),s.isOwner=s.isOwner.bind(Object(Q.a)(s)),s.deleteFile=s.deleteFile.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"getFile",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.fileId||this.props.match.params.fileId,e.next=3,en.getOneById(t);case 3:(n=e.sent).error?this.setAlert(n.error):this.setState({file:null===(s=n.data)||void 0===s?void 0:s.data,project:null===(r=n.data)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.project});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isOwner",value:function(){var e,t,n=I.getUserEmail(),s=this.state.file.project||{};return!(!s||n!==(null===s||void 0===s||null===(e=s.student)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email))}},{key:"deleteFile",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are your sure you want to delete this file?")){e.next=8;break}return ie(!0),e.next=5,en.delete(t);case 5:(n=e.sent).error?this.setAlert(n.error):this.setAlert({message:null===(s=n.data)||void 0===s?void 0:s.message,type:"success"}),ie(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),this.setState({fileId:this.props.match.params.fileId}),e.next=4,this.getFile();case 4:ie(!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.file,s=t.project;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)(l.b,{to:"/projects/".concat(null===s||void 0===s?void 0:s._id,"/files"),className:"btn btn-sm btn-outline-secondary",children:"All Files"}),Object(j.jsx)("div",{className:"card bg-transparent border-0",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h4",{className:"card-title",children:"Project: ".concat(null===s||void 0===s?void 0:s.name)}),Object(j.jsx)("h6",{className:"text-muted card-subtitle",children:"File Name: ".concat(null===n||void 0===n?void 0:n.name)})]})}),"STUDENT"===I.getUserRole?Object(j.jsx)(l.b,{to:"/new-file",className:"btn btn-sm btn-primary",children:"New File"}):Object(j.jsx)("div",{})]})}),Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Description"}),Object(j.jsx)("th",{children:"Status"}),this.isOwner()&&Object(j.jsx)("th",{children:"Action"})]})}),Object(j.jsx)("tbody",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:null===n||void 0===n?void 0:n.description}),Object(j.jsx)("td",{children:null===n||void 0===n?void 0:n.status}),this.isOwner()&&Object(j.jsx)("td",{children:Object(j.jsx)("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){return e.deleteFile(n._id)},children:Object(j.jsx)("i",{className:"fa fa-trash-o"})})})]})})]})}),Object(j.jsx)("div",{className:"col-12 mb-2",children:n&&Object(j.jsx)(on,{file:n})}),Object(j.jsx)("div",{className:"col-12",children:n&&Object(j.jsx)(ln,{file:n})})]})})})}}]),n}(r.Component),un=function(){var e=Object(r.useState)([]),t=Object(X.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)({}),c=Object(X.a)(a,2),i=c[0],l=c[1],o=Object(r.useState)(!1),d=Object(X.a)(o,2),u=d[0],b=d[1];Object(r.useEffect)((function(){h()}),[]);var h=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,F.getAllByStatus("WAITING_APPROVAL").then((function(e){var t;e.error?(l(e.error),b(!0)):s(null===(t=e.data)||void 0===t?void 0:t.data)})).catch((function(e){console.log(e)}));case 3:ie(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,F.setStatus(t,"ACCEPTED");case 3:if(!(n=e.sent).error){e.next=8;break}l(n.error),e.next=12;break;case 8:return l({message:n.data.message,type:"success"}),b(!0),e.next=12,h();case 12:ie(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container-fluid p-1",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 text-center mb-2",children:Object(j.jsx)("h3",{children:"Approve Pending Projects"})}),Object(j.jsx)("div",{className:"col-md-12 my-2 ",children:Object(j.jsx)("div",{className:"card bg-transparent shadow",children:Object(j.jsxs)("div",{className:"card-body",children:[u&&Object(j.jsx)($,{alert:i,onClick:function(){l(null),b(!1)}}),(null===n||void 0===n?void 0:n.length)>0?Object(j.jsx)(Fe,{pendingProjects:n,approveProjectFun:m}):Object(j.jsx)("p",{className:"card-text",children:"No Pending Projects"})]})})})]})})})},jn=function(e){var t=e.user,n=e.message,s=e.refreshFun,a=Object(r.useState)({}),c=Object(X.a)(a,2),i=c[0],l=c[1],o=Object(r.useState)(!1),d=Object(X.a)(o,2),u=d[0],b=d[1],h=Object(r.useState)(null),m=Object(X.a)(h,2),v=m[0],p=m[1],O=function(){var e=Object(g.a)(f.a.mark((function e(){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),r={messageId:n._id,userId:t._id,reply:v},e.next=4,xt.sendReply(r).then((function(e){var t;e.error?(l(e.error),b(!0)):(l({title:"Server Response",message:null===(t=e.data)||void 0===t?void 0:t.message,type:"success"}),b(!0))}));case 4:s(),ie(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[u&&Object(j.jsx)($,{alert:i,onClick:function(){l(null),b(!1)}}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"reply",className:"form-label",children:"Reply"}),Object(j.jsx)(he,{handleChangeFun:p})]}),Object(j.jsx)("div",{className:"my-2",children:Object(j.jsx)("button",{name:"btnSend",id:"btnSend",className:"btn btn-success",type:"button",onClick:function(){return O()},children:"Send Reply"})})]})},bn=function(e){var t=e.user,n=e.message,s=e.refreshFun,a=Object(r.useState)(!1),c=Object(X.a)(a,2),i=c[0],l=c[1];return Object(j.jsxs)("div",{className:"card bg-transparent shadow custom-card mb-2",children:[Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("blockquote",{className:"card-text blockquote",children:[Object(j.jsx)(ae,{text:null===n||void 0===n?void 0:n.message}),Object(j.jsxs)("span",{className:"blockquote-footer",children:["Posted On:",Object(j.jsx)("span",{children:Object(te.shortDate)(null===n||void 0===n?void 0:n.createdAt)})]})]})}),Object(j.jsxs)("div",{className:"card-footer",children:[Object(j.jsxs)("div",{className:"card-text pull-left",children:[Object(j.jsx)("i",{className:"fa fa-user"}),Object(j.jsx)("span",{className:"mx-1",children:null===n||void 0===n?void 0:n.senderName})]}),Object(j.jsxs)("div",{className:"pull-right",children:[Object(j.jsxs)("button",{className:"btn btn-sm",onClick:function(){return l(!0)},children:[" ",Object(j.jsx)("i",{className:"fa fa-reply"})]}),Object(j.jsx)(re,{title:"Reply to Message",active:i,setActive:l,id:"new-reply",children:Object(j.jsx)(jn,{user:t,message:n,refreshFun:s})})]})]})]})},hn=function(e){var t=e.user,n=e.messages,s=e.refreshFun;return n.map((function(e){return Object(j.jsx)(bn,{user:t,message:e,refreshFun:s},null===e||void 0===e?void 0:e._id)}))},mn=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={messages:[],user:{},alert:{},hasAlert:!1,active:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.setActive=s.setActive.bind(Object(Q.a)(s)),s.getMessages=s.getMessages.bind(Object(Q.a)(s)),s.getUser=s.getUser.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"setActive",value:function(e){this.setState({active:e}),e||this.getMessages()}},{key:"getMessages",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt.getAll();case 2:(t=e.sent).error?this.setAlert(t.error):this.setState({messages:(null===(n=t.data)||void 0===n?void 0:n.data)||[]});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.getUserEmail(),e.next=3,ue.getOneByEmail(t);case 3:(n=e.sent).error?this.setAlert(n.error):this.setState({user:(null===(s=n.data)||void 0===s?void 0:s.data)||{}});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getMessages();case 3:return e.next=5,this.getUser();case 5:ie(!1);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.messages,s=t.user,r=t.alert,a=t.hasAlert,c=t.active;return console.log({messages:n}),Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{children:" "}),Object(j.jsx)("h3",{children:"Messages"}),Object(j.jsx)("div",{children:" "})]})}),Object(j.jsx)("div",{className:"col-12 mb-2",children:a&&Object(j.jsx)($,{alert:r,onClick:this.removeAlert})}),Object(j.jsxs)("div",{className:"col-12 mb-2",children:[Object(j.jsx)("button",{className:"btn btn-sm btn-outline-secondary",onClick:function(){return e.setActive(!0)},children:"New Message"}),Object(j.jsx)(re,{id:"new-message",title:"Create New Message",active:c,setActive:this.setActive,size:"md",children:Object(j.jsx)(ft,{user:s})})]}),Object(j.jsx)("div",{className:"col-12 mb-2",children:n&&Object(j.jsx)(hn,{user:s,messages:n,refreshFun:this.getMessages})})]})})})}}]),n}(r.Component),vn=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={code:s.props.match.params.code,alert:{},hasAlert:!1,isVerified:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.verifyAccount=s.verifyAccount.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"verifyAccount",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),t=this.state.code,e.next=4,I.verifyAccount(t).then((function(e){e.error?(n.setAlert(e.error),n.setState({isVerified:!1})):(n.setAlert({message:e.data.message,type:"success"}),n.setState({isVerified:!0}))}));case 4:ie(!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.verifyAccount();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.alert,n=e.hasAlert,s=e.isVerified;return Object(j.jsx)("div",{className:"main",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row my-5",children:Object(j.jsx)("div",{className:"col-12 col-md-6 offset-md-2",children:Object(j.jsx)("div",{className:"card bg-transparent shadow",children:Object(j.jsxs)("div",{className:"card-body ",children:[Object(j.jsx)("div",{className:"card-text",children:n&&Object(j.jsx)($,{alert:t,onClick:this.removeAlert})}),Object(j.jsx)("div",{className:"card-text",children:s?Object(j.jsx)(l.b,{to:"/login",className:"card-link btn btn-sm btn-primary",children:"Login"}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:"Auto Verification failed. Please click the button bellow to verify your account."}),Object(j.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:this.verifyAccount,children:"Verify"})]})})]})})})})})})}}]),n}(a.a.Component),pn=new(function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,[{key:"getAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/guides");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOneById",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doGet("/guides/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"postGuide",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/guides",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGuide",value:function(){var e=Object(g.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doPost("/guides/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/guides/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doDelete("/guides/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),On=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={title:"",content:"",staffId:"",allStaff:[],guide:s.props.guide||null,alert:{},hasAlert:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.handleChange=s.handleChange.bind(Object(Q.a)(s)),s.setContent=s.setContent.bind(Object(Q.a)(s)),s.getAllStaff=s.getAllStaff.bind(Object(Q.a)(s)),s.createOrEditGuide=s.createOrEditGuide.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState(Object(d.a)(Object(d.a)({},this.state),{},Object(xe.a)({},e.target.name,t)))}},{key:"setContent",value:function(e){this.setState({content:e})}},{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"getAllStaff",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.getAll();case 2:(t=e.sent).error?this.setAlert(t.error):this.setState({allStaff:t.data.data,staffId:(null===(n=t.data)||void 0===n||null===(s=n.data)||void 0===s||null===(r=s.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email)===I.getUserEmail()}))[0])||void 0===r?void 0:r._id)||null});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrEditGuide",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n,s,r,a,c,i,l,o,d=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>0&&void 0!==d[0]&&d[0],ie(!0),s=this.state,r=s.title,a=s.content,c=s.staffId,i=s.guide,l={title:r||i.title,content:a||i.content,staffId:c||(null===(t=i.createdBy)||void 0===t?void 0:t._id)},!n){e.next=10;break}return e.next=7,pn.updateGuide(null===i||void 0===i?void 0:i._id,l);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,pn.postGuide(l);case 12:e.t0=e.sent;case 13:(o=e.t0).error?this.setAlert(o.error):this.setAlert({title:"Operation successful",message:o.data.message,type:"success"}),ie(!1);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getAllStaff();case 3:ie(!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.hasAlert,s=t.alert,r=t.guide;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:null===r?"container":"container-fluid",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:null===r?"col-lg-8 m-auto":"col-12",children:Object(j.jsxs)("div",{className:null===r?"card bg-light border-success":"card bg-light",children:[null==r?Object(j.jsx)("div",{className:"card-header bg-success text-light d-flex flex-row justify-content-center align-items-center",children:Object(j.jsx)("h6",{className:"text align-content-center",children:" NEW GUIDE"})}):null,Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:null===r?"container":"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12",children:n&&Object(j.jsx)($,{alert:s,onClick:this.removeAlert})}),Object(j.jsxs)("div",{className:"col-lg-10 offset-lg-1 mb-2",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"title",className:"form-label",children:"Guide Title"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"title",name:"title",placeholder:"Enter Guide Title",defaultValue:null===r||void 0===r?void 0:r.title,onChange:this.handleChange})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"content",className:"form-label",children:"Content"}),Object(j.jsx)(he,{text:null===r||void 0===r?void 0:r.content,height:350,handleChangeFun:this.setContent})]})]}),Object(j.jsx)("div",{className:"col-12 my-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("button",{type:"button",id:"btnGuide",name:"btnGuide",className:"btn btn-success btn-lg",onClick:function(){return e.createOrEditGuide(null!==r)},children:"Submit Guide"}),Object(j.jsx)(l.b,{to:"/guides",id:"btnGuides",name:"btnGuides",className:"btn btn-outline-secondary btn-lg",children:"View Guides"})]})})]})})})]})})})})})}}]),n}(r.Component),xn=n(11).shortDate,fn=function(e){var t=e.guides,n=void 0===t?[]:t,s=e.canDelete,a=e.deleteFun,c=Object(r.useState)(!1),i=Object(X.a)(c,2),o=i[0],d=i[1];return Object(j.jsxs)("table",{className:"table table-hover table-responsive table-sm",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Title"}),Object(j.jsx)("th",{children:"Created By"}),Object(j.jsx)("th",{children:"Date Created"}),Object(j.jsx)("th",{children:"Last Update"}),Object(j.jsx)("th",{children:"Action"})]})}),Object(j.jsx)("tbody",{children:n.map((function(e){var t,n;return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e._id}),Object(j.jsx)("td",{children:Object(j.jsx)("h5",{className:"text-primary",children:e.title})}),Object(j.jsx)("td",{children:null===(t=e.createdBy)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.fullName}),Object(j.jsx)("td",{children:xn(e.createdAt)}),Object(j.jsx)("td",{children:xn(e.updateAt)}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsxs)("ul",{className:"list-inline",children:[Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)(l.b,{to:"/guides/".concat(e._id),className:"btn btn-sm btn-primary",children:"Read"})}),s&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("li",{className:"list-inline-item",children:[Object(j.jsx)("button",{className:"btn btn-sm btn-primary",onClick:function(){return d(!0)},children:Object(j.jsx)("i",{className:"fa fa-edit"})}),Object(j.jsx)(re,{title:"Edit Guide",active:o,setActive:d,size:"xl",children:Object(j.jsx)(On,{guide:e})})]}),Object(j.jsx)("li",{className:"list-inline-item",children:Object(j.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){return a(e._id)},children:Object(j.jsx)("i",{className:"fa fa-trash"})})})]})]})})]},e._id)}))})]})},gn=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={guides:[],alert:{},hasAlert:!1,active:!1,userRole:I.getUserRole()},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.canDelete=s.canDelete.bind(Object(Q.a)(s)),s.deleteGuide=s.deleteGuide.bind(Object(Q.a)(s)),s.getGuides=s.getGuides.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"canDelete",value:function(){var e=I.getUserRole();return!!["EVALUATOR","ADMINISTRATOR"].includes(e)}},{key:"deleteGuide",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this items")){e.next=8;break}return ie(!0),e.next=5,pn.delete(t).then((function(e){e.error?n.setAlert(e.error):n.setAlert({title:"Operation successful",message:e.data.message,type:"success"})})).catch((function(e){console.log(e)}));case 5:return e.next=7,this.getGuides();case 7:ie(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGuides",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn.getAll();case 2:(t=e.sent).error?this.setAlert(t.error):this.setState({guides:null===(n=t.data)||void 0===n?void 0:n.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getGuides();case 3:this.canDelete(),ie(!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.guides,n=e.alert,s=e.hasAlert;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 mb-2",children:Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{children:" "}),Object(j.jsx)("h3",{children:"Guides"}),Object(j.jsx)("div",{children:this.canDelete()&&Object(j.jsx)(l.b,{to:"/new-guide",className:"btn btn-sm btn-primary",children:"New Guide"})})]})}),Object(j.jsx)("div",{className:"col-12 mb-2",children:s&&Object(j.jsx)($,{alert:n,onClick:this.removeAlert})}),Object(j.jsx)("div",{className:"col-12 mb-2",children:t?Object(j.jsx)(fn,{guides:t,canDelete:this.canDelete(),deleteFun:this.deleteGuide}):Object(j.jsx)("div",{className:"shadow",children:Object(j.jsx)("p",{children:"No Guides found"})})})]})})})}}]),n}(r.Component),Nn=function(e){Object(z.a)(n,e);var t=Object(J.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={guideId:s.props.match.params.guideId,guide:{},alert:{},hasAlert:!1},s.setAlert=s.setAlert.bind(Object(Q.a)(s)),s.removeAlert=s.removeAlert.bind(Object(Q.a)(s)),s.getGuide=s.getGuide.bind(Object(Q.a)(s)),s}return Object(y.a)(n,[{key:"setAlert",value:function(e){this.setState({alert:e,hasAlert:!0})}},{key:"removeAlert",value:function(){this.setState({alert:null,hasAlert:!1})}},{key:"getGuide",value:function(){var e=Object(g.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.guideId||this.props.match.params.guideId,e.next=3,pn.getOneById(t);case 3:(n=e.sent).error?this.setAlert(n.error):this.setState({guide:n.data.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!0),e.next=3,this.getGuide();case 3:ie(!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,s,r,a,c=this.state,i=c.guide,l=c.hasAlert,o=c.alert;return Object(j.jsx)("div",{className:"admin-main",children:Object(j.jsx)("div",{className:"container p-1",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 text-center mb-2",children:Object(j.jsx)("h3",{children:null===i||void 0===i?void 0:i.title})}),l&&Object(j.jsx)($,{alert:o,onClick:this.removeAlert}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsxs)("div",{className:"card bg-transparent border-0",children:[Object(j.jsx)("div",{className:"card-header bg-transparent my-2",children:Object(j.jsxs)("div",{className:"owner shadow p-2",children:[Object(j.jsxs)("h4",{className:"card-title text-primary",children:["By ",null===i||void 0===i||null===(e=i.createdBy)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.fullName,Object(j.jsxs)("span",{className:"mx-1 small",children:["(",null===i||void 0===i||null===(n=i.createdBy)||void 0===n||null===(s=n.user)||void 0===s?void 0:s.role,")"]})]}),Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsxs)("span",{className:"text-muted",children:[Object(j.jsx)("i",{className:"fa fa-envelope"}),Object(j.jsxs)("span",{className:"mx-1",children:[null===i||void 0===i||null===(r=i.createdBy)||void 0===r||null===(a=r.user)||void 0===a?void 0:a.email," "]})]}),Object(j.jsx)("span",{className:"text-muted",children:Object(te.default)(null===i||void 0===i?void 0:i.createdAt).toDateString()||"--"})]})]})}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("article",{className:"card-text mb-1",children:Object(j.jsx)(ae,{text:null===i||void 0===i?void 0:i.content})})})]})})]})})})}}]),n}(r.Component);var yn=function(){return Object(j.jsx)(l.a,{children:Object(j.jsxs)(o.d,{children:[Object(j.jsx)(q,{path:"/",exact:!0,component:K}),Object(j.jsx)(q,{path:"/login",exact:!0,component:ye}),Object(j.jsx)(q,{path:"/register",exact:!0,component:Se}),Object(j.jsx)(q,{path:"/contact",exact:!0,component:$t}),Object(j.jsx)(q,{path:"/verify/:code",exact:!0,component:vn}),Object(j.jsx)(W,{path:"/dashboard",exact:!0,component:Ze}),Object(j.jsx)(W,{path:"/projects",exact:!0,component:le}),Object(j.jsx)(W,{path:"/projects/:projectId",exact:!0,component:Oe}),Object(j.jsx)(W,{path:"/my-projects",exact:!0,component:ct}),Object(j.jsx)(W,{path:"/new-project",exact:!0,component:tt}),Object(j.jsx)(W,{path:"/approve-projects",exact:!0,component:un}),Object(j.jsx)(W,{path:"/projects/:projectId/milestones",exact:!0,component:ht}),Object(j.jsx)(W,{path:"/projects/:projectId/milestones/:milestoneId",exact:!0,component:vt}),Object(j.jsx)(W,{path:"/new-milestone",exact:!0,component:st}),Object(j.jsx)(W,{path:"/new-task/:milestoneId",exact:!0,component:dt}),Object(j.jsx)(W,{path:"/projects/:projectId/comments",exact:!0,component:Tt}),Object(j.jsx)(W,{path:"/projects/:projectId/files",exact:!0,component:nn}),Object(j.jsx)(W,{path:"/projects/:projectId/files/:fileId",exact:!0,component:dn}),Object(j.jsx)(W,{path:"/projects/:projectId/report",exact:!0,component:Bt}),Object(j.jsx)(W,{path:"/notifications",exact:!0,component:Ut}),Object(j.jsx)(W,{path:"/reports",exact:!0,component:Ht}),Object(j.jsx)(W,{path:"/profile",exact:!0,component:pt}),Object(j.jsx)(W,{path:"/users",exact:!0,component:At}),Object(j.jsx)(W,{path:"/students",exact:!0,component:St}),Object(j.jsx)(W,{path:"/staff",exact:!0,component:Pt}),Object(j.jsx)(W,{path:"/new-user",exact:!0,component:Dt}),Object(j.jsx)(W,{path:"/guides",exact:!0,component:gn}),Object(j.jsx)(W,{path:"/new-guide",exact:!0,component:On}),Object(j.jsx)(W,{path:"/guides/:guideId",exact:!0,component:Nn}),Object(j.jsx)(W,{path:"/settings",exact:!0,component:zt}),Object(j.jsx)(W,{path:"/messages",exact:!0,component:mn}),Object(j.jsx)(W,{path:"/help",exact:!0,component:Xt}),Object(j.jsx)(o.b,{path:"*",exact:!0,component:Qt})]})})},wn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),s(e),r(e),a(e),c(e)}))};i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(yn,{})}),document.getElementById("root")),wn()}},[[190,1,2]]]);
//# sourceMappingURL=main.3a8734d5.chunk.js.map